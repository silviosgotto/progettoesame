function t(t){return t&&t.__esModule?t.default:t}function e(t,e,n,s){Object.defineProperty(t,e,{get:n,set:s,enumerable:!0,configurable:!0})}function n(t,e){return Object.keys(e).forEach((function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})})),t}var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},o={},a=s.parcelRequire3c28;null==a&&((a=function(t){if(t in r)return r[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){o[t]=e},s.parcelRequire3c28=a),a.register("02Ztr",(function(t,e){var n=a("gpDEB"),s=a("kzBhd"),i=a("72a6v"),r=a("dIU5s");t.exports=function(t,e){return n(t)||s(t,e)||i(t,e)||r()},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("gpDEB",(function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("kzBhd",(function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var s,i,r=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(s=n.next()).done)&&(r.push(s.value),!e||r.length!==e);o=!0);}catch(t){a=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return r}},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("72a6v",(function(t,e){var n=a("2zZPz");t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?n(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("2zZPz",(function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("dIU5s",(function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("fu0YK",(function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports})),a.register("lR7jo",(function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}t.exports=function(t,e,s){return e&&n(t.prototype,e),s&&n(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}));var l;l=class{constructor(t,e,n,s){this.n=t,this.l=e,this.ctx=n,this.mode=s,this.posNeu=[],this.sigma=20,this.eps=.2,this.count=0,this.scale='{"arm":[{"x":0,"y":0},{"x":2,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":2,"y":1},{"x":3,"y":1},{"x":1,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":4,"y":3},{"x":0,"y":4},{"x":3,"y":4},{"x":4,"y":4}],"semid":[{"x":0,"y":0},{"x":1,"y":0},{"x":3,"y":0},{"x":4,"y":0},{"x":1,"y":1},{"x":2,"y":1},{"x":4,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":3,"y":2},{"x":0,"y":3},{"x":1,"y":3},{"x":3,"y":3},{"x":4,"y":3},{"x":1,"y":4},{"x":2,"y":4},{"x":4,"y":4}],"dim":[{"x":0,"y":0},{"x":2,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":1},{"x":4,"y":1},{"x":1,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":3,"y":3},{"x":0,"y":4},{"x":1,"y":4},{"x":3,"y":4},{"x":4,"y":4}],"esa":[{"x":0,"y":0},{"x":2,"y":0},{"x":4,"y":0},{"x":1,"y":1},{"x":3,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":1,"y":3},{"x":3,"y":3},{"x":0,"y":4},{"x":2,"y":4},{"x":4,"y":4}],"blues":[{"x":0,"y":0},{"x":0,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":2,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":3,"y":3},{"x":4,"y":3},{"x":2,"y":4},{"x":4,"y":4}],"petmin":[{"x":0,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":2,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":4,"y":3},{"x":2,"y":4},{"x":4,"y":4}],"petmag":[{"x":0,"y":0},{"x":2,"y":0},{"x":4,"y":0},{"x":2,"y":1},{"x":4,"y":1},{"x":2,"y":2},{"x":4,"y":2},{"x":1,"y":3},{"x":4,"y":3},{"x":1,"y":4},{"x":4,"y":4}],"ionic":[{"x":0,"y":0},{"x":2,"y":0},{"x":4,"y":0},{"x":0,"y":1},{"x":2,"y":1},{"x":4,"y":1},{"x":1,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":1,"y":3},{"x":2,"y":3},{"x":4,"y":3},{"x":1,"y":4},{"x":3,"y":4},{"x":4,"y":4}],"doric":[{"x":0,"y":0},{"x":2,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":2,"y":1},{"x":4,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":4,"y":3},{"x":1,"y":4},{"x":2,"y":4},{"x":4,"y":4}],"frigian":[{"x":0,"y":0},{"x":1,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":2,"y":1},{"x":3,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":3,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":4,"y":3},{"x":0,"y":4},{"x":2,"y":4},{"x":4,"y":4}],"lydian":[{"x":0,"y":0},{"x":2,"y":0},{"x":4,"y":0},{"x":1,"y":1},{"x":2,"y":1},{"x":4,"y":1},{"x":1,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":1,"y":3},{"x":3,"y":3},{"x":4,"y":3},{"x":1,"y":4},{"x":3,"y":4},{"x":4,"y":4}],"mixolydian":[{"x":0,"y":0},{"x":2,"y":0},{"x":4,"y":0},{"x":0,"y":1},{"x":2,"y":1},{"x":4,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":1,"y":3},{"x":2,"y":3},{"x":4,"y":3},{"x":1,"y":4},{"x":2,"y":4},{"x":4,"y":4}],"eolian":[{"x":0,"y":0},{"x":2,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":2,"y":1},{"x":3,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":4,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":4,"y":3},{"x":0,"y":4},{"x":2,"y":4},{"x":4,"y":4}],"locrian":[{"x":0,"y":0},{"x":1,"y":0},{"x":3,"y":0},{"x":0,"y":1},{"x":1,"y":1},{"x":3,"y":1},{"x":0,"y":2},{"x":2,"y":2},{"x":3,"y":2},{"x":0,"y":3},{"x":2,"y":3},{"x":3,"y":3},{"x":0,"y":4},{"x":2,"y":4},{"x":4,"y":4}]}'}getN(){return this.n}getL(){return this.l}getCtx(){return this.ctx}getPosNeu(){return this.posNeu}getMode(){return this.mode}getEps(){return this.eps}initPosNeu(){for(let t=0;t<this.n;t++){let[e,n]=[this.l*Math.random(),this.l*Math.random()];this.posNeu[t]=[e,n]}}drawNeurons(){for(var t=1;t<this.posNeu.length;t++)this.ctx.line(this.posNeu[t][0],this.posNeu[t][1],this.posNeu[t-1][0],this.posNeu[t-1][1]).css({stroke:"hsl("+this.count/4+", 100%, 50%)",width:"4px"});for(var e=1;e<this.posNeu.length;e++)this.ctx.circle(10).attr({cx:this.posNeu[e-1][0],cy:this.posNeu[e-1][1]}).css({fill:"hsl("+this.count/4+", 100%, 50%)"}),e==this.posNeu.length-1&&this.ctx.circle(10).attr({cx:this.posNeu[e][0],cy:this.posNeu[e][1]}).css({fill:"hsl("+this.count/4+", 100%, 50%)"})}initNeurons(){this.initPosNeu(),this.drawNeurons()}setPosDotMode(){var t=JSON.parse(this.scale),e=Math.floor(Math.random()*t[this.mode].length),n=parseFloat(t[this.mode][e].x/5),s=parseFloat(t[this.mode][e].y/5);return[this.l/5*Math.random()+n*this.l,this.l/5*Math.random()+s*this.l]}learning(){var t=0,e=0;let n=this.setPosDotMode();for(var s=n[0],i=n[1],r=0;r<this.posNeu.length;r++){var o=this.posNeu[r][0],a=this.posNeu[r][1],l=Math.hypot(s-o,i-a);0==r?(e=l,t=r):l<e&&(t=r,e=l)}for(var c=0;c<this.posNeu.length;c++)this.posNeu[c][0]=this.posNeu[c][0]+this.eps*Math.exp(-Math.pow(c-t,2)/(2*Math.pow(this.sigma,2)))*(s-this.posNeu[c][0]),this.posNeu[c][1]=this.posNeu[c][1]+this.eps*Math.exp(-Math.pow(c-t,2)/(2*Math.pow(this.sigma,2)))*(i-this.posNeu[c][1]);this.count%5==0&&(this.sigma=.95*this.sigma,this.eps=.999*this.eps),this.count++}normalizeArray(t){let e=Math.min(...t),n=Math.max(...t),s=[];t[t.length]=0;for(let i=0;i<t.length;i++)s[i]=(t[i]-e)/(n-e),0==i?t[i]=0:s[i-1]>=0&&s[i-1]<1/8?t[i]=t[i-1]+1/4:s[i-1]>=1/8&&s[i-1]<2/8?t[i]=t[i-1]+.5:s[i-1]>=2/8&&s[i-1]<3/8?t[i]=t[i-1]+3/4:s[i-1]>=3/8&&s[i-1]<.5?t[i]=t[i-1]+1:s[i-1]>=.5&&s[i-1]<5/8?t[i]=t[i-1]+5/4:s[i-1]>=5/8&&s[i-1]<6/8?t[i]=t[i-1]+1.5:s[i-1]>=6/8&&s[i-1]<7/8?t[i]=t[i-1]+7/4:t[i]=t[i-1]+2;return t}calcDistNormNeu(){for(var t=[],e=1;e<this.posNeu.length;e++){let n=this.posNeu[e][0],s=this.posNeu[e][1],i=this.posNeu[e-1][0],r=this.posNeu[e-1][1];t[e-1]=Math.hypot(n-i,s-r)}return this.normalizeArray(t)}render(){this.ctx.clear(),this.learning(),this.drawNeurons()}calcPosPad(){for(var t=[],e=!0,n=1,s=0;s<this.posNeu.length;s++){e=!0,n=1;for(var i=1;i<=5;i++)for(var r=1;r<=5;r++)e&&(this.posNeu[s][0]<=r*this.l/5&&this.posNeu[s][1]<=i*this.l/5&&(t[s]=n,e=!1),n++)}return t}};var c;var h={};!function(t,e){"object"==typeof h?e(h,a("02Ztr"),a("fu0YK"),a("lR7jo")):"function"==typeof define&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).automationEvents={},t._slicedToArray,t._classCallCheck,t._createClass)}(h,(function(t,e,n,s){function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=i(e),o=i(n),a=i(s),l=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},c=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},h=function(t,e){return{startTime:e,type:"setValue",value:t}},u=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},d=function(t,e,n){var s=n.startTime,i=n.target,r=n.timeConstant;return i+(e-i)*Math.exp((s-t)/r)},p=function(t){return"exponentialRampToValue"===t.type},m=function(t){return"linearRampToValue"===t.type},f=function(t){return p(t)||m(t)},g=function(t){return"setValue"===t.type},_=function(t){return"setValueCurve"===t.type},v=function t(e,n,s,i){var r=e[n];return void 0===r?i:f(r)||g(r)?r.value:_(r)?r.values[r.values.length-1]:d(s,t(e,n-1,r.startTime,i),r)},y=function(t,e,n,s,i){return void 0===n?[s.insertTime,i]:f(n)?[n.endTime,n.value]:g(n)?[n.startTime,n.value]:_(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,v(t,e-1,n.startTime,i)]},b=function(t){return"cancelAndHold"===t.type},w=function(t){return"cancelScheduledValues"===t.type},x=function(t){return b(t)||w(t)?t.cancelTime:p(t)||m(t)?t.endTime:t.startTime},T=function(t,e,n,s){var i=s.endTime,r=s.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(t-e)/(i-e)):0},E=function(t,e,n,s){return n+(t-e)/(s.endTime-e)*(s.value-n)},C=function(t,e){var n=e.duration,s=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]}(i,(t-s)/n*(i.length-1))},A=function(t){return"setTarget"===t.type},k=function(t){function e(t){o.default(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return a.default(e,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=x(t);if(b(t)||w(t)){var n=this._automationEvents.findIndex((function(n){return w(t)&&_(n)?n.startTime+n.duration>=e:x(n)>=e})),s=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==s&&f(s)){if(A(i))throw new Error("The internal list is malformed.");var r=_(i)?i.startTime+i.duration:x(i),o=_(i)?i.values[i.values.length-1]:i.value,a=p(s)?T(e,r,o,s):E(e,r,o,s),d=p(s)?l(a,e,this._currenTime):c(a,e,this._currenTime);this._automationEvents.push(d)}void 0!==i&&A(i)&&this._automationEvents.push(h(this.getValue(e),e)),void 0!==i&&_(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=u(new Float32Array([6,7]),i.startTime,e-i.startTime))}}else{var g=this._automationEvents.findIndex((function(t){return x(t)>e})),v=-1===g?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(void 0!==v&&_(v)&&x(v)+v.duration>e)return!1;var y=p(t)?l(t.value,t.endTime,this._currenTime):m(t)?c(t.value,e,this._currenTime):t;if(-1===g)this._automationEvents.push(y);else{if(_(t)&&e+t.duration>x(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,y)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return x(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),s=n[0];A(s)&&n.unshift(h(v(this._automationEvents,e-2,s.startTime,this._defaultValue),s.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex((function(e){return x(e)>t})),n=this._automationEvents[e],s=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[s];if(void 0!==i&&A(i)&&(void 0===n||!f(n)||n.insertTime>t))return d(t,v(this._automationEvents,s-1,i.startTime,this._defaultValue),i);if(void 0!==i&&g(i)&&(void 0===n||!f(n)))return i.value;if(void 0!==i&&_(i)&&(void 0===n||!f(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?C(t,i):i.values[i.values.length-1];if(void 0!==i&&f(i)&&(void 0===n||!f(n)))return i.value;if(void 0!==n&&p(n)){var o=y(this._automationEvents,s,i,n,this._defaultValue),a=r.default(o,2),l=a[0],c=a[1];return T(t,l,c,n)}if(void 0!==n&&m(n)){var h=y(this._automationEvents,s,i,n,this._defaultValue),u=r.default(h,2),b=u[0],w=u[1];return E(t,b,w,n)}return this._defaultValue}}]),e}(Symbol.iterator);t.AutomationEventList=k,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=h,t.createSetValueCurveAutomationEvent=u,Object.defineProperty(t,"__esModule",{value:!0})}));const u=new WeakSet,d=new WeakMap,p=new WeakMap,m=new WeakMap,f=new WeakMap,g=new WeakMap,_=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,w={construct:()=>w},x=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,T=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(x);for(;null!==i;){const t=i[1].slice(1,-1),r=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(r),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(x)}return[n.join(";"),s]},E=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},C=t=>{if(!(t=>{try{new new Proxy(t,w)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},A=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},k=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[s]=n;return t.delete(s),s},S=(t,e,n,s)=>{const i=A(t,e),r=k(i,(t=>t[0]===n&&t[1]===s));return 0===i.size&&t.delete(e),r},M=t=>A(_,t),O=t=>{if(u.has(t))throw new Error("The AudioNode is already stored.");u.add(t),M(t).forEach((t=>t(!0)))},I=t=>"port"in t,L=t=>{if(!u.has(t))throw new Error("The AudioNode is not stored.");u.delete(t),M(t).forEach((t=>t(!1)))},D=(t,e)=>{!I(t)&&e.every((t=>0===t.size))&&L(t)},N={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},P=(t,e)=>t.context===e,B=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},R=()=>new DOMException("","IndexSizeError"),V=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw R();throw t}})},q={numberOfChannels:1},j=t=>u.has(t),F={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},W=t=>A(d,t),z=t=>A(m,t),H=(t,e)=>{const{activeInputs:n}=W(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||H(n,[...e,t])}))));const s=(t=>"playbackRate"in t)(t)?[t.playbackRate]:I(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const t of s){const n=z(t);void 0!==n&&n.activeInputs.forEach((([t])=>H(t,e)))}j(t)&&L(t)},U=t=>{H(t.destination,[])},Y=t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t),$=t=>"context"in t,X=t=>$(t[0]),G=(t,e,n,s)=>{for(const e of t)if(n(e)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Z=(t,e,[n,s],i)=>{G(t,[e,n,s],(t=>t[0]===e&&t[1]===n),i)},Q=(t,[e,n,s],i)=>{const r=t.get(e);void 0===r?t.set(e,new Set([[n,s]])):G(r,[n,s],(t=>t[0]===n),i)},K=t=>"inputs"in t,J=(t,e,n,s)=>{if(K(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},tt=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},et=(t,e)=>{if(!M(t).delete(e))throw new Error("Missing the expected event listener.")},nt=(t,e,n)=>{const s=A(t,e),i=k(s,(t=>t[0]===n));return 0===s.size&&t.delete(e),i},st=(t,e,n,s)=>{K(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},it=t=>A(p,t),rt=t=>A(f,t),ot=t=>v.has(t),at=t=>!u.has(t),lt=(t,e)=>new Promise((n=>{if(null!==e)n(!0);else{const e=t.createScriptProcessor(256,1,1),s=t.createGain(),i=t.createBuffer(1,2,44100),r=i.getChannelData(0);r[0]=1,r[1]=1;const o=t.createBufferSource();o.buffer=i,o.loop=!0,o.connect(e).connect(t.destination),o.connect(s),o.disconnect(s),e.onaudioprocess=s=>{const i=s.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}})),ct=(t,e)=>{const n=new Map;for(const e of t)for(const t of e){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},ht=t=>"context"in t,ut=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=z(e),{outputs:o}=W(t),a=M(t),l=o=>{const a=it(t),l=rt(e);if(o){const e=nt(r,t,n);Z(i,t,e,!1),s||ot(t)||a.connect(l,n)}else{const e=((t,e,n)=>k(t,(t=>t[0]===e&&t[1]===n)))(i,t,n);Q(r,e,!1),s||ot(t)||a.disconnect(l,n)}};return!!G(o,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(l),j(t)?Z(i,t,[n,l],!0):Q(r,[t,n,l],!0),!0)},dt=(t,e,n,s,i)=>{const[r,o]=((t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=W(e),o=tt(i[s],t,n);if(null===o)return[S(r,t,n,s)[2],!1];return[o[2],!0]})(t,n,s,i);if(null!==r&&(et(t,r),!o||e||ot(t)||st(it(t),it(n),s,i)),j(n)){const{activeInputs:t}=W(n);D(n,t)}},pt=(t,e,n,s)=>{const[i,r]=((t,e,n)=>{const{activeInputs:s,passiveInputs:i}=z(e),r=tt(s,t,n);if(null===r)return[nt(i,t,n)[1],!1];return[r[2],!0]})(t,n,s);null!==i&&(et(t,i),!r||e||ot(t)||it(t).disconnect(rt(n),s))};class mt{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,s)=>t.call(e,n,s,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const ft={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function gt(t,e,n,s,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const r=t.getChannelData(s);if(0===e[n].byteLength)e[n]=r.slice(i,i+128);else{const t=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const _t=(t,e,n,s,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],s,i):0!==e[n].byteLength&&t.getChannelData(s).set(e[n],i)},vt=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const t=[],i="number"==typeof e?e:e[s];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},yt=async(t,e,n,s,i,r,o)=>{const a=null===e?128*Math.ceil(t.context.length/128):e.length,l=s.channelCount*s.numberOfInputs,c=i.reduce(((t,e)=>t+e),0),h=0===c?null:n.createBuffer(c,a,n.sampleRate);if(void 0===r)throw new Error("Missing the processor constructor.");const u=W(t),d=await((t,e)=>{const n=A(b,t),s=it(e);return A(n,s)})(n,t),p=vt(s.numberOfInputs,s.channelCount),m=vt(s.numberOfOutputs,i),f=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let c=0;c<a;c+=128){if(s.numberOfInputs>0&&null!==e)for(let t=0;t<s.numberOfInputs;t+=1)for(let n=0;n<s.channelCount;n+=1)gt(e,p[t],n,n,c);void 0!==r.parameterDescriptors&&null!==e&&r.parameterDescriptors.forEach((({name:t},n)=>{gt(e,f,t,l+n,c)}));for(let t=0;t<s.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===m[t][e].byteLength&&(m[t][e]=new Float32Array(128));try{const t=p.map(((t,e)=>0===u.activeInputs[e].size?[]:t)),e=o(c/n.sampleRate,n.sampleRate,(()=>d.process(t,m,f)));if(null!==h)for(let t=0,e=0;t<s.numberOfOutputs;t+=1){for(let n=0;n<i[t];n+=1)_t(h,m[t],n,e+n,c);e+=i[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return h},bt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},wt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},xt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Tt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Et={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Ct=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((s=>{const i=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>i();try{e.postMessage(t,[t])}finally{i()}}))},At={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},kt=(t,e,n)=>{const s=e[n];if(void 0===s)throw t();return s},St={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Mt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ot=()=>new DOMException("","InvalidStateError"),It=()=>new DOMException("","InvalidAccessError"),Lt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Dt=(t,e,n,s,i,r,o,a,l,c,h)=>{const u=c.length;let d=a;for(let a=0;a<u;a+=1){let u=n[0]*c[a];for(let e=1;e<i;e+=1){const s=d-e&l-1;u+=n[e]*r[s],u-=t[e]*o[s]}for(let t=i;t<s;t+=1)u+=n[t]*r[d-t&l-1];for(let n=i;n<e;n+=1)u-=t[n]*o[d-n&l-1];r[d]=c[a],o[d]=u,d=d+1&l-1,h[a]=u}return d},Nt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Pt=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Bt={numberOfChannels:1},Rt=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n]&&(t[n]=s)},Vt=(t,e)=>{Rt(t,e,"channelCount"),Rt(t,e,"channelCountMode"),Rt(t,e,"channelInterpretation")},qt=t=>"function"==typeof t.getFloatTimeDomainData,jt=(t,e,n)=>{const s=e[n];void 0!==s&&s!==t[n].value&&(t[n].value=s)},Ft=t=>{var e;t.start=(e=t.start,(n=0,s=0,i)=>{if("number"==typeof i&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})},Wt=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},zt=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Ht=async(t,e)=>{const n=await(t=>new Promise(((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:t})=>{s.close(),i.close(),e(t)},s.onmessageerror=({data:t})=>{s.close(),i.close(),n(t)},i.postMessage(t)})))(e);return new t(n)},Ut=(t,e)=>{const n=t.createBiquadFilter();return Vt(n,e),jt(n,e,"Q"),jt(n,e,"detune"),jt(n,e,"frequency"),jt(n,e,"gain"),Rt(n,e,"type"),n},Yt=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Vt(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ot()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw Ot()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw Ot()}})})(n),n},$t=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Xt=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Vt(n,e),jt(n,e,"delayTime"),n},Gt=(t,e)=>{const n=t.createGain();return Vt(n,e),jt(n,e,"gain"),n};function Zt(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Qt(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)i=e,n=[(s=n)[0]*i[0]-s[1]*i[1],s[0]*i[1]+s[1]*i[0]],n[0]+=t[r];var s,i;return n}const Kt=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Jt=()=>new DOMException("","NotSupportedError"),te={numberOfChannels:1},ee={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ne={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},se={disableNormalization:!1},ie={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},re=()=>new DOMException("","UnknownError"),oe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ae=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),le=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},ce=(t,e,n,s)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:r,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:s(o)})},he=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(9!==s.code)throw s;he(t,e,n+1e-7)}},ue=t=>{const e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},de=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},pe=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},me=(t,e)=>{const n=e.createGain();t.connect(n);const s=(i=t.disconnect,()=>{i.call(t,n),t.removeEventListener("ended",s)});var i;t.addEventListener("ended",s),$t(t,n),t.stop=(e=>{let s=!1;return(i=0)=>{if(s)try{e.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else e.call(t,i),s=!0}})(t.stop)},fe=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},ge=(_e=G,(t,e,[n,s,i],r)=>{_e(t[s],[e,n,i],(t=>t[0]===e&&t[1]===n),r)});var _e;const ve=(t=>(e,n,[s,i,r],o)=>{const a=e.get(s);void 0===a?e.set(s,new Set([[i,n,r]])):t(a,[i,n,r],(t=>t[0]===i&&t[1]===n),o)})(G),ye=(be=k,(t,e,n,s)=>be(t[s],(t=>t[0]===e&&t[1]===n)));var be;const we=new WeakMap,xe=(Te=we,t=>{var e;return null!==(e=Te.get(t))&&void 0!==e?e:0});var Te;const Ee=(Ce=new Map,Ae=new WeakMap,(t,e)=>{const n=Ae.get(t);if(void 0!==n)return n;const s=Ce.get(t);if(void 0!==s)return s;try{const n=e();return n instanceof Promise?(Ce.set(t,n),n.catch((()=>!1)).then((e=>(Ce.delete(t),Ae.set(t,e),e)))):(Ae.set(t,n),n)}catch{return Ae.set(t,!1),!1}});var Ce,Ae;const ke="undefined"==typeof window?null:window,Se=(Me=Ee,Oe=R,(t,e)=>{const n=t.createAnalyser();if(Vt(n,e),!(e.maxDecibels>e.minDecibels))throw Oe();return Rt(n,e,"fftSize"),Rt(n,e,"maxDecibels"),Rt(n,e,"minDecibels"),Rt(n,e,"smoothingTimeConstant"),Me(qt,(()=>qt(n)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let t=0;t<s;t+=1)e[t]=.0078125*(n[t]-128);return e}})(n),n});var Me,Oe;const Ie=(Le=W,t=>{const e=Le(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer});var Le;const De=((t,e,n)=>async(s,i,r)=>{const o=t(s);await Promise.all(o.activeInputs.map(((t,o)=>Array.from(t).map((async([t,a])=>{const l=e(t),c=await l.render(t,i),h=s.context.destination;n(t)||s===h&&n(s)||c.connect(r,a,o)})))).reduce(((t,e)=>[...t,...e]),[]))})(W,Ie,ot),Ne=(Pe=Se,Be=it,Re=De,()=>{const t=new WeakMap;return{render(e,n){const s=t.get(n);return void 0!==s?Promise.resolve(s):(async(e,n)=>{let s=Be(e);if(!P(s,n)){const t={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,fftSize:s.fftSize,maxDecibels:s.maxDecibels,minDecibels:s.minDecibels,smoothingTimeConstant:s.smoothingTimeConstant};s=Pe(n,t)}return t.set(n,s),await Re(e,n,s),s})(e,n)}}});var Pe,Be,Re;const Ve=(qe=g,t=>{const e=qe.get(t);if(void 0===e)throw Ot();return e});var qe;const je=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(ke),Fe=(We=je,t=>null!==We&&t instanceof We);var We;const ze=new WeakMap,He=(Ue=fe,class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,e,n){if(null!==e){let s=this._listeners.get(e);void 0===s&&(s=Ue(this,e),"function"==typeof e&&this._listeners.set(e,s)),this._nativeEventTarget.addEventListener(t,s,n)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const s=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===s?null:s,n)}});var Ue;const Ye=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(ke),$e=(Xe=Ye,t=>null!==Xe&&t instanceof Xe);var Xe;const Ge=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(ke),Ze=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(ke),Qe=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(ke),Ke=((t,e,n,s,i,r,o,a,l,c,h,u,d,m,f,g)=>class extends c{constructor(e,s,i,r){super(i),this._context=e,this._nativeAudioNode=i;const o=h(e);u(o)&&!0!==n(lt,(()=>lt(o,g)))&&(t=>{const e=new Map;var n,s;t.connect=(n=t.connect.bind(t),(t,s=0,i=0)=>{const r=ht(t)?n(t,s,i):n(t,s),o=e.get(t);return void 0===o?e.set(t,[{input:i,output:s}]):o.every((t=>t.input!==i||t.output!==s))&&o.push({input:i,output:s}),r}),t.disconnect=(s=t.disconnect,(n,i,r)=>{if(s.apply(t),void 0===n)e.clear();else if("number"==typeof n)for(const[t,s]of e){const i=s.filter((t=>t.output!==n));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(n))if(void 0===i)e.delete(n);else{const t=e.get(n);if(void 0!==t){const s=t.filter((t=>t.output!==i&&(t.input!==r||void 0===r)));0===s.length?e.delete(n):e.set(n,s)}}for(const[n,s]of e)s.forEach((e=>{ht(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})})(i),p.set(this,i),_.set(this,new Set),"closed"!==e.state&&s&&O(this),t(this,r,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const c=h(this._context),u=f(c);if(d(t)||m(t))throw r();if($(t)){const i=it(t);try{const e=J(this._nativeAudioNode,i,n,a),s=at(this);(u||s)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!s&&at(t)&&O(t)}catch(t){if(12===t.code)throw r();throw t}if(e(this,t,n,a,u)){const e=l([this],t);ct(e,s(u))}return t}const p=rt(t);if("playbackRate"===p.name&&1024===p.maxValue)throw o();try{this._nativeAudioNode.connect(p,n),(u||at(this))&&this._nativeAudioNode.disconnect(p,n)}catch(t){if(12===t.code)throw r();throw t}if(ut(this,t,n,u)){const e=l([this],t);ct(e,s(u))}}disconnect(t,e,n){let s;const o=h(this._context),c=f(o);if(void 0===t)s=((t,e)=>{const n=W(t),s=[];for(const i of n.outputs)X(i)?dt(t,e,...i):pt(t,e,...i),s.push(i[0]);return n.outputs.clear(),s})(this,c);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();s=((t,e,n)=>{const s=W(t),i=[];for(const r of s.outputs)r[1]===n&&(X(r)?dt(t,e,...r):pt(t,e,...r),i.push(r[0]),s.outputs.delete(r));return i})(this,c,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if($(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(s=((t,e,n,s,i)=>{const r=W(t);return Array.from(r.outputs).filter((t=>!(t[0]!==n||void 0!==s&&t[1]!==s||void 0!==i&&t[2]!==i))).map((n=>(X(n)?dt(t,e,...n):pt(t,e,...n),r.outputs.delete(n),n[0])))})(this,c,t,e,n),0===s.length)throw r()}for(const t of s){const e=l([this],t);ct(e,a)}}})((Je=d,(t,e,n)=>{const s=[];for(let t=0;t<n.numberOfInputs;t+=1)s.push(new Set);Je.set(t,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,s,i,r,o,a,l,c,h,u,d)=>{const p=new WeakMap;return(m,f,g,_,v)=>{const{activeInputs:y,passiveInputs:b}=r(f),{outputs:w}=r(m),x=a(m),T=r=>{const a=l(f),c=l(m);if(r){const e=S(b,m,g,_);t(y,m,e,!1),v||u(m)||n(c,a,g,_),d(f)&&O(f)}else{const t=s(y,m,g,_);e(b,_,t,!1),v||u(m)||i(c,a,g,_);const n=o(f);if(0===n)h(f)&&D(f,y);else{const t=p.get(f);void 0!==t&&clearTimeout(t),p.set(f,setTimeout((()=>{h(f)&&D(f,y)}),1e3*n))}}};return!!c(w,[f,g,_],(t=>t[0]===f&&t[1]===g&&t[2]===_),!0)&&(x.add(T),h(m)?t(y,m,[g,_,T],!0):e(b,_,[m,g,T],!0),!0)}})(ge,ve,J,ye,st,W,xe,M,it,G,j,ot,at),Ee,((t,e,n,s,i,r)=>o=>(a,l)=>{const c=t.get(a);if(void 0===c){if(!o&&r(a)){const t=s(a),{outputs:r}=n(a);for(const n of r)if(X(n)){const i=s(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,l)}else t.set(a,c+l)})(v,st,W,it,rt,j),R,It,Jt,((t,e,n,s,i,r,o,a)=>(l,c)=>{const h=e.get(l);if(void 0===h)throw new Error("Missing the expected cycle count.");const u=r(l.context),d=a(u);if(h===c){if(e.delete(l),!d&&o(l)){const e=s(l),{outputs:r}=n(l);for(const n of r)if(X(n)){const i=s(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(l,h-c)})(J,v,W,it,rt,Ve,j,Fe),((t,e,n)=>function s(i,r){const o=$(r)?r:n(t,r);if((t=>"delayTime"in t)(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map((t=>s([...i,o],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(ze,W,A),He,Ve,$e,Ge,Ze,Fe,Qe);var Je;const tn=((t,e,n,s,i,r)=>class extends t{constructor(t,n){const o=i(t),a={...N,...n},l=s(o,a);super(t,!1,l,r(o)?e():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(Ke,Ne,R,Se,Ve,Fe),en=new WeakSet,nn=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(ke),sn=(rn=new Uint32Array(1),t=>(rn[0]=t,rn[0]));var rn;const on=((t,e)=>n=>{n.copyFromChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),h=s.length;for(let t=o<0?-o:0;t+o<l&&t<h;t+=1)s[t]=c[t+o]},n.copyToChannel=(s,i,r=0)=>{const o=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),h=s.length;for(let t=o<0?-o:0;t+o<l&&t<h;t+=1)c[t+o]=s[t]}})(sn,R),an=(ln=sn,t=>{var e,n;t.copyFromChannel=(e=t.copyFromChannel,(n,s,i=0)=>{const r=ln(i),o=ln(s);if(r<t.length)return e.call(t,n,o,r)}),t.copyToChannel=(n=t.copyToChannel,(e,s,i=0)=>{const r=ln(i),o=ln(s);if(r<t.length)return n.call(t,e,o,r)})});var ln;const cn=((t,e,n,s,i,r,o,a)=>{let l=null;return class c{constructor(c){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:u,sampleRate:d}={...q,...c};null===l&&(l=new i(1,1,44100));const p=null!==s&&e(r,r)?new s({length:h,numberOfChannels:u,sampleRate:d}):l.createBuffer(u,h,d);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(o(p),V(p)):e(B,(()=>B(p)))||a(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===c.prototype||t.has(e)}}})(en,Ee,Jt,nn,je,(hn=nn,()=>{if(null===hn)return!1;try{new hn({length:1,sampleRate:44100})}catch{return!1}return!0}),on,an);var hn;const un=(dn=Gt,(t,e)=>{const n=dn(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(n).connect(t.destination);const s=()=>{e.removeEventListener("ended",s),e.disconnect(n),n.disconnect()};e.addEventListener("ended",s)});var dn;const pn=(mn=Ie,fn=z,gn=ot,async(t,e,n)=>{const s=fn(t);await Promise.all(Array.from(s.activeInputs).map((async([t,s])=>{const i=mn(t),r=await i.render(t,e);gn(t)||r.connect(n,s)})))});var mn,fn,gn;const _n=(vn=pn,(t,e,n)=>vn(e,t,n));var vn;const yn=((t,e,n,s,i,r,o,a,l,c,h)=>(u,d)=>{const p=u.createBufferSource();return Vt(p,d),jt(p,d,"playbackRate"),Rt(p,d,"buffer"),Rt(p,d,"loop"),Rt(p,d,"loopEnd"),Rt(p,d,"loopStart"),e(n,(()=>n(u)))||(t=>{t.start=(e=>{let n=!1;return(s=0,i=0,r)=>{if(n)throw Ot();e.call(t,s,i,r),n=!0}})(t.start)})(p),e(s,(()=>s(u)))||l(p),e(i,(()=>i(u)))||c(p,u),e(r,(()=>r(u)))||Ft(p),e(o,(()=>o(u)))||h(p,u),e(a,(()=>a(u)))||Wt(p),t(u,p),p})(un,Ee,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0}),ue,de,pe,(t=>{var e;t.start=(e=t.start,(n=0,s=0,i)=>{const r=t.buffer,o=null===r?s:Math.min(r.duration,s);null!==r&&o>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})}),(bn=ce,(t,e)=>{const n=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=n),bn(t,"buffer",(e=>()=>{const s=e.call(t);return s===n?null:s}),(e=>s=>e.call(t,null===s?n:s)))}),me);var bn;const wn=((t,e)=>(n,s,i)=>(t(s).replay(i),e(s,n,i)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(z),pn),xn=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,c){const h=r.get(c);return void 0!==h?Promise.resolve(h):(async(l,c)=>{let h=n(l);const u=P(h,c);if(!u){const t={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(c,t),null!==o&&h.start(...o),null!==a&&h.stop(a)}return r.set(c,h),u?await t(c,l.playbackRate,h.playbackRate):await s(c,l.playbackRate,h.playbackRate),await i(l,c,h),h})(l,c)}}})(_n,yn,it,wn,De),Tn=((t,e,n,s,i,r,o,a,l,c,u,d,p)=>(m,f,g,_=null,v=null)=>{const y=new h.AutomationEventList(g.defaultValue),b=f?s(y):null,w={get defaultValue(){return g.defaultValue},get maxValue(){return null===_?g.maxValue:_},get minValue(){return null===v?g.minValue:v},get value(){return g.value},set value(t){g.value=t,w.setValueAtTime(t,m.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof g.cancelAndHoldAtTime)null===b&&y.flush(m.context.currentTime),y.add(i(t)),g.cancelAndHoldAtTime(t);else{const e=Array.from(y).pop();null===b&&y.flush(m.context.currentTime),y.add(i(t));const n=Array.from(y).pop();g.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?g.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?g.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?g.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&g.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues:t=>(null===b&&y.flush(m.context.currentTime),y.add(r(t)),g.cancelScheduledValues(t),w),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===b&&y.flush(m.context.currentTime),y.add(o(t,e)),g.exponentialRampToValueAtTime(t,e),w},linearRampToValueAtTime:(t,e)=>(null===b&&y.flush(m.context.currentTime),y.add(a(t,e)),g.linearRampToValueAtTime(t,e),w),setTargetAtTime:(t,e,n)=>(null===b&&y.flush(m.context.currentTime),y.add(l(t,e,n)),g.setTargetAtTime(t,e,n),w),setValueAtTime:(t,e)=>(null===b&&y.flush(m.context.currentTime),y.add(c(t,e)),g.setValueAtTime(t,e),w),setValueCurveAtTime(t,e,n){const s=t instanceof Float32Array?t:new Float32Array(t);if(null!==d&&"webkitAudioContext"===d.name){const t=e+n,i=m.context.sampleRate,r=Math.ceil(e*i),o=Math.floor(t*i),a=o-r,l=new Float32Array(a);for(let t=0;t<a;t+=1){const o=(s.length-1)/n*((r+t)/i-e),a=Math.floor(o),c=Math.ceil(o);l[t]=a===c?s[a]:(1-(o-a))*s[a]+(1-(c-o))*s[c]}null===b&&y.flush(m.context.currentTime),y.add(u(l,e,n)),g.setValueCurveAtTime(l,e,n);const c=o/i;c<t&&p(w,l[l.length-1],c),p(w,s[s.length-1],t)}else null===b&&y.flush(m.context.currentTime),y.add(u(s,e,n)),g.setValueCurveAtTime(s,e,n);return w}};return n.set(w,g),e.set(w,m),t(w,b),w})((En=m,(t,e)=>{En.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),ze,f,(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:s}=n;e.exponentialRampToValueAtTime(s,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:s}=n;e.linearRampToValueAtTime(s,t)}else if("setTarget"===n.type){const{startTime:t,target:s,timeConstant:i}=n;e.setTargetAtTime(s,t,i)}else if("setValue"===n.type){const{startTime:t,value:s}=n;e.setValueAtTime(s,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:s,values:i}=n;e.setValueCurveAtTime(i,s,t)}}}})),h.createCancelAndHoldAutomationEvent,h.createCancelScheduledValuesAutomationEvent,h.createExponentialRampToValueAutomationEvent,h.createLinearRampToValueAutomationEvent,h.createSetTargetAutomationEvent,h.createSetValueAutomationEvent,h.createSetValueCurveAutomationEvent,Ye,he);var En;const Cn=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,s){const a=r(t),l={...F,...s},c=i(a,l),h=o(a),u=h?e():null;super(t,!1,c,u),this._audioBufferSourceNodeRenderer=u,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,h,c.playbackRate,34028234663852886e22,-34028234663852886e22)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){O(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),j(this)&&L(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(Ke,xn,Tn,Ot,yn,Ve,Fe,fe),An=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,n){const s=r(t),l=o(s),c=i(s,n,l);super(t,!1,c,l?e(a):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Ke,(t=>{const e=new WeakMap;return{render(n,s){const i=e.get(s);return void 0!==i?Promise.resolve(i):(async(n,s)=>{const i=s.destination;return e.set(s,i),await t(n,s,i),i})(n,s)}}}),R,Ot,((t,e)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch{}i&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(o,"channelCount",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e);try{r.channelCount=e}catch(t){if(e>r.maxChannelCount)throw t}})),e(o,"channelCountMode",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelCountMode=e})),e(o,"channelInterpretation",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),r.channelInterpretation=e})),Object.defineProperty(o,"maxChannelCount",{get:()=>r.maxChannelCount}),o.connect(r),o})(Gt,ce),Ve,Fe,De),kn=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=P(l,a);if(!c){const t={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(a,t)}return r.set(a,l),c?(await t(a,o.Q,l.Q),await t(a,o.detune,l.detune),await t(a,o.frequency,l.frequency),await t(a,o.gain,l.gain)):(await s(a,o.Q,l.Q),await s(a,o.detune,l.detune),await s(a,o.frequency,l.frequency),await s(a,o.gain,l.gain)),await i(o,a,l),l})(o,a)}}})(_n,Ut,it,wn,De),Sn=(t=>(e,n)=>t.set(e,n))(we),Mn=(On=Ke,In=Tn,Ln=kn,Dn=It,Nn=Ut,Pn=Ve,Bn=Fe,Rn=Sn,class extends On{constructor(t,e){const n=Pn(t),s={...bt,...e},i=Nn(n,s),r=Bn(n);super(t,!1,i,r?Ln():null),this._Q=In(this,r,i.Q,34028234663852886e22,-34028234663852886e22),this._detune=In(this,r,i.detune,1200*Math.log2(34028234663852886e22),-1200*Math.log2(34028234663852886e22)),this._frequency=In(this,r,i.frequency,t.sampleRate/2,0),this._gain=In(this,r,i.gain,40*Math.log10(34028234663852886e22),-34028234663852886e22),this._nativeBiquadFilterNode=i,Rn(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw Dn();throw t}if(t.length!==e.length||e.length!==n.length)throw Dn()}});var On,In,Ln,Dn,Nn,Pn,Bn,Rn;const Vn=((t,e)=>(n,s,i)=>{const r=new Set;var o,a;return n.connect=(o=n.connect,(i,a=0,l=0)=>{const c=0===r.size;if(e(i))return o.call(n,i,a,l),t(r,[i,a,l],(t=>t[0]===i&&t[1]===a&&t[2]===l),!0),c&&s(),i;o.call(n,i,a),t(r,[i,a],(t=>t[0]===i&&t[1]===a),!0),c&&s()}),n.disconnect=(a=n.disconnect,(t,s,o)=>{const l=r.size>0;if(void 0===t)a.apply(n),r.clear();else if("number"==typeof t){a.call(n,t);for(const e of r)e[1]===t&&r.delete(e)}else{e(t)?a.call(n,t,s,o):a.call(n,t,s);for(const e of r)e[0]!==t||void 0!==s&&e[1]!==s||void 0!==o&&e[2]!==o||r.delete(e)}const c=0===r.size;l&&c&&i()}),n})(G,Ge),qn=(jn=Ot,Fn=Vn,(t,e)=>{e.channelCount=1,e.channelCountMode="explicit",Object.defineProperty(e,"channelCount",{get:()=>1,set:()=>{throw jn()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:()=>{throw jn()}});const n=t.createBufferSource();Fn(e,(()=>{const t=e.numberOfInputs;for(let s=0;s<t;s+=1)n.connect(e,0,s)}),(()=>n.disconnect(e)))});var jn,Fn;const Wn=((t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),Vt(i,s),i})(Ye,qn),zn=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!P(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(Wn,it,De),Hn=((t,e,n,s,i)=>class extends t{constructor(t,r){const o=s(t),a={...wt,...r};super(t,!1,n(o,a),i(o)?e():null)}})(Ke,zn,Wn,Ve,Fe),Un=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!P(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(r,e)}return s.set(r,o),await n(i,r,o),o})(i,r)}}})(Yt,it,De),Yn=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l=r({...xt,...o});super(t,!1,n(a,l),i(a)?e():null)}})(Ke,Un,Yt,Ve,Fe,(t=>({...t,channelCount:t.numberOfOutputs}))),$n=((t,e,n,s)=>(i,{offset:r,...o})=>{const a=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(i,{...o,gain:r}),h=a.getChannelData(0);h[0]=1,h[1]=1,l.buffer=a,l.loop=!0;const u={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(t){l.onended=t},addEventListener:(...t)=>l.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>l.dispatchEvent(t[0]),removeEventListener:(...t)=>l.removeEventListener(t[0],t[1],t[2]),start(t=0){l.start.call(l,t)},stop(t=0){l.stop.call(l,t)}};return t(i,l),s($t(u,c),(()=>l.connect(c)),(()=>l.disconnect(c)))})(un,yn,Gt,Vn),Xn=((t,e,n,s,i)=>(r,o)=>{if(void 0===r.createConstantSource)return n(r,o);const a=r.createConstantSource();return Vt(a,o),jt(a,o,"offset"),e(s,(()=>s(r)))||Ft(a),e(i,(()=>i(r)))||Wt(a),t(r,a),a})(un,Ee,$n,ue,pe),Gn=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(l,c){const h=r.get(c);return void 0!==h?Promise.resolve(h):(async(l,c)=>{let h=n(l);const u=P(h,c);if(!u){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(c,t),null!==o&&h.start(o),null!==a&&h.stop(a)}return r.set(c,h),u?await t(c,l.offset,h.offset):await s(c,l.offset,h.offset),await i(l,c,h),h})(l,c)}}})(_n,Xn,it,wn,De),Zn=((t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...Tt,...o},c=s(a,l),h=r(a),u=h?n():null;super(t,!1,c,u),this._constantSourceNodeRenderer=u,this._nativeConstantSourceNode=c,this._offset=e(this,h,c.offset,34028234663852886e22,-34028234663852886e22),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){O(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),j(this)&&L(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(Ke,Tn,Gn,Xn,Ve,Fe,fe),Qn=((t,e)=>(n,s)=>{const i=n.createConvolver();if(Vt(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),Rt(i,s,"buffer"),s.channelCount>2)throw t();if(e(i,"channelCount",(t=>()=>t.call(i)),(e=>n=>{if(n>2)throw t();return e.call(i,n)})),"max"===s.channelCountMode)throw t();return e(i,"channelCountMode",(t=>()=>t.call(i)),(e=>n=>{if("max"===n)throw t();return e.call(i,n)})),i})(Jt,ce),Kn=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!P(o,r)){const e={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(r,e)}return s.set(r,o),K(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})(Qn,it,De),Jn=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l={...Et,...o},c=n(a,l);super(t,!1,c,i(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==l.buffer&&r(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(Ke,Kn,Qn,Ve,Fe,Sn),ts=((t,e,n,s,i)=>r=>{const o=new WeakMap;return{render(a,l){const c=o.get(l);return void 0!==c?Promise.resolve(c):(async(a,l)=>{let c=n(a);const h=P(c,l);if(!h){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:r};c=e(l,t)}return o.set(l,c),h?await t(l,a.delayTime,c.delayTime):await s(l,a.delayTime,c.delayTime),await i(a,l,c),c})(a,l)}}})(_n,Xt,it,wn,De),es=((t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),c={...At,...a},h=s(l,c),u=r(l);super(t,!1,h,u?n(c.maxDelayTime):null),this._delayTime=e(this,u,h.delayTime),o(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(Ke,Tn,ts,Xt,Ve,Fe,Sn),ns=(ss=Jt,(t,e)=>{const n=t.createDynamicsCompressor();if(Vt(n,e),e.channelCount>2)throw ss();if("max"===e.channelCountMode)throw ss();return jt(n,e,"attack"),jt(n,e,"knee"),jt(n,e,"ratio"),jt(n,e,"release"),jt(n,e,"threshold"),n});var ss;const is=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=P(l,a);if(!c){const t={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(a,t)}return r.set(a,l),c?(await t(a,o.attack,l.attack),await t(a,o.knee,l.knee),await t(a,o.ratio,l.ratio),await t(a,o.release,l.release),await t(a,o.threshold,l.threshold)):(await s(a,o.attack,l.attack),await s(a,o.knee,l.knee),await s(a,o.ratio,l.ratio),await s(a,o.release,l.release),await s(a,o.threshold,l.threshold)),await i(o,a,l),l})(o,a)}}})(_n,ns,it,wn,De),rs=((t,e,n,s,i,r,o,a)=>class extends t{constructor(t,i){const l=r(t),c={...St,...i},h=s(l,c),u=o(l);super(t,!1,h,u?n():null),this._attack=e(this,u,h.attack),this._knee=e(this,u,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=e(this,u,h.ratio),this._release=e(this,u,h.release),this._threshold=e(this,u,h.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Ke,Tn,is,ns,Jt,Ve,Fe,Sn),os=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=P(l,a);if(!c){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(a,t)}return r.set(a,l),c?await t(a,o.gain,l.gain):await s(a,o.gain,l.gain),await i(o,a,l),l})(o,a)}}})(_n,Gt,it,wn,De),as=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...Mt,...o},c=s(a,l),h=r(a);super(t,!1,c,h?n():null),this._gain=e(this,h,c.gain,34028234663852886e22,-34028234663852886e22)}get gain(){return this._gain}})(Ke,Tn,os,Gt,Ve,Fe),ls=((t,e,n,s)=>(i,r,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:h})=>{const u=zt(r,i.sampleRate),d=c instanceof Float64Array?c:new Float64Array(c),p=h instanceof Float64Array?h:new Float64Array(h),m=d.length,f=p.length,g=Math.min(m,f);if(0===m||m>20)throw s();if(0===d[0])throw e();if(0===f||f>20)throw s();if(0===p[0])throw e();if(1!==d[0]){for(let t=0;t<f;t+=1)p[t]/=d[0];for(let t=1;t<m;t+=1)d[t]/=d[0]}const _=n(i,u,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=l;const v=[],y=[],b=[];for(let t=0;t<o;t+=1){v.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),y.push(t),b.push(e)}_.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,s=e.numberOfChannels;for(let t=0;t<s;t+=1){const s=e.getChannelData(t),i=n.getChannelData(t);v[t]=Dt(d,m,p,f,g,y[t],b[t],v[t],32,s,i)}};const w=i.sampleRate/2;return $t({get bufferSize(){return u},get channelCount(){return _.channelCount},set channelCount(t){_.channelCount=t},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){_.channelCountMode=t},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),getFrequencyResponse(e,n,s){if(e.length!==n.length||n.length!==s.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/w),r=[Math.cos(i),Math.sin(i)],o=Zt(Qt(p,r),Qt(d,r));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])},_)})(It,Ot,Kt,Jt),cs=((t,e,n,s)=>i=>t(Pt,(()=>Pt(i)))?Promise.resolve(t(s,s)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})))(Ee,Gt,Kt,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{s.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(Gt,je)),hs=((t,e,n,s,i)=>(r,o)=>{const a=new WeakMap;let l=null;const c=async(c,h)=>{let u=null,d=e(c);const p=P(d,h);if(void 0===h.createIIRFilter?u=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=h.createIIRFilter(o,r)),a.set(h,null===u?d:u),null!==u){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(c.context.destination.channelCount,c.context.length,h.sampleRate);l=(async()=>{await s(c,t,t.destination);return((t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),o=i.length,a=r.length,l=Math.min(o,a);if(1!==i[0]){for(let t=0;t<o;t+=1)r[t]/=i[0];for(let t=1;t<a;t+=1)i[t]/=i[0]}const c=new Float32Array(32),h=new Float32Array(32),u=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let e=0;e<d;e+=1){const n=t.getChannelData(e),s=u.getChannelData(e);c.fill(0),h.fill(0),Dt(i,o,r,a,l,c,h,0,32,n,s)}return u})(await i(t),h,r,o)})()}const t=await l;return u.buffer=t,u.start(0),u}return await s(c,h,d),d};return{render(t,e){const n=a.get(e);return void 0!==n?Promise.resolve(n):c(t,e)}}})(yn,it,je,De,cs);var us;const ds=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=s(t),l=i(a),c={...Lt,...o},h=e(a,l?null:t.baseLatency,c);super(t,!1,h,l?n(c.feedback,c.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw It();return e.call(t,n,s,i)})})(h),this._nativeIIRFilterNode=h,r(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(Ke,(us=ls,(t,e,n)=>{if(void 0===t.createIIRFilter)return us(t,e,n);const s=t.createIIRFilter(n.feedforward,n.feedback);return Vt(s,n),s}),hs,Ve,Fe,Sn),ps=((t,e,n,s,i,r,o,a)=>(l,c)=>{const h=c.listener,{forwardX:u,forwardY:d,forwardZ:p,positionX:m,positionY:f,positionZ:g,upX:_,upY:v,upZ:y}=void 0===h.forwardX?(()=>{const u=new Float32Array(1),d=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=o(c);let m=!1,f=[0,0,-1,0,1,0],g=[0,0,0];const _=()=>{if(m)return;m=!0;const t=s(c,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{const e=[r(t,u,0),r(t,u,1),r(t,u,2),r(t,u,3),r(t,u,4),r(t,u,5)];e.some(((t,e)=>t!==f[e]))&&(h.setOrientation(...e),f=e);const n=[r(t,u,6),r(t,u,7),r(t,u,8)];n.some(((t,e)=>t!==g[e]))&&(h.setPosition(...n),g=n)},d.connect(t)},v=t=>e=>{e!==f[t]&&(f[t]=e,h.setOrientation(...f))},y=t=>e=>{e!==g[t]&&(g[t]=e,h.setPosition(...g))},b=(e,s,r)=>{const o=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:s});o.connect(d,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>s});const h=t({context:l},p,o.offset,34028234663852886e22,-34028234663852886e22);var u,m,f,g,v,y,b;return a(h,"value",(t=>()=>t.call(h)),(t=>e=>{try{t.call(h,e)}catch(t){if(9!==t.code)throw t}_(),p&&r(e)})),h.cancelAndHoldAtTime=(u=h.cancelAndHoldAtTime,p?()=>{throw i()}:(...t)=>{const e=u.apply(h,t);return _(),e}),h.cancelScheduledValues=(m=h.cancelScheduledValues,p?()=>{throw i()}:(...t)=>{const e=m.apply(h,t);return _(),e}),h.exponentialRampToValueAtTime=(f=h.exponentialRampToValueAtTime,p?()=>{throw i()}:(...t)=>{const e=f.apply(h,t);return _(),e}),h.linearRampToValueAtTime=(g=h.linearRampToValueAtTime,p?()=>{throw i()}:(...t)=>{const e=g.apply(h,t);return _(),e}),h.setTargetAtTime=(v=h.setTargetAtTime,p?()=>{throw i()}:(...t)=>{const e=v.apply(h,t);return _(),e}),h.setValueAtTime=(y=h.setValueAtTime,p?()=>{throw i()}:(...t)=>{const e=y.apply(h,t);return _(),e}),h.setValueCurveAtTime=(b=h.setValueCurveAtTime,p?()=>{throw i()}:(...t)=>{const e=b.apply(h,t);return _(),e}),h};return{forwardX:b(0,0,v(0)),forwardY:b(1,0,v(1)),forwardZ:b(2,-1,v(2)),positionX:b(6,0,y(0)),positionY:b(7,0,y(1)),positionZ:b(8,0,y(2)),upX:b(3,0,v(3)),upY:b(4,1,v(4)),upZ:b(5,0,v(5))}})():h;return{get forwardX(){return u},get forwardY(){return d},get forwardZ(){return p},get positionX(){return m},get positionY(){return f},get positionZ(){return g},get upX(){return _},get upY(){return v},get upZ(){return y}}})(Tn,Wn,Xn,Kt,Jt,ae,Fe,ce),ms=new WeakMap,fs=((t,e,n,s,i,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,g.set(this,n),s(n)&&i.set(n,new Set),this._destination=new t(this,r),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?r(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(An,ps,He,Fe,ms,fe),gs=((t,e,n,s,i,r)=>(o,a)=>{const l=o.createOscillator();return Vt(l,a),jt(l,a,"detune"),jt(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):Rt(l,a,"type"),e(n,(()=>n(o)))||Ft(l),e(s,(()=>s(o)))||r(l,o),e(i,(()=>i(o)))||Wt(l),t(o,l),l})(un,Ee,ue,de,pe,me),_s=((t,e,n,s,i)=>()=>{const r=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(t){o=t},set start(t){a=t},set stop(t){l=t},render(c,h){const u=r.get(h);return void 0!==u?Promise.resolve(u):(async(c,h)=>{let u=n(c);const d=P(u,h);if(!d){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,periodicWave:null===o?void 0:o,type:u.type};u=e(h,t),null!==a&&u.start(a),null!==l&&u.stop(l)}return r.set(h,u),d?(await t(h,c.detune,u.detune),await t(h,c.frequency,u.frequency)):(await s(h,c.detune,u.detune),await s(h,c.frequency,u.frequency)),await i(c,h,u),u})(c,h)}}})(_n,gs,it,wn,De),vs=((t,e,n,s,i,r,o)=>class extends t{constructor(t,o){const a=i(t),l={...ee,...o},c=n(a,l),h=r(a),u=h?s():null,d=t.sampleRate/2;super(t,!1,c,u),this._detune=e(this,h,c.detune,153600,-153600),this._frequency=e(this,h,c.frequency,d,-d),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=u,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){O(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),j(this)&&L(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(Ke,Tn,gs,_s,Ve,Fe,fe),ys=(bs=yn,(t,e)=>{const n=bs(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=t.createBuffer(1,2,44100);return n.buffer=s,n.loop=!0,n.connect(e),n.start(),()=>{n.stop(),n.disconnect(e)}});var bs;const ws=((t,e,n,s,i)=>(r,{curve:o,oversample:a,...l})=>{const c=r.createWaveShaper(),h=r.createWaveShaper();Vt(c,l),Vt(h,l);const u=n(r,{...l,gain:1}),d=n(r,{...l,gain:-1}),p=n(r,{...l,gain:1}),m=n(r,{...l,gain:-1});let f=null,g=!1,_=null;const v={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){u.channelCount=t,d.channelCount=t,c.channelCount=t,p.channelCount=t,h.channelCount=t,m.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){u.channelCountMode=t,d.channelCountMode=t,c.channelCountMode=t,p.channelCountMode=t,h.channelCountMode=t,m.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){u.channelInterpretation=t,d.channelInterpretation=t,c.channelInterpretation=t,p.channelInterpretation=t,h.channelInterpretation=t,m.channelInterpretation=t},get context(){return c.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)c.curve=n,h.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),s=new Float32Array(t+2-t%2);e[0]=n[0],s[0]=-n[t-1];const i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let o=1;o<i;o+=1){const a=o/i*r,l=Math.floor(a),c=Math.ceil(a);e[o]=l===c?n[l]:(1-(a-l))*n[l]+(1-(c-a))*n[c],s[o]=l===c?-n[t-1-l]:-(1-(a-l))*n[t-1-l]-(1-(c-a))*n[t-1-c]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,c.curve=e,h.curve=s}_=n,g&&(s(_)&&null===f?f=t(r,u):null!==f&&(f(),f=null))},get inputs(){return[u]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(t){c.oversample=t,h.oversample=t},addEventListener:(...t)=>u.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>u.dispatchEvent(t[0]),removeEventListener:(...t)=>u.removeEventListener(t[0],t[1],t[2])};null!==o&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a);return i($t(v,p),(()=>{u.connect(c).connect(p),u.connect(d).connect(h).connect(m).connect(p),g=!0,s(_)&&(f=t(r,u))}),(()=>{u.disconnect(c),c.disconnect(p),u.disconnect(d),d.disconnect(h),h.disconnect(m),m.disconnect(p),g=!1,null!==f&&(f(),f=null)}))})(ys,Ot,Gt,le,Vn),xs=((t,e,n,s,i,r,o)=>(a,l)=>{const c=a.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===a.createGain().gain.automationRate)return n(a,l);Vt(c,l);const h=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==h&&h.length<2)throw e();Rt(c,{curve:h},"curve"),Rt(c,l,"oversample");let u=null,d=!1;o(c,"curve",(t=>()=>t.call(c)),(e=>n=>(e.call(c,n),d&&(s(n)&&null===u?u=t(a,c):s(n)||null===u||(u(),u=null)),n)));return i(c,(()=>{d=!0,s(c.curve)&&(u=t(a,c))}),(()=>{d=!1,null!==u&&(u(),u=null)}))})(ys,Ot,ws,le,Vn,Ye,ce),Ts=((t,e,n,s,i,r,o,a,l,c)=>(h,{coneInnerAngle:u,coneOuterAngle:d,coneOuterGain:p,distanceModel:m,maxDistance:f,orientationX:g,orientationY:_,orientationZ:v,panningModel:y,positionX:b,positionY:w,positionZ:x,refDistance:T,rolloffFactor:E,...C})=>{const A=h.createPanner();if(C.channelCount>2)throw o();if("max"===C.channelCountMode)throw o();Vt(A,C);const k={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},S=n(h,{...k,channelInterpretation:"speakers",numberOfInputs:6}),M=s(h,{...C,gain:1}),O=s(h,{...k,gain:1}),I=s(h,{...k,gain:0}),L=s(h,{...k,gain:0}),D=s(h,{...k,gain:0}),N=s(h,{...k,gain:0}),P=s(h,{...k,gain:0}),B=i(h,256,6,1),R=r(h,{...k,curve:new Float32Array([1,1]),oversample:"none"});let V=[g,_,v],q=[b,w,x];const j=new Float32Array(1);B.onaudioprocess=({inputBuffer:t})=>{const e=[l(t,j,0),l(t,j,1),l(t,j,2)];e.some(((t,e)=>t!==V[e]))&&(A.setOrientation(...e),V=e);const n=[l(t,j,3),l(t,j,4),l(t,j,5)];n.some(((t,e)=>t!==q[e]))&&(A.setPosition(...n),q=n)},Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0});const F={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(t){if(t>2)throw o();M.channelCount=t,A.channelCount=t},get channelCountMode(){return A.channelCountMode},set channelCountMode(t){if("max"===t)throw o();M.channelCountMode=t,A.channelCountMode=t},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(t){M.channelInterpretation=t,A.channelInterpretation=t},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(t){A.coneInnerAngle=t},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(t){A.coneOuterAngle=t},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();A.coneOuterGain=t},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(t){A.distanceModel=t},get inputs(){return[M]},get maxDistance(){return A.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;A.maxDistance=t},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return O.gain},get orientationY(){return I.gain},get orientationZ(){return L.gain},get panningModel(){return A.panningModel},set panningModel(t){A.panningModel=t},get positionX(){return D.gain},get positionY(){return N.gain},get positionZ(){return P.gain},get refDistance(){return A.refDistance},set refDistance(t){if(t<0)throw new RangeError;A.refDistance=t},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;A.rolloffFactor=t},addEventListener:(...t)=>M.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>M.dispatchEvent(t[0]),removeEventListener:(...t)=>M.removeEventListener(t[0],t[1],t[2])};u!==F.coneInnerAngle&&(F.coneInnerAngle=u),d!==F.coneOuterAngle&&(F.coneOuterAngle=d),p!==F.coneOuterGain&&(F.coneOuterGain=p),m!==F.distanceModel&&(F.distanceModel=m),f!==F.maxDistance&&(F.maxDistance=f),g!==F.orientationX.value&&(F.orientationX.value=g),_!==F.orientationY.value&&(F.orientationY.value=_),v!==F.orientationZ.value&&(F.orientationZ.value=v),y!==F.panningModel&&(F.panningModel=y),b!==F.positionX.value&&(F.positionX.value=b),w!==F.positionY.value&&(F.positionY.value=w),x!==F.positionZ.value&&(F.positionZ.value=x),T!==F.refDistance&&(F.refDistance=T),E!==F.rolloffFactor&&(F.rolloffFactor=E),1===V[0]&&0===V[1]&&0===V[2]||A.setOrientation(...V),0===q[0]&&0===q[1]&&0===q[2]||A.setPosition(...q);return c($t(F,A),(()=>{M.connect(A),t(M,R,0,0),R.connect(O).connect(S,0,0),R.connect(I).connect(S,0,1),R.connect(L).connect(S,0,2),R.connect(D).connect(S,0,3),R.connect(N).connect(S,0,4),R.connect(P).connect(S,0,5),S.connect(B).connect(h.destination)}),(()=>{M.disconnect(A),a(M,R,0,0),R.disconnect(O),O.disconnect(S),R.disconnect(I),I.disconnect(S),R.disconnect(L),L.disconnect(S),R.disconnect(D),D.disconnect(S),R.disconnect(N),N.disconnect(S),R.disconnect(P),P.disconnect(S),S.disconnect(B),B.disconnect(h.destination)}))})(J,Ot,Wn,Gt,Kt,xs,Jt,st,ae,Vn),Es=(Cs=Ts,(t,e)=>{const n=t.createPanner();return void 0===n.orientationX?Cs(t,e):(Vt(n,e),jt(n,e,"orientationX"),jt(n,e,"orientationY"),jt(n,e,"orientationZ"),jt(n,e,"positionX"),jt(n,e,"positionY"),jt(n,e,"positionZ"),Rt(n,e,"coneInnerAngle"),Rt(n,e,"coneOuterAngle"),Rt(n,e,"coneOuterGain"),Rt(n,e,"distanceModel"),Rt(n,e,"maxDistance"),Rt(n,e,"panningModel"),Rt(n,e,"refDistance"),Rt(n,e,"rolloffFactor"),n)});var Cs;const As=((t,e,n,s,i,r,o,a,l,c)=>()=>{const h=new WeakMap;let u=null;return{render(d,p){const m=h.get(p);return void 0!==m?Promise.resolve(m):(async(d,p)=>{let m=null,f=r(d);const g={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation},_={...g,coneInnerAngle:f.coneInnerAngle,coneOuterAngle:f.coneOuterAngle,coneOuterGain:f.coneOuterGain,distanceModel:f.distanceModel,maxDistance:f.maxDistance,panningModel:f.panningModel,refDistance:f.refDistance,rolloffFactor:f.rolloffFactor},v=P(f,p);if("bufferSize"in f)m=s(p,{...g,gain:1});else if(!v){const t={..._,orientationX:f.orientationX.value,orientationY:f.orientationY.value,orientationZ:f.orientationZ.value,positionX:f.positionX.value,positionY:f.positionY.value,positionZ:f.positionZ.value};f=i(p,t)}if(h.set(p,null===m?f:m),null!==m){if(null===u){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new o(6,d.context.length,p.sampleRate),s=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});s.connect(t.destination),u=(async()=>{const e=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map((async(e,s)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===s?1:0});return await a(t,e,i.offset),i})));for(let t=0;t<6;t+=1)e[t].connect(s,0,t),e[t].start(0);return c(t)})()}const t=await u,r=s(p,{...g,gain:1});await l(d,p,r);const h=[];for(let e=0;e<t.numberOfChannels;e+=1)h.push(t.getChannelData(e));let f=[h[0][0],h[1][0],h[2][0]],v=[h[3][0],h[4][0],h[5][0]],y=s(p,{...g,gain:1}),b=i(p,{..._,orientationX:f[0],orientationY:f[1],orientationZ:f[2],positionX:v[0],positionY:v[1],positionZ:v[2]});r.connect(y).connect(b.inputs[0]),b.connect(m);for(let e=128;e<t.length;e+=128){const t=[h[0][e],h[1][e],h[2][e]],n=[h[3][e],h[4][e],h[5][e]];if(t.some(((t,e)=>t!==f[e]))||n.some(((t,e)=>t!==v[e]))){f=t,v=n;const o=e/p.sampleRate;y.gain.setValueAtTime(0,o),y=s(p,{...g,gain:0}),b=i(p,{..._,orientationX:f[0],orientationY:f[1],orientationZ:f[2],positionX:v[0],positionY:v[1],positionZ:v[2]}),y.gain.setValueAtTime(1,o),r.connect(y).connect(b.inputs[0]),b.connect(m)}}return m}return v?(await t(p,d.orientationX,f.orientationX),await t(p,d.orientationY,f.orientationY),await t(p,d.orientationZ,f.orientationZ),await t(p,d.positionX,f.positionX),await t(p,d.positionY,f.positionY),await t(p,d.positionZ,f.positionZ)):(await a(p,d.orientationX,f.orientationX),await a(p,d.orientationY,f.orientationY),await a(p,d.orientationZ,f.orientationZ),await a(p,d.positionX,f.positionX),await a(p,d.positionY,f.positionY),await a(p,d.positionZ,f.positionZ)),K(f)?await l(d,p,f.inputs[0]):await l(d,p,f),f})(d,p)}}})(_n,Wn,Xn,Gt,Es,it,je,wn,De,cs),ks=((t,e,n,s,i,r,o)=>class extends t{constructor(t,a){const l=i(t),c={...ne,...a},h=n(l,c),u=r(l);super(t,!1,h,u?s():null),this._nativePannerNode=h,this._orientationX=e(this,u,h.orientationX,34028234663852886e22,-34028234663852886e22),this._orientationY=e(this,u,h.orientationY,34028234663852886e22,-34028234663852886e22),this._orientationZ=e(this,u,h.orientationZ,34028234663852886e22,-34028234663852886e22),this._positionX=e(this,u,h.positionX,34028234663852886e22,-34028234663852886e22),this._positionY=e(this,u,h.positionY,34028234663852886e22,-34028234663852886e22),this._positionZ=e(this,u,h.positionZ,34028234663852886e22,-34028234663852886e22),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(Ke,Tn,Es,As,Ve,Fe,Sn),Ss=(t=>(e,{disableNormalization:n,imag:s,real:i})=>{const r=s instanceof Float32Array?s:new Float32Array(s),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,r,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a})(R),Ms=((t,e,n,s)=>class i{constructor(i,r){const o=e(i),a=s({...se,...r}),l=t(o,a);return n.add(l),l}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===i.prototype||n.has(t)}})(Ss,Ve,new WeakSet,(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,(()=>0))}:{...t,imag:e,real:n}})),Os=((t,e,n,s,i,r)=>{const o=16385,a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h={...c,oversample:"none"},u=(t,r,u,d,p)=>{if(1===r)return((t,e,i,r)=>{const u=new Float32Array(o),d=new Float32Array(o);for(let t=0;t<o;t+=1){const e=t/16384*l;u[t]=Math.cos(e),d[t]=Math.sin(e)}const p=n(t,{...c,gain:0}),m=s(t,{...h,curve:u}),f=s(t,{...h,curve:a}),g=n(t,{...c,gain:0}),_=s(t,{...h,curve:d});return{connectGraph(){e.connect(p),e.connect(void 0===f.inputs?f:f.inputs[0]),e.connect(g),f.connect(i),i.connect(void 0===m.inputs?m:m.inputs[0]),i.connect(void 0===_.inputs?_:_.inputs[0]),m.connect(p.gain),_.connect(g.gain),p.connect(r,0,0),g.connect(r,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===f.inputs?f:f.inputs[0]),e.disconnect(g),f.disconnect(i),i.disconnect(void 0===m.inputs?m:m.inputs[0]),i.disconnect(void 0===_.inputs?_:_.inputs[0]),m.disconnect(p.gain),_.disconnect(g.gain),p.disconnect(r,0,0),g.disconnect(r,0,1)}}})(t,u,d,p);if(2===r)return((t,i,r,u)=>{const d=new Float32Array(o),p=new Float32Array(o),m=new Float32Array(o),f=new Float32Array(o),g=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>g){const e=(t-g)/(16384-g)*l;d[t]=Math.cos(e),p[t]=Math.sin(e),m[t]=0,f[t]=1}else{const e=t/(16384-g)*l;d[t]=1,p[t]=0,m[t]=Math.cos(e),f[t]=Math.sin(e)}const _=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),v=n(t,{...c,gain:0}),y=s(t,{...h,curve:d}),b=n(t,{...c,gain:0}),w=s(t,{...h,curve:p}),x=s(t,{...h,curve:a}),T=n(t,{...c,gain:0}),E=s(t,{...h,curve:m}),C=n(t,{...c,gain:0}),A=s(t,{...h,curve:f});return{connectGraph(){i.connect(_),i.connect(void 0===x.inputs?x:x.inputs[0]),_.connect(v,0),_.connect(b,0),_.connect(T,1),_.connect(C,1),x.connect(r),r.connect(void 0===y.inputs?y:y.inputs[0]),r.connect(void 0===w.inputs?w:w.inputs[0]),r.connect(void 0===E.inputs?E:E.inputs[0]),r.connect(void 0===A.inputs?A:A.inputs[0]),y.connect(v.gain),w.connect(b.gain),E.connect(T.gain),A.connect(C.gain),v.connect(u,0,0),T.connect(u,0,0),b.connect(u,0,1),C.connect(u,0,1)},disconnectGraph(){i.disconnect(_),i.disconnect(void 0===x.inputs?x:x.inputs[0]),_.disconnect(v,0),_.disconnect(b,0),_.disconnect(T,1),_.disconnect(C,1),x.disconnect(r),r.disconnect(void 0===y.inputs?y:y.inputs[0]),r.disconnect(void 0===w.inputs?w:w.inputs[0]),r.disconnect(void 0===E.inputs?E:E.inputs[0]),r.disconnect(void 0===A.inputs?A:A.inputs[0]),y.disconnect(v.gain),w.disconnect(b.gain),E.disconnect(T.gain),A.disconnect(C.gain),v.disconnect(u,0,0),T.disconnect(u,0,0),b.disconnect(u,0,1),C.disconnect(u,0,1)}}})(t,u,d,p);throw i()};return(e,{channelCount:s,channelCountMode:o,pan:a,...l})=>{if("max"===o)throw i();const c=t(e,{...l,channelCount:1,channelCountMode:o,numberOfInputs:2}),h=n(e,{...l,channelCount:s,channelCountMode:o,gain:1}),d=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:p,disconnectGraph:m}=u(e,s,h,d,c);Object.defineProperty(d.gain,"defaultValue",{get:()=>0}),Object.defineProperty(d.gain,"maxValue",{get:()=>1}),Object.defineProperty(d.gain,"minValue",{get:()=>-1});const f={get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(t){h.channelCount!==t&&(g&&m(),({connectGraph:p,disconnectGraph:m}=u(e,t,h,d,c)),g&&p()),h.channelCount=t},get channelCountMode(){return h.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();h.channelCountMode=t},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get pan(){return d.gain},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};let g=!1;return r($t(f,c),(()=>{p(),g=!0}),(()=>{m(),g=!1}))}})(Wn,Yt,Gt,xs,Jt,Vn),Is=((t,e)=>(n,s)=>{const i=s.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,s);const r=n.createStereoPanner();return Vt(r,s),jt(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),r})(Os,Jt),Ls=((t,e,n,s,i)=>()=>{const r=new WeakMap;return{render(o,a){const l=r.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=P(l,a);if(!c){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(a,t)}return r.set(a,l),c?await t(a,o.pan,l.pan):await s(a,o.pan,l.pan),K(l)?await i(o,a,l.inputs[0]):await i(o,a,l),l})(o,a)}}})(_n,Is,it,wn,De),Ds=((t,e,n,s,i,r)=>class extends t{constructor(t,o){const a=i(t),l={...ie,...o},c=n(a,l),h=r(a);super(t,!1,c,h?s():null),this._pan=e(this,h,c.pan)}get pan(){return this._pan}})(Ke,Tn,Is,Ls,Ve,Fe),Ns=((t,e,n)=>()=>{const s=new WeakMap;return{render(i,r){const o=s.get(r);return void 0!==o?Promise.resolve(o):(async(i,r)=>{let o=e(i);if(!P(o,r)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(r,e)}return s.set(r,o),K(o)?await n(i,r,o.inputs[0]):await n(i,r,o),o})(i,r)}}})(xs,it,De),Ps=((t,e,n,s,i,r,o)=>class extends t{constructor(t,e){const a=i(t),l={...oe,...e},c=n(a,l);super(t,!0,c,r(a)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(Ke,Ot,xs,Ns,Ve,Fe,Sn),Bs=(t=>null!==t&&t.isSecureContext)(ke),Rs=(t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(ke),Vs=new WeakMap,qs=((t,e)=>n=>{let s=t.get(n);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s})(Vs,je),js=Bs?((t,e,n,s,i,r,o,a,l,c,h,u,d)=>{let p=0;return(m,f,g={credentials:"omit"})=>{const _=h.get(m);if(void 0!==_&&_.has(f))return Promise.resolve();const v=c.get(m);if(void 0!==v){const t=v.get(f);if(void 0!==t)return t}const b=r(m),w=void 0===b.audioWorklet?i(f).then((([t,e])=>{const[s,i]=T(t,e);return n(`${s};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${i}\n})})(window,'_AWGS')`)})).then((()=>{const t=d._AWGS.pop();if(void 0===t)throw new SyntaxError;s(b.currentTime,b.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const s=y.get(b);if(void 0!==s){if(s.has(t))throw e();C(n),E(n.parameterDescriptors),s.set(t,n)}else C(n),E(n.parameterDescriptors),y.set(b,new Map([[t,n]]))}),b.sampleRate,void 0,void 0)))})):Promise.all([i(f),Promise.resolve(t(u,u))]).then((([[t,e],n])=>{const s=p+1;p=s;const[i,r]=T(t,e),c=new Blob([`${i};((AudioWorkletProcessor,registerProcessor)=>{${r}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${s}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(c);return b.audioWorklet.addModule(h,g).then((()=>{if(a(b))return b;const t=o(b);return t.audioWorklet.addModule(h,g).then((()=>t))})).then((t=>{if(null===l)throw new SyntaxError;try{new l(t,`__sac${s}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(h)))}));return void 0===v?c.set(m,new Map([[f,w]])):v.set(f,w),w.then((()=>{const t=h.get(m);void 0===t?h.set(m,new Set([f])):t.add(f)})).finally((()=>{const t=c.get(m);void 0!==t&&t.delete(f)})),w}})(Ee,Jt,(t=>e=>new Promise(((n,s)=>{if(null===t)return void s(new SyntaxError);const i=t.document.head;if(null===i)s(new SyntaxError);else{const r=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(e,n,i,r,o)=>n===a||n===t.location.href&&1===i&&1===r?(c(),s(o),!1):null!==l?l(e,n,i,r,o):void 0,r.onerror=()=>{c(),s(new SyntaxError)},r.onload=()=>{c(),n()},r.src=a,r.type="module",i.appendChild(r)}})))(ke),Rs,(Fs=()=>new DOMException("","AbortError"),async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw Fs()}),Ve,qs,Fe,Qe,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let r=!1,o=!1;try{await s.audioWorklet.addModule(i);const e=new t(s,"a",{numberOfOutputs:0}),n=s.createOscillator();e.port.onmessage=()=>r=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await s.startRendering()}catch{}finally{URL.revokeObjectURL(i)}return r&&!o})(Qe,je),ke):void 0;var Fs;const Ws=((t,e)=>n=>t(n)||e(n))($e,Fe),zs=((t,e,n,s,i,r,o,a,l,c,h)=>(u,d)=>{const p=o(u)?u:r(u);if(i.has(d)){const t=n();return Promise.reject(t)}try{i.add(d)}catch{}return e(l,(()=>l(p)))?p.decodeAudioData(d).then((n=>(Ct(d).catch((()=>{})),e(a,(()=>a(n)))||h(n),t.add(n),n))):new Promise(((e,n)=>{const i=async()=>{try{await Ct(d)}catch{}},r=t=>{n(t),i()};try{p.decodeAudioData(d,(n=>{"function"!=typeof n.copyFromChannel&&(c(n),V(n)),t.add(n),i().then((()=>e(n)))}),(t=>{r(null===t?s():t)}))}catch(t){r(t)}}))})(en,Ee,(()=>new DOMException("","DataCloneError")),(()=>new DOMException("","EncodingError")),new WeakSet,Ve,Ws,B,Pt,on,an),Hs=(Us=js,Ys=tn,$s=cn,Xs=Cn,Gs=Mn,Zs=Hn,Qs=Yn,Ks=Zn,Js=Jn,ti=zs,ei=es,ni=rs,si=as,ii=ds,ri=fs,oi=vs,ai=ks,li=Ms,ci=Ds,hi=Ps,class extends ri{constructor(t,e){super(t,e),this._nativeContext=t,this._audioWorklet=void 0===Us?void 0:{addModule:(t,e)=>Us(this,t,e)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new Ys(this)}createBiquadFilter(){return new Gs(this)}createBuffer(t,e,n){return new $s({length:e,numberOfChannels:t,sampleRate:n})}createBufferSource(){return new Xs(this)}createChannelMerger(t=6){return new Zs(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new Qs(this,{numberOfOutputs:t})}createConstantSource(){return new Ks(this)}createConvolver(){return new Js(this)}createDelay(t=1){return new ei(this,{maxDelayTime:t})}createDynamicsCompressor(){return new ni(this)}createGain(){return new si(this)}createIIRFilter(t,e){return new ii(this,{feedback:e,feedforward:t})}createOscillator(){return new oi(this)}createPanner(){return new ai(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new li(this,{...n,imag:e,real:t})}createStereoPanner(){return new ci(this)}createWaveShaper(){return new hi(this)}decodeAudioData(t,e,n){return ti(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t)),(t=>{throw"function"==typeof n&&n(t),t}))}});var Us,Ys,$s,Xs,Gs,Zs,Qs,Ks,Js,ti,ei,ni,si,ii,ri,oi,ai,li,ci,hi;const ui=((t,e,n,s)=>class extends t{constructor(t,i){const r=n(t),o=e(r,i);if(s(r))throw TypeError();super(t,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Ke,((t,e)=>t.createMediaElementSource(e.mediaElement)),Ve,Fe),di=((t,e,n,s)=>class extends t{constructor(t,i){const r=n(t);if(s(r))throw new TypeError;const o={...Nt,...i},a=e(r,o);super(t,!1,a,null),this._nativeMediaStreamAudioDestinationNode=a}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Ke,((t,e)=>{const n=t.createMediaStreamDestination();return Vt(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n}),Ve,Fe),pi=((t,e,n,s)=>class extends t{constructor(t,i){const r=n(t),o=e(r,i);if(s(r))throw new TypeError;super(t,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Ke,((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i}),Ve,Fe),mi=((t,e)=>(n,{mediaStreamTrack:s})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),r=n.createMediaStreamSource(i);if("audio"!==s.kind)throw t();if(e(n))throw new TypeError;return r})(Ot,Fe),fi=((t,e,n)=>class extends t{constructor(t,s){const i=n(t);super(t,!0,e(i,s),null)}})(Ke,mi,Ve),gi=((t,e,n,s,i,r,o,a,l)=>class extends t{constructor(t={}){if(null===l)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new l(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw s();if(!Y(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:r}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/r:"interactive"===i||void 0===i?256/r:"playback"===i?1024/r:128*Math.max(2,Math.min(128,Math.round(i*r/128)))/r,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),U(this)})))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(Hs,Ot,Jt,re,ui,di,pi,fi,Ye),_i=(vi=ms,t=>{const e=vi.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e});var vi;const yi=(bi=_i,(t,e)=>{bi(t).add(e)});var bi;const wi=(t=>(e,n,s=0,i=0)=>{const r=e[s];if(void 0===r)throw t();return ht(n)?r.connect(n,0,i):r.connect(n,0)})(R),xi=(t=>(e,n)=>{t(e).delete(n)})(_i),Ti=(t=>(e,n,s,i=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?kt(t,e,n).disconnect():ht(n)?void 0===s?e.forEach((t=>t.disconnect(n))):void 0===i?kt(t,e,s).disconnect(n,0):kt(t,e,s).disconnect(n,0,i):void 0===s?e.forEach((t=>t.disconnect(n))):kt(t,e,s).disconnect(n,0))(R),Ei=new WeakMap,Ci=(Ai=Ei,ki=A,t=>ki(Ai,t));var Ai,ki;const Si=((t,e,n,s,i,r,o,a,l,c,h,u,d)=>(p,m,f,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw l();const _=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(_.some((t=>t<1)))throw l();if(_.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw l();const v=g.channelCount*g.numberOfInputs,y=_.reduce(((t,e)=>t+e),0),w=void 0===f.parameterDescriptors?0:f.parameterDescriptors.length;if(v+w>6||y>6)throw l();const x=new MessageChannel,T=[],E=[];for(let t=0;t<g.numberOfInputs;t+=1)T.push(o(p,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),E.push(i(p,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const C=[];if(void 0!==f.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:s}of f.parameterDescriptors){const i=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[s]?g.parameterData[s]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?34028234663852886e22:e},minValue:{get:()=>void 0===n?-34028234663852886e22:n}}),C.push(i)}const A=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+w)}),k=zt(m,p.sampleRate),S=a(p,k,v+w,Math.max(1,y)),M=i(p,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),O=[];for(let t=0;t<g.numberOfOutputs;t+=1)O.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_[t]}));for(let t=0;t<g.numberOfInputs;t+=1){T[t].connect(E[t]);for(let e=0;e<g.channelCount;e+=1)E[t].connect(A,e,t*g.channelCount+e)}const I=new mt(void 0===f.parameterDescriptors?[]:f.parameterDescriptors.map((({name:t},e)=>{const n=C[e];return n.connect(A,0,v+e),n.start(0),[t,n.offset]})));A.connect(S);let L=g.channelInterpretation,D=null;const N=0===g.numberOfOutputs?[S]:O,P={get bufferSize(){return k},get channelCount(){return g.channelCount},set channelCount(t){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return L},set channelInterpretation(t){for(const e of T)e.channelInterpretation=t;L=t},get context(){return S.context},get inputs(){return T},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return D},set onprocessorerror(t){"function"==typeof D&&P.removeEventListener("processorerror",D),D="function"==typeof t?t:null,"function"==typeof D&&P.addEventListener("processorerror",D)},get parameters(){return I},get port(){return x.port2},addEventListener:(...t)=>S.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,N),disconnect:c.bind(null,N),dispatchEvent:(...t)=>S.dispatchEvent(t[0]),removeEventListener:(...t)=>S.removeEventListener(t[0],t[1],t[2])},B=new Map;var R,V;x.port1.addEventListener=(R=x.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=B.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{h(p.currentTime,p.sampleRate,(()=>e(t)))},B.set(e,t[1]))}}return R.call(x.port1,t[0],t[1],t[2])}),x.port1.removeEventListener=(V=x.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=B.get(t[1]);void 0!==e&&(B.delete(t[1]),t[1]=e)}return V.call(x.port1,t[0],t[1],t[2])});let q=null;Object.defineProperty(x.port1,"onmessage",{get:()=>q,set:t=>{"function"==typeof q&&x.port1.removeEventListener("message",q),q="function"==typeof t?t:null,"function"==typeof q&&(x.port1.addEventListener("message",q),x.port1.start())}}),f.prototype.port=x.port1;let j=null;const F=((t,e,n,s)=>{let i=b.get(t);void 0===i&&(i=new WeakMap,b.set(t,i));const r=Ht(n,s);return i.set(e,r),r})(p,P,f,g);F.then((t=>j=t));const W=vt(g.numberOfInputs,g.channelCount),z=vt(g.numberOfOutputs,_),H=void 0===f.parameterDescriptors?[]:f.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let U=!0;const Y=()=>{g.numberOfOutputs>0&&S.disconnect(M);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=O[t];for(let s=0;s<_[t];s+=1)M.disconnect(n,e+s,s);e+=_[t]}},$=new Map;S.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==j){const n=u(P);for(let s=0;s<k;s+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)gt(t,W[e],n,n,s);void 0!==f.parameterDescriptors&&f.parameterDescriptors.forEach((({name:e},n)=>{gt(t,H,e,v+n,s)}));for(let t=0;t<g.numberOfInputs;t+=1)for(let e=0;e<_[t];e+=1)0===z[t][e].byteLength&&(z[t][e]=new Float32Array(128));try{const t=W.map(((t,e)=>{if(n[e].size>0)return $.set(e,k/128),t;const s=$.get(e);return void 0===s?[]:(t.every((t=>t.every((t=>0===t))))&&(1===s?$.delete(e):$.set(e,s-1)),t)})),i=h(p.currentTime+s/p.sampleRate,p.sampleRate,(()=>j.process(t,z,H)));U=i;for(let t=0,n=0;t<g.numberOfOutputs;t+=1){for(let i=0;i<_[t];i+=1)_t(e,z[t],i,n+i,s);n+=_[t]}}catch(t){U=!1,P.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!U){for(let t=0;t<g.numberOfInputs;t+=1){T[t].disconnect(E[t]);for(let e=0;e<g.channelCount;e+=1)E[s].disconnect(A,e,t*g.channelCount+e)}if(void 0!==f.parameterDescriptors){const t=f.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=C[e];t.disconnect(A,0,v+e),t.stop()}}A.disconnect(S),S.onaudioprocess=null,X?Y():Q();break}}}};let X=!1;const G=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Z=()=>S.connect(G).connect(p.destination),Q=()=>{S.disconnect(G),G.disconnect()};return Z(),d(P,(()=>{if(U){Q(),g.numberOfOutputs>0&&S.connect(M);for(let t=0,e=0;t<g.numberOfOutputs;t+=1){const n=O[t];for(let s=0;s<_[t];s+=1)M.connect(n,e+s,s);e+=_[t]}}X=!0}),(()=>{U&&(Z(),Y()),X=!1}))})(wi,R,Ot,Wn,Yt,Xn,Gt,Kt,Jt,Ti,Rs,Ci,Vn),Mi=((t,e,n,s,i)=>(r,o,a,l,c,h)=>{if(null!==a)try{const e=new a(r,l,h),s=new Map;let o=null;if(Object.defineProperties(e,{channelCount:{get:()=>h.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(d=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=s.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],{...n}))},s.set(e,t[1]))}}return d.call(e,"error",t[1],t[2]),d.call(e,...t)}),e.removeEventListener=(u=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=s.get(t[1]);void 0!==e&&(s.delete(t[1]),t[1]=e)}return u.call(e,"error",t[1],t[2]),u.call(e,t[0],t[1],t[2])}),0!==h.numberOfOutputs){const t=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(t).connect(r.destination);return i(e,(()=>t.disconnect()),(()=>t.connect(r.destination)))}return e}catch(t){if(11===t.code)throw s();throw t}var u,d;if(void 0===c)throw s();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(h),e(r,o,c,h)})(Ot,Si,Gt,Jt,Vn),Oi=((t,e,n,s,i,r,o,a,l,c,h,u,d,p,m,f)=>(g,_,v)=>{const y=new WeakMap;let b=null;return{render(w,x){a(x,w);const T=y.get(x);return void 0!==T?Promise.resolve(T):(async(a,w)=>{let x=h(a),T=null;const E=P(x,w),C=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(null===u){const t=C.reduce(((t,e)=>t+e),0),n=i(w,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),r=[];for(let t=0;t<a.numberOfOutputs;t+=1)r.push(s(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[t]}));const c=o(w,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});c.connect=e.bind(null,r),c.disconnect=l.bind(null,r),T=[n,r,c]}else E||(x=new u(w,g));if(y.set(w,null===T?x:T[2]),null!==T){if(null===b){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=t+e,l=async()=>{const l=new d(n,128*Math.ceil(a.context.length/128),w.sampleRate),c=[],h=[];for(let t=0;t<_.numberOfInputs;t+=1)c.push(o(l,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),h.push(i(l,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const u=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await p(l,t,e.offset),e}))),g=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<_.numberOfInputs;t+=1){c[t].connect(h[t]);for(let e=0;e<_.channelCount;e+=1)h[t].connect(g,e,t*_.channelCount+e)}for(const[e,n]of u.entries())n.connect(g,0,t+e),n.start(0);return g.connect(l.destination),await Promise.all(c.map((t=>m(a,l,t)))),f(l)};b=yt(a,0===n?null:await l(),w,_,C,v,c)}const t=await b,e=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,h,u]=T;null!==t&&(e.buffer=t,e.start(0)),e.connect(l);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){const n=h[t];for(let s=0;s<C[t];s+=1)l.connect(n,e+s,s);e+=C[t]}return u}if(E)for(const[e,n]of a.parameters.entries())await t(w,n,x.parameters.get(e));else for(const[t,e]of a.parameters.entries())await p(w,e,x.parameters.get(t));return await m(a,w,x),x})(w,x)}}})(_n,wi,yn,Wn,Yt,Xn,Gt,xi,Ti,Rs,it,Qe,je,wn,De,cs),Ii=(Li=Vs,t=>Li.get(t));var Li;const Di=(t=>(e,n)=>{t.set(e,n)})(Ei),Ni=Bs?((t,e,n,s,i,r,o,a,l,c,h,u,d,p)=>class extends e{constructor(e,p,m){var f;const g=a(e),_=l(g),v=h({...ft,...m});d(v);const b=y.get(g),w=null==b?void 0:b.get(p),x=_||"closed"!==g.state?g:null!==(f=o(g))&&void 0!==f?f:g,T=i(x,_?null:e.baseLatency,c,p,w,v);super(e,!0,T,_?s(p,v,w):null);const E=[];T.parameters.forEach(((t,e)=>{const s=n(this,_,t);E.push([e,s])})),this._nativeAudioWorkletNode=T,this._onprocessorerror=null,this._parameters=new mt(E),_&&t(g,this);const{activeInputs:C}=r(this);u(T,C)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(yi,Ke,Tn,Oi,Mi,W,Ii,Ve,Fe,Qe,(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))})),Di,(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}}),fe):void 0,Pi=(((t,e,n,s,i)=>{})(Ot,Jt,re,fs,Ye),((t,e)=>(n,s,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(Jt,je)),Bi=((t,e,n,s,i,r,o,a)=>(l,c)=>n(l).render(l,c).then((()=>Promise.all(Array.from(s(c)).map((t=>n(t).render(t,c)))))).then((()=>i(c))).then((n=>("function"!=typeof n.copyFromChannel?(o(n),V(n)):e(r,(()=>r(n)))||a(n),t.add(n),n))))(en,Ee,Ie,_i,cs,B,on,an),Ri=(((t,e,n,s,i)=>{})(Ee,Ot,Pi,fs,Bi),((t,e,n,s,i)=>class extends t{constructor(t,n,i){let r;if("number"==typeof t&&void 0!==n&&void 0!==i)r={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");r=t}const{length:o,numberOfChannels:a,sampleRate:l}={...te,...r},c=s(a,o,l);e(Pt,(()=>Pt(c)))||c.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(c.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(c,a),this._length=o,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,U(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(Hs,Ee,Ot,Pi,Bi)),Vi=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(g,$e),qi=(ji=p,Fi=Ge,t=>ji.has(t)||Fi(t));var ji,Fi;const Wi=(zi=f,Hi=Ze,t=>zi.has(t)||Hi(t));var zi,Hi;const Ui=((t,e)=>n=>{const s=t.get(n);return e(s)||e(n)})(g,Fe);function Yi(t,e){if(!t)throw new Error(e)}function $i(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Xi(t){t.isOffline||"running"===t.state||Zi('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Gi=console;function Zi(...t){Gi.warn(...t)}function Qi(t){return void 0===t}function Ki(t){return!Qi(t)}function Ji(t){return"number"==typeof t}function tr(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function er(t){return"boolean"==typeof t}function nr(t){return Array.isArray(t)}function sr(t){return"string"==typeof t}function ir(t){return sr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}const rr="object"==typeof self?self:null,or=rr&&(rr.hasOwnProperty("AudioContext")||rr.hasOwnProperty("webkitAudioContext"));function ar(t,e,n,s){var i,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,n,o):i(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}function lr(t,e,n,s){return new(n||(n=Promise))((function(i,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))}Object.create;Object.create;class cr{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function hr(t){return Wi(t)}function ur(t){return qi(t)}function dr(t){return Ui(t)}function pr(t){return Vi(t)}function mr(t){return t instanceof AudioBuffer}function fr(t,e){return"value"===t||hr(e)||ur(e)||mr(e)}function gr(t,...e){if(!e.length)return t;const n=e.shift();if(tr(t)&&tr(n))for(const e in n)fr(e,n[e])?t[e]=n[e]:tr(n[e])?(t[e]||Object.assign(t,{[e]:{}}),gr(t[e],n[e])):Object.assign(t,{[e]:n[e]});return gr(t,...e)}function _r(t,e,n=[],s){const i={},r=Array.from(e);if(tr(r[0])&&s&&!Reflect.has(r[0],s)){Object.keys(r[0]).some((e=>Reflect.has(t,e)))||(gr(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())}if(1===r.length&&tr(r[0]))gr(i,r[0]);else for(let t=0;t<n.length;t++)Ki(r[t])&&(i[n[t]]=r[t]);return gr(t,i)}function vr(t,e){return Qi(t)?e:t}function yr(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}class br{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||rr&&this.toString()===rr.TONE_DEBUG_CLASS)&&function(...t){Gi.log(...t)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}br.version="14.7.77";function wr(t,e){return t>e+1e-6}function xr(t,e){return wr(t,e)||Er(t,e)}function Tr(t,e){return t+1e-6<e}function Er(t,e){return Math.abs(t-e)<1e-6}function Cr(t,e,n){return Math.max(Math.min(t,n),e)}class Ar extends br{constructor(){super(),this.name="Timeline",this._timeline=[];const t=_r(Ar.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Yi(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Yi(xr(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Er(this._timeline[e].time,t)){for(let n=e;n>=0&&Er(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&xr(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const s=this._timeline.length;let i=s;if(s>0&&this._timeline[s-1][e]<=t)return s-1;for(;n<i;){let s=Math.floor(n+(i-n)/2);const r=this._timeline[s],o=this._timeline[s+1];if(Er(r[e],t)){for(let n=s;n<this._timeline.length;n++){if(!Er(this._timeline[n][e],t))break;s=n}return s}if(Tr(r[e],t)&&wr(o[e],t))return s;wr(r[e],t)?i=s:n=s+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let s=this._search(t),i=this._search(e);return-1!==s&&-1!==i?(this._timeline[s].time!==t&&(s+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,s,i)):-1===s&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&Er(this._timeline[n].time,t)){let s=n;for(let e=n;e>=0&&Er(this._timeline[e].time,t);e--)s=e;this._iterate((t=>{e(t)}),s,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const kr=[];function Sr(t){kr.push(t)}const Mr=[];function Or(t){Mr.push(t)}class Ir extends br{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Qi(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...s)=>{e(...s),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((n=>{if(Qi(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Qi(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,s=n.length;t<s;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(Ir.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class Lr extends Ir{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Dr extends Lr{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Ar,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=_r(Dr.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=function(t){return new gi(t)}({latencyHint:t.latencyHint}),this._ticker=new cr(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,kr.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){Yi(pr(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(t)}createMediaElementSource(t){Yi(pr(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(t)}createMediaStreamDestination(){Yi(pr(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Yi(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Yi(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Yi(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Yi(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Yi(Ki(Ni),"This node only works in a secure context (https or localhost)"),new Ni(t,e,n)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(this.rawContext,t,e)}addAudioWorkletModule(t,e){return lr(this,void 0,void 0,(function*(){Yi(Ki(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return lr(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,sr(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return pr(this._context)?this._context.resume():Promise.resolve()}close(){return lr(this,void 0,void 0,(function*(){var t;pr(this._context)&&(yield this._context.close()),this._initialized&&(t=this,Mr.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;const s=this._context.createBufferSource();return s.channelCount=1,s.channelCountMode="explicit",s.buffer=e,s.loop=!0,s.start(0),this._constants.set(t,s),s}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,s=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),s()},id:n,time:i+e})};return s(),n}}function Nr(t,e){nr(e)?e.forEach((e=>Nr(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Pr(t,e){nr(e)?e.forEach((e=>Pr(t,e))):Object.defineProperty(t,e,{writable:!0})}const Br=()=>{};class Rr extends br{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Br;const t=_r(Rr.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&mr(t.url)||t.url instanceof Rr?this.set(t.url):sr(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:Br,onload:Br,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Fr().sampleRate}set(t){return t instanceof Rr?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return lr(this,void 0,void 0,(function*(){const e=Rr.load(t).then((t=>{this.set(t),this.onload(this)}));Rr.downloads.push(e);try{yield e}finally{const t=Rr.downloads.indexOf(e);Rr.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=nr(t)&&t[0].length>0,n=e?t.length:1,s=e?t[0].length:t.length,i=Fr(),r=i.createBuffer(n,s,i.sampleRate),o=e||1!==n?t:[t];for(let t=0;t<n;t++)r.copyToChannel(o[t],t);return this._buffer=r,this}toMono(t){if(Ji(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(Ji(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),s=Math.floor(e*this.sampleRate);Yi(n<s,"The start time must be less than the end time");const i=s-n,r=Fr().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)r.copyToChannel(this.getChannelData(t).subarray(n,s),t);return new Rr(r)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Rr).fromArray(t)}static fromUrl(t){return lr(this,void 0,void 0,(function*(){const e=new Rr;return yield e.load(t)}))}static load(t){return lr(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let s=n[0];for(const t of n)if(Rr.supportsType(t)){s=t;break}t=t.replace(e[0],s)}const n=""===Rr.baseUrl||Rr.baseUrl.endsWith("/")?Rr.baseUrl:Rr.baseUrl+"/",s=yield fetch(n+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const i=yield s.arrayBuffer();return yield Fr().decodeAudioData(i)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return lr(this,void 0,void 0,(function*(){for(yield Promise.resolve();Rr.downloads.length;)yield Rr.downloads[0]}))}}Rr.baseUrl="",Rr.downloads=[];class Vr extends Dr{constructor(){var t,e,n;super({clockSource:"offline",context:dr(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new Ri(t,e,n)),lookAhead:0,updateInterval:dr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=dr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return lr(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return lr(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Rr(e)}))}close(){return Promise.resolve()}}const qr=new class extends Lr{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return lr(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let jr=qr;function Fr(){return jr===qr&&or&&Wr(new Dr),jr}function Wr(t){jr=pr(t)?new Dr(t):dr(t)?new Vr(t):t}if(rr&&!rr.TONE_SILENCE_LOGGING){let t="v";0;const e=` * Tone.js ${t}14.7.77 * `;console.log(`%c${e}`,"background: #000; color: #fff")}class zr extends br{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=_r(zr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:Br,onload:Br,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Yi(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=Br,s=Br){return sr(e)?this._buffers.set(t.toString(),new Rr(this.baseUrl+e,n,s)):this._buffers.set(t.toString(),new Rr(e,n,s)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}function Hr(t){return Math.pow(10,t/20)}function Ur(t){return Math.log(t)/Math.LN10*20}function Yr(t){return Math.pow(2,t/12)}let $r=440;function Xr(t){return Math.round(Gr(t))}function Gr(t){return 69+12*Math.log2(t/$r)}function Zr(t){return $r*Math.pow(2,(t-69)/12)}class Qr extends br{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),s="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*s:this._beatsToUnits(4/n)*s},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s+=this._beatsToUnits(parseFloat(n)/4)),s},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qr&&this.fromType(this._val),Qi(this._val))return this._noArg();if(sr(this._val)&&Qi(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(tr(this._val)){let t=0;for(const e in this._val)if(Ki(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Ki(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return sr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Kr extends Qr{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Kr(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),s=this.valueOf();return s+(Math.round(s/n)*n-s)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){const n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],s=new Kr(this.context,e[0]).toSeconds();return e.forEach((e=>{const i=new Kr(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(s-t)&&(n=e,s=i)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let s=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=s.toString();i.length>3&&(s=parseFloat(parseFloat(i).toFixed(3)));return[n,e,s].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Xr(this.toFrequency())}_now(){return this.context.now()}}class Jr extends Kr{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return $r}static set A4(t){!function(t){$r=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Jr.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=to[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:Jr.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(s*=this._beatsToUnits(parseFloat(n)/4)),s}}})}transpose(t){return new Jr(this.context,this.valueOf()*Yr(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Xr(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Jr.A4);let n=Math.round(12*e)+57;const s=Math.floor(n/12);s<0&&(n+=-12*s);return eo[n%12]+s.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Zr(t)}static ftom(t){return Xr(t)}}const to={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},eo=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class no extends Kr{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class so extends br{constructor(){super();const t=_r(so.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Fr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Kr(this.context,t).toSeconds()}toFrequency(t){return new Jr(this.context,t).toFrequency()}toTicks(t){return new no(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Qi(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Ki(n)&&Ki(n.value)&&Ki(n.setValueAtTime)?t[e]=n.value:n instanceof so?t[e]=n._getPartialProperties(t[e]):nr(n)||Ji(n)||sr(n)||er(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Ki(this[e])&&(this[e]&&Ki(this[e].value)&&Ki(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof so?this[e].set(t[e]):this[e]=t[e])})),this}}class io extends so{constructor(){super(_r(io.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=_r(io.getDefaults(),arguments,["param","units","convert"]);for(Yi(Ki(t.param)&&(hr(t.param)||t.param instanceof io),"param must be an AudioParam");!hr(t.param);)t.param=t.param._param;this._swappable=!!Ki(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ar(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Ki(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(so.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Ki(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Ki(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Ki(this.maxValue)&&Ki(this.minValue)&&$i(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Hr(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Ur(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),s=this._fromType(t);return Yi(isFinite(s)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),s=this._events.get(e);let i=this._initialValue;if(null===s)i=this._initialValue;else if("setTargetAtTime"!==s.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=s.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=s.value;if("setTargetAtTime"===s.type){const e=this._events.getBefore(s.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(s.time,t,n.time,n.value,e):this._exponentialInterpolate(s.time,t,n.time,n.value,e)}else i=s.value;else{const t=this._events.getBefore(s.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===s.type&&(i=this._exponentialApproach(s.time,n,s.value,s.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),s=this.toSeconds(e);return Yi(isFinite(n)&&isFinite(s),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:s,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,s),this._param.linearRampToValueAtTime(n,s),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=Er(n,0)?this._minOutput:n,this._assertRange(n);const s=this.toSeconds(e);return Yi(isFinite(n)&&isFinite(s),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:s,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,s),this._param.exponentialRampToValueAtTime(n,s),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const s=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const s=this._fromType(t);Yi(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(s),Yi(isFinite(s)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:s}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(s,i,n),this}setValueCurveAtTime(t,e,n,s=1){n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*s;this.setValueAtTime(this._toType(i),e);const r=n/(t.length-1);for(let n=1;n<t.length;n++){const i=this._fromType(t[n])*s;this.linearRampToValueAtTime(this._toType(i),e+n*r)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Yi(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Yi(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const s=this._events.get(e),i=this._events.getAfter(e);return s&&Er(s.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const s=this._events.getAfter(n.time),i=s?s.time:e+2,r=(i-e)/10;for(let n=e;n<i;n+=r)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Yi(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,s,i){return n+(e-n)*Math.exp(-(i-t)/s)}_linearInterpolate(t,e,n,s,i){return e+(i-t)/(n-t)*(s-e)}_exponentialInterpolate(t,e,n,s,i){return e*Math.pow(s/e,(i-t)/(n-t))}}class ro extends so{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Ki(this.input)?hr(this.input)||this.input instanceof io?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ki(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Ki(t)&&(t instanceof ro||ur(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Yi(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return ao(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Zi("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return lo(this,t,e,n),this}chain(...t){return oo(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Ki(this.input)&&(this.input instanceof ro?this.input.dispose():ur(this.input)&&this.input.disconnect()),Ki(this.output)&&(this.output instanceof ro?this.output.dispose():ur(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function oo(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof ro?t.connect(e):ur(t)&&ao(t,e),e)),e)}function ao(t,e,n=0,s=0){for(Yi(Ki(t),"Cannot connect from undefined node"),Yi(Ki(e),"Cannot connect to undefined node"),(e instanceof ro||ur(e))&&Yi(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Yi(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ro||e instanceof io;)Ki(e.input)&&(e=e.input);for(;t instanceof ro;)Ki(t.output)&&(t=t.output);hr(e)?t.connect(e,n):t.connect(e,n,s)}function lo(t,e,n=0,s=0){if(Ki(e))for(;e instanceof ro;)e=e.input;for(;!ur(t);)Ki(t.output)&&(t=t.output);hr(e)?t.disconnect(e,n):ur(e)?t.disconnect(e,n,s):t.disconnect()}class co extends ro{constructor(){super(_r(co.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=_r(co.getDefaults(),arguments,["gain","units"]);this.gain=new io({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Nr(this,"gain")}static getDefaults(){return Object.assign(ro.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class ho extends ro{constructor(t){super(t),this.onended=Br,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new co({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(ro.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Br})}_startGain(t,e=1){Yi(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Yi(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Br&&(this.onended(this),this.onended=Br,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Yi(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class uo extends ho{constructor(){super(_r(uo.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=_r(uo.getDefaults(),arguments,["url","onload"]);ao(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new io({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Rr(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(ho.getDefaults(),{url:new Rr,loop:!1,loopEnd:0,loopStart:0,onload:Br,onerror:Br,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,s=1){Yi(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,s),e=this.loop?vr(e,this.loopStart):vr(e,0);let r=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;xr(r,t)&&(r=(r-e)%n+e),Er(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Tr(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,r)),Ki(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class po extends so{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ar,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Sr((t=>{t.draw=new po({context:t})})),Or((t=>{t.draw.dispose()}));class mo extends Ar{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return $i(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){const n=this._timeline[e];if(n.state===t)return n}}}class fo extends ho{constructor(){super(_r(fo.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=_r(fo.getDefaults(),arguments,["offset"]);ao(this._source,this._gainNode),this.offset=new io({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(ho.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class go extends ro{constructor(){super(_r(go.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=_r(go.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new fo({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ro.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return _o(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,s){return this._param.setValueCurveAtTime(t,e,n,s),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function _o(t,e,n,s){(e instanceof io||hr(e)||e instanceof go&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof go&&(e.overridden=!0)),ao(t,e,n,s)}class vo extends io{constructor(){super(_r(vo.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ar(1/0),this._multiplier=1;const t=_r(vo.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(io.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const s=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(1/n,1));for(let t=0;t<=r;t++){const r=n*t+e,o=this._exponentialApproach(i.time,i.value,s,n,r);this.linearRampToValueAtTime(this._toType(o),r)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const s=this._events.get(n),i=this._events.previousEvent(s),r=this._getTicksUntilEvent(i,n);return s.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),s=this._events.get(e),i=Math.round(Math.max(10*(e-s.time),1)),r=(e-s.time)/i;for(let t=0;t<=i;t++){const i=r*t+s.time,o=this._exponentialInterpolate(s.time,s.value,e,n,i);this.linearRampToValueAtTime(this._toType(o),i)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Qi(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let s=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(s=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+s)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const s=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-s)/(n.time-e.time),r=Math.sqrt(Math.pow(s,2)-2*i*(e.ticks-t)),o=(-s+r)/i,a=(-s-r)/i;return(o>0?o:a)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),s=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+s)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class yo extends go{constructor(){super(_r(yo.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=_r(yo.getDefaults(),arguments,["value"]);this.input=this._param=new vo({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(go.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class bo extends so{constructor(){super(_r(bo.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new mo,this._tickOffset=new Ar;const t=_r(bo.getDefaults(),arguments,["frequency"]);this.frequency=new yo({context:this.context,units:t.units,value:t.frequency}),Nr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},so.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Ki(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let i=n,r=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(r=n.ticks,e=n.time),"started"===i.state&&"started"!==t.state&&(r+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),i=t})),this._state.remove(s),r}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let s=e,i=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=s.time;const n=this._tickOffset.get(t.time);n&&n.time>=s.time&&(i=n.seconds,e=n.time),"started"===s.state&&"started"!==t.state&&(i+=t.time-e),s=t})),this._state.remove(n),i}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),s=this._state.get(e),i=Math.max(n.time,s.time),r=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(t,e,n){let s=this._state.get(t);this._state.forEachBetween(t,e,(e=>{s&&"started"===s.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(s.time,t),e.time-this.sampleTime,n),s=e}));let i=null;if(s&&"started"===s.state){const r=Math.max(s.time,t),o=this.frequency.getTicksAtTime(r),a=o-this.frequency.getTicksAtTime(s.time);let l=Math.ceil(a)-a;l=Er(l,1)?0:l;let c=this.frequency.getTimeOfTick(o+l);for(;c<e;){try{n(c,Math.round(this.getTicksAtTime(c)))}catch(t){i=t;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class wo extends so{constructor(){super(_r(wo.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Br,this._lastUpdate=0,this._state=new mo("stopped"),this._boundLoop=this._loop.bind(this);const t=_r(wo.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new bo({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Nr(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(so.getDefaults(),{callback:Br,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Xi(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),s=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(s+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ir.mixin(wo);class xo extends ro{constructor(){super(_r(xo.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const t=_r(xo.getDefaults(),arguments,["delayTime","maxDelay"]),e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new io({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Nr(this,"delayTime")}static getDefaults(){return Object.assign(ro.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class To extends Jr{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Xr(super._frequencyToUnits(t))}_ticksToUnits(t){return Xr(super._ticksToUnits(t))}_beatsToUnits(t){return Xr(super._beatsToUnits(t))}_secondsToUnits(t){return Xr(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Zr(this.toMidi())}transpose(t){return new To(this.context,this.toMidi()+t)}}class Eo extends no{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Co extends br{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Yi(Ki(t.time),"Events must have a time property"),Yi(Ki(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Ao(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),s=t.right;s&&(t.right=s.left,s.left=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),s=t.left;s&&(t.left=s.right,s.right=t),null!==e?n?e.left=s:e.right=s:this._setRoot(s)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class Ao{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class ko extends ro{constructor(){super(_r(ko.getDefaults(),arguments,["volume"])),this.name="Volume";const t=_r(ko.getDefaults(),arguments,["volume"]);this.input=this.output=new co({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Nr(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(ro.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class So extends ro{constructor(){super(_r(So.getDefaults(),arguments)),this.name="Destination",this.input=new ko({context:this.context}),this.output=new co({context:this.context}),this.volume=this.input.volume;const t=_r(So.getDefaults(),arguments);oo(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ro.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),oo(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Sr((t=>{t.destination=new So({context:t})})),Or((t=>{t.destination.dispose()}));class Mo extends br{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ar({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class Oo{constructor(t,e){this.id=Oo._eventId++;const n=Object.assign(Oo.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:Br,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Oo._eventId=0;class Io extends Oo{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Io.getDefaults(),e);this.duration=new Eo(t.context,n.duration).valueOf(),this._interval=new Eo(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Oo.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Eo(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Eo(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Eo(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Lo extends so{constructor(){super(_r(Lo.getDefaults(),arguments)),this.name="Transport",this._loop=new Mo(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ar,this._repeatedEvents=new Co,this._syncedSignals=[],this._swingAmount=0;const t=_r(Lo.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new wo({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Nr(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(so.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),s=Math.sin(n*Math.PI)*this._swingAmount;t+=new Eo(this.context,2*this._swingTicks/3).toSeconds()*s}this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,e){const n=new Oo(this,{callback:t,time:new no(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,s=1/0){const i=new Io(this,{callback:t,duration:new Kr(this.context,s).toTicks(),interval:new Kr(this.context,e).toTicks(),time:new no(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new Oo(this,{callback:t,once:!0,time:new no(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new Eo(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return Ki(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){nr(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Kr(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Kr(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Eo(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Eo(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),s=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",s),this._clock.setTicksAtTime(t,s),this.emit("start",s,this._clock.getSecondsAtTime(s))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const s=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/s}else e=0}const n=new co(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Pr(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ir.mixin(Lo),Sr((t=>{t.transport=new Lo({context:t})})),Or((t=>{t.transport.dispose()}));class Do extends ro{constructor(t){super(t),this.input=void 0,this._state=new mo("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Br,this._syncedStop=Br,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new ko({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Nr(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(ro.getDefaults(),{mute:!1,onstop:Br,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let s=Qi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(s=this._clampToCurrentTime(s),this._synced||"started"!==this._state.getValueAtTime(s))if(this.log("start",s),this._state.setStateAtTime("started",s),this._synced){const t=this._state.get(s);t&&(t.offset=this.toSeconds(vr(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule((t=>{this._start(t,e,n)}),s);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>s&&this._syncedStart(this.now(),this.context.transport.seconds)}else Xi(this.context),this._start(s,e,n);else Yi(wr(s,this._state.get(s).time),"Start time must be strictly greater than previous start time"),this._state.cancel(s),this._state.setStateAtTime("started",s),this.log("restart",s),this.restart(s,e,n);return this}stop(t){let e=Qi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Ki(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const s=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-s),this._start(t,this.toSeconds(n.offset)+s,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Br,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}function No(t,e){return lr(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,s=new Vr(1,n,t.context.sampleRate);new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0);return(yield s.render()).getChannelData(0)}))}class Po extends ho{constructor(){super(_r(Po.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=_r(Po.getDefaults(),arguments,["frequency","type"]);ao(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new io({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new io({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Nr(this,["frequency","detune"])}static getDefaults(){return Object.assign(ho.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Bo extends Do{constructor(){super(_r(Bo.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=_r(Bo.getDefaults(),arguments,["frequency","type"]);this.frequency=new go({context:this.context,units:"frequency",value:t.frequency}),Nr(this,"frequency"),this.detune=new go({context:this.context,units:"cents",value:t.detune}),Nr(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Do.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Po({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return Bo._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}))}{const t=Bo._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Ki(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),s=this.context.createPeriodicWave(e,n);this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Bo._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Bo._periodicWaveCache.length>100&&Bo._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){$i(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const s=new Float32Array(n),i=new Float32Array(n);let r=1;if("custom"===t){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[s,i]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(r=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],r=Math.max(r,2),n=r):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(t){case"sine":a=o<=r?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(s[o]=-a*Math.sin(e*o),i[o]=a*Math.cos(e*o)):(s[o]=0,i[o]=0)}return[s,i]}_inverseFFT(t,e,n){let s=0;const i=t.length;for(let r=0;r<i;r++)s+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return s}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const s=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(t,e,i/32*s),n);return Cr(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return lr(this,void 0,void 0,(function*(){return No(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Bo._periodicWaveCache=[];class Ro extends ro{constructor(){super(Object.assign(_r(Ro.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return _o(this,t,e,n),this}}class Vo extends Ro{constructor(){super(Object.assign(_r(Vo.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=_r(Vo.getDefaults(),arguments,["mapping","length"]);nr(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):"function"==typeof t.mapping&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(go.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let s=0,i=e;s<i;s++){const e=s/(i-1)*2-1;n[s]=t(e,s)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Yi(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class qo extends Ro{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Vo({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class jo extends go{constructor(){super(Object.assign(_r(jo.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=_r(jo.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new co({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(go.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Fo extends Do{constructor(){super(_r(Fo.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new qo({context:this.context}),this._modulationNode=new co({context:this.context});const t=_r(Fo.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Bo({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Bo({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new jo({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Nr(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Bo.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return lr(this,void 0,void 0,(function*(){return No(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Wo extends Do{constructor(){super(_r(Wo.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new co({context:this.context,gain:0});const t=_r(Wo.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Bo({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new go({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Bo({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new jo({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new jo({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Nr(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Bo.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return lr(this,void 0,void 0,(function*(){return No(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class zo extends Do{constructor(){super(_r(zo.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new co({context:this.context,gain:0}),this._thresh=new Vo({context:this.context,mapping:t=>t<=0?-1:1});const t=_r(zo.getDefaults(),arguments,["frequency","width"]);this.width=new go({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Bo({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Nr(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Do.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return lr(this,void 0,void 0,(function*(){return No(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Ho extends Do{constructor(){super(_r(Ho.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=_r(Ho.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new go({context:this.context,units:"frequency",value:t.frequency}),this.detune=new go({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Nr(this,["frequency","detune"])}static getDefaults(){return Object.assign(Bo.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,s)=>t.detune.value=e+n*s))}}get count(){return this._oscillators.length}set count(t){if($i(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new Bo({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Br});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(t=1024){return lr(this,void 0,void 0,(function*(){return No(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class Uo extends Do{constructor(){super(_r(Uo.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new jo({context:this.context,value:2});const t=_r(Uo.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new zo({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Bo({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Nr(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Do.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return lr(this,void 0,void 0,(function*(){return No(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Yo={am:Fo,fat:Ho,fm:Wo,oscillator:Bo,pulse:zo,pwm:Uo};class $o extends Do{constructor(){super(_r($o.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=_r($o.getDefaults(),arguments,["frequency","type"]);this.frequency=new go({context:this.context,units:"frequency",value:t.frequency}),this.detune=new go({context:this.context,units:"cents",value:t.detune}),Nr(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Bo.getDefaults(),Wo.getDefaults(),Fo.getDefaults(),Ho.getDefaults(),zo.getDefaults(),Uo.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Yo[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Yo[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&Ji(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&Ji(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&sr(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return lr(this,void 0,void 0,(function*(){return No(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Xo extends go{constructor(){super(Object.assign(_r(Xo.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new co({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,oo(this._constantSource,this._sum)}static getDefaults(){return Object.assign(go.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Go extends Ro{constructor(){super(Object.assign(_r(Go.getDefaults(),arguments,["min","max"]))),this.name="Scale";const t=_r(Go.getDefaults(),arguments,["min","max"]);this._mult=this.input=new jo({context:this.context,value:t.max-t.min}),this._add=this.output=new Xo({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Ro.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zo extends Ro{constructor(){super(Object.assign(_r(Zo.getDefaults(),arguments))),this.name="Zero",this._gain=new co({context:this.context}),this.output=this._gain,this.input=void 0,ao(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),lo(this.context.getConstant(0),this._gain),this}}class Qo extends ro{constructor(){super(_r(Qo.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=io.prototype._fromType,this._toType=io.prototype._toType,this._is=io.prototype._is,this._clampValue=io.prototype._clampValue;const t=_r(Qo.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Bo(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new co({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new go({context:this.context,units:"audioRange",value:0}),this._zeros=new Zo({context:this.context}),this._a2g=new qo({context:this.context}),this._scaler=this.output=new Go({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Nr(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(Bo.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof io||t instanceof go)&&(this.convert=t.convert,this.units=t.units),_o(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Ko(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){$i(s,t,e),n.set(this,s)}})}}function Jo(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(s){$i(this.toSeconds(s),t,e),n.set(this,s)}})}}class ta extends Do{constructor(){super(_r(ta.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=_r(ta.getDefaults(),arguments,["url","onload"]);this._buffer=new Rr({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Do.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Br,onerror:Br,playbackRate:1,reverse:!1})}load(t){return lr(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=Br){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?vr(e,this._loopStart):vr(e,0);const s=this.toSeconds(e),i=n;n=vr(n,Math.max(this._buffer.duration-s,0));let r=this.toSeconds(n);r/=this._playbackRate,t=this.toSeconds(t);const o=new uo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+r),this._state.setStateAtTime("stopped",t+r,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Qi(i)?o.start(t,s):o.start(t,s,r-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&$i(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&$i(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}ar([Jo(0)],ta.prototype,"fadeIn",void 0),ar([Jo(0)],ta.prototype,"fadeOut",void 0);class ea extends Ro{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Vo({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class na extends ro{constructor(){super(_r(na.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new go({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=_r(na.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(ro.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(sr(t))return t;{let n;for(n in sa)if(sa[n][e]===t)return n;return t}}_setCurve(t,e,n){if(sr(n)&&Reflect.has(sa,n)){const s=sa[n];tr(s)?"_decayCurve"!==t&&(this[t]=s[e]):this[t]=s}else{if(!nr(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Yi(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const s=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0){n=(1-i)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let s=this._attackCurve;for(let t=1;t<s.length;t++)if(s[t-1]<=i&&i<=s[t]){s=this._attackCurve.slice(t),s[0]=i;break}this._sig.setValueCurveAtTime(s,t,n,e)}if(s&&this.sustain<1){const i=e*this.sustain,r=t+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,s+r):this._sig.exponentialApproachValueAtTime(i,r,s)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Yi(nr(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return _o(this,t,e,n),this}asArray(t=1024){return lr(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Vr(1,e,this.context.sampleRate),s=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=s+this.toSeconds(this.release),r=.1*i,o=i+r,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));a._sig.toDestination(),a.triggerAttackRelease(e*(s+r)/o,0);return(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}ar([Jo(0)],na.prototype,"attack",void 0),ar([Jo(0)],na.prototype,"decay",void 0),ar([Ko(0,1)],na.prototype,"sustain",void 0),ar([Jo(0)],na.prototype,"release",void 0);const sa=(()=>{const t=128;let e,n;const s=[];for(e=0;e<t;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=t/10+.83*n}i[127]=1;const r=[];for(e=0;e<t;e++)r[e]=Math.ceil(e/127*5)/5;const o=[];for(e=0;e<t;e++)n=e/127,o[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,s=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(s*(1-n))}function l(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:l(a),Out:a},cosine:{In:s,Out:(c=s,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:l(i)},sine:{In:o,Out:l(o)},step:{In:r,Out:l(r)}};var c})();class ia extends ro{constructor(){super(_r(ia.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=_r(ia.getDefaults(),arguments);this._volume=this.output=new ko({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Nr(this,"volume")}static getDefaults(){return Object.assign(ro.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const s=t[e],i=this.context.transport.schedule((s=>{t[e]=s,n.apply(this,t)}),s);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,i,s),this.triggerRelease(i+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ra extends ia{constructor(){super(_r(ra.getDefaults(),arguments));const t=_r(ra.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(ia.getDefaults(),{detune:0,onsilence:Br,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const s=this.toSeconds(e);return this._triggerEnvelopeAttack(s,n),this.setNote(t,s),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),s=t instanceof Jr?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(s,t,n)}else this.frequency.setValueAtTime(s,n);return this}}ar([Jo(0)],ra.prototype,"portamento",void 0);class oa extends na{constructor(){super(_r(oa.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new co({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class aa extends ra{constructor(){super(_r(aa.getDefaults(),arguments)),this.name="Synth";const t=_r(aa.getDefaults(),arguments);this.oscillator=new $o(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new oa(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Nr(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ra.getDefaults(),{envelope:Object.assign(yr(na.getDefaults(),Object.keys(ro.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(yr($o.getDefaults(),[...Object.keys(Do.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class la extends aa{constructor(){super(_r(la.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=_r(la.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Nr(this,["oscillator","envelope"])}static getDefaults(){return gr(ra.getDefaults(),aa.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),s=this.toFrequency(t instanceof Jr?t.toFrequency():t),i=s*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(s,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ar([Ko(0)],la.prototype,"octaves",void 0),ar([Jo(0)],la.prototype,"pitchDecay",void 0);const ca=new Set;function ha(t){ca.add(t)}function ua(t,e){const n=`registerProcessor("${t}", ${e})`;ca.add(n)}ha('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');ha("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");ha("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");ua("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class da extends ia{constructor(){super(_r(da.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const t=_r(da.getDefaults(),arguments,["voice","options"]);Yi(!Ji(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ia.getDefaults(),{maxPolyphony:32,options:{},voice:aa})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex((e=>e.voice===t));this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}Zi("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach((t=>{const s=new To(this.context,t).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),this._activeVoices.push({midi:s,voice:i,released:!1}),this.log("triggerAttack",t,e))}))}_triggerRelease(t,e){t.forEach((t=>{const n=new To(this.context,t).toMidi(),s=this._activeVoices.find((({midi:t,released:e})=>t===n&&!e));s&&(s.voice.triggerRelease(e),s.released=!0,this.log("triggerRelease",t,e))}))}_scheduleEvent(t,e,n,s){Yi(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,s):this._triggerRelease(e,n):this.context.setTimeout((()=>{this._scheduleEvent(t,e,n,s)}),n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);const s=this.toSeconds(e);return this._scheduleEvent("attack",t,s,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,s){const i=this.toSeconds(n);if(this.triggerAttack(t,i,s),nr(e)){Yi(nr(t),"If the duration is an array, the notes must also be an array");for(let n=0;n<t.length;n++){const s=e[Math.min(n,e.length-1)],r=this.toSeconds(s);Yi(r>0,"The duration must be greater than 0"),this.triggerRelease(t[n],i+r)}}else{const n=this.toSeconds(e);Yi(n>0,"The duration must be greater than 0"),this.triggerRelease(t,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(t){const e=yr(t,["onsilence","context"]);return this.options=gr(this.options,e),this._voices.forEach((t=>t.set(e))),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach((({voice:t})=>{t.triggerRelease(e)})),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach((t=>t.dispose())),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class pa extends ia{constructor(){super(_r(pa.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=_r(pa.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const s=parseInt(n,10);if(Yi(ir(n)||Ji(s)&&isFinite(s),`url key is neither a note or midi pitch: ${n}`),ir(n)){const s=new Jr(this.context,n).toMidi();e[s]=t.urls[n]}else Ji(s)&&isFinite(s)&&(e[s]=t.urls[s])})),this._buffers=new zr({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(ia.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Br,onerror:Br,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const s=Gr(new Jr(this.context,t).toFrequency()),i=Math.round(s),r=s-i,o=this._findClosest(i),a=i-o,l=this._buffers.get(a),c=Yr(o+r),h=new uo({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);h.start(e,0,l.duration/c,n),nr(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(h);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new Jr(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;){t.shift().stop(e)}})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,s=1){const i=this.toSeconds(n);return this.triggerAttack(t,i,s),nr(e)?(Yi(nr(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const s=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(s))}))):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Yi(ir(t)||isFinite(t),`note must be a pitch or midi: ${t}`),ir(t)){const s=new Jr(this.context,t).toMidi();this._buffers.add(s,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}ar([Jo(0)],pa.prototype,"attack",void 0),ar([Jo(0)],pa.prototype,"release",void 0);class ma extends so{constructor(){super(_r(ma.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new mo("stopped"),this._startOffset=0;const t=_r(ma.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(so.getDefaults(),{callback:Br,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,(t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Ji(this._loop)&&this._loop>1){e=1/0,Ji(this._loop)&&(e=this._loop*this._getLoopDuration());const s=this._state.getAfter(n);null!==s&&(e=Math.min(e,s.time-n)),e!==1/0&&(this._state.setStateAtTime("stopped",n+e+1,{id:-1}),e=new Eo(this.context,e));const i=new Eo(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new Eo(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new Eo(this.context,n))}}))}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=vr(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,(t=>{this.context.transport.clear(t.id)})),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;er(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new Eo(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new Eo(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class fa extends ma{constructor(){super(_r(fa.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new mo("stopped"),this._events=new Set;const t=_r(fa.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach((t=>{nr(t)?this.add(t[0],t[1]):this.add(t)}))}static getDefaults(){return Object.assign(ma.getDefaults(),{events:[]})}start(t,e){const n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=vr(e,this._loop?this._loopStart:0),e=this._loop?vr(e,this._loopStart):vr(e,0);const t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach((e=>{this._startNote(e,n,t)}))}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new Eo(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new Eo(this.context,e))):t.startOffset>=n&&t.start(new Eo(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach((t=>{t.startOffset+=this._startOffset}))}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((e=>{e.stop(t)})),this}at(t,e){const n=new no(this.context,t).toTicks(),s=new Eo(this.context,1).toSeconds(),i=this._events.values();let r=i.next();for(;!r.done;){const t=r.value;if(Math.abs(n-t.startOffset)<s)return Ki(e)&&(t.value=e),t;r=i.next()}return Ki(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const n=this.toTicks(t);let s;return e instanceof ma?(s=e,s.callback=this._tick.bind(this)):s=new ma({callback:this._tick.bind(this),context:this.context,value:e}),s.startOffset=n,s.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(s),this._restartEvent(s),this}_restartEvent(t){this._state.forEach((e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new Eo(this.context,e.time))}))}remove(t,e){return tr(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((n=>{n.startOffset===t&&(Qi(e)||Ki(e)&&n.value===e)&&(this._events.delete(n),n.dispose())})),this}clear(){return this._forEach((t=>t.dispose())),this._events.clear(),this}cancel(t){return this._forEach((e=>e.cancel(t))),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach((e=>{e instanceof fa?e._forEach(t):t(e)})),this}_setAll(t,e){this._forEach((n=>{n[t]=e}))}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach((e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)}))}get loopEnd(){return new Eo(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach((e=>{e.loopEnd=t,this._testLoopBoundries(e)}))}get loopStart(){return new Eo(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach((t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class ga extends ro{constructor(){super(Object.assign(_r(ga.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new ea({context:this.context}),this.a=new co({context:this.context,gain:0}),this.b=new co({context:this.context,gain:0}),this.output=new co({context:this.context}),this._internalChannels=[this.a,this.b];const t=_r(ga.getDefaults(),arguments,["fade"]);this.fade=new go({context:this.context,units:"normalRange",value:t.fade}),Nr(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ao(this._split,this.a.gain,0),ao(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ro.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class _a extends ro{constructor(t){super(t),this.name="Effect",this._dryWet=new ga({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new co({context:this.context}),this.effectReturn=new co({context:this.context}),this.input=new co({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Nr(this,"wet")}static getDefaults(){return Object.assign(ro.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class va extends ro{constructor(){super(Object.assign(_r(va.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=_r(va.getDefaults(),arguments,["pan"]);this.pan=new io({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Nr(this,"pan")}static getDefaults(){return Object.assign(ro.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}ua("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class ya extends ro{constructor(){super(_r(ya.getDefaults(),arguments,["channels"])),this.name="Split";const t=_r(ya.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ro.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class ba extends ro{constructor(){super(_r(ba.getDefaults(),arguments,["channels"])),this.name="Merge";const t=_r(ba.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(ro.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class wa extends ro{constructor(t){super(t),this.name="StereoEffect",this.input=new co({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new ga({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new ya({context:this.context,channels:2}),this._merge=new ba({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Nr(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),oo(...t),ao(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),oo(...t),ao(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ro.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class xa extends _a{constructor(){super(_r(xa.getDefaults(),arguments,["distortion"])),this.name="Distortion";const t=_r(xa.getDefaults(),arguments,["distortion"]);this._shaper=new Vo({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(_a.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,n=Math.PI/180;this._shaper.setMap((t=>Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ta extends _a{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new co({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Nr(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(_a.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Ea extends Ta{constructor(){super(_r(Ea.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const t=_r(Ea.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new xo({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Nr(this,"delayTime")}static getDefaults(){return Object.assign(Ta.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Ca extends wa{constructor(){super(_r(Ca.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const t=_r(Ca.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new Qo({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new Qo({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new go({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Nr(this,["frequency","Q"])}static getDefaults(){return Object.assign(wa.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,e){const n=[];for(let s=0;s<t;s++){const t=this.context.createBiquadFilter();t.type="allpass",this.Q.connect(t.Q),e.connect(t.frequency),n.push(t)}return n}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((t=>t.disconnect())),this._filtersR.forEach((t=>t.disconnect())),this.frequency.dispose(),this}}class Aa extends wa{constructor(){super(_r(Aa.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const t=_r(Aa.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new Qo({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new Qo({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new co({context:this.context}),this._amplitudeR=new co({context:this.context}),this.frequency=new go({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new go({context:this.context,value:t.depth,units:"normalRange"}),Nr(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(wa.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class ka extends ro{constructor(){super(_r(ka.getDefaults(),arguments,["solo"])),this.name="Solo";const t=_r(ka.getDefaults(),arguments,["solo"]);this.input=this.output=new co({context:this.context}),ka._allSolos.has(this.context)||ka._allSolos.set(this.context,new Set),ka._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(ro.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),ka._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){ka._soloed.has(this.context)||ka._soloed.set(this.context,new Set),ka._soloed.get(this.context).add(this)}_removeSolo(){ka._soloed.has(this.context)&&ka._soloed.get(this.context).delete(this)}_isSoloed(){return ka._soloed.has(this.context)&&ka._soloed.get(this.context).has(this)}_noSolos(){return!ka._soloed.has(this.context)||ka._soloed.has(this.context)&&0===ka._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ka._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ka._allSolos=new Map,ka._soloed=new Map;class Sa extends ro{constructor(){super(_r(Sa.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=_r(Sa.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new va({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new ko({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Nr(this,["pan","volume"])}static getDefaults(){return Object.assign(ro.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ma extends ro{constructor(){super(_r(Ma.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=_r(Ma.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new ka({solo:t.solo,context:this.context}),this._panVol=this.output=new Sa({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Nr(this,["pan","volume"])}static getDefaults(){return Object.assign(ro.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Ma.buses.has(t)||Ma.buses.set(t,new co({context:this.context})),Ma.buses.get(t)}send(t,e=0){const n=this._getBus(t),s=new co({context:this.context,units:"decibels",gain:e});return this.connect(s),s.connect(n),s}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ma.buses=new Map;class Oa extends ro{constructor(){super(...arguments),this.name="Listener",this.positionX=new io({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new io({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new io({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new io({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new io({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new io({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new io({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new io({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new io({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ro.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Sr((t=>{t.listener=new Oa({context:t})})),Or((t=>{t.listener.dispose()}));function Ia(){return Fr().now()}const La=Fr().transport;Fr().destination,Fr().destination;Fr().listener;const Da=Fr().draw;Fr();c=class{constructor(t,e,n,s,i,r,o,a,l,c,h){this.pad=t,this.n=e,this.width=n,this.height=s,this.ctx=i,this.posNeu=[],this.shape=r,this.sigma=20,this.eps=.2,this.count=0,this.bpm=o,this.vol=a,this.sol=l,this.pan=c,this.player=h}getPlayer(){return this.player}getPan(){return this.pan}getVol(){return this.vol}getSol(){return this.sol}getPad(){return this.pad}getN(){return this.n}getWidth(){return this.width}getHeight(){return this.height}getCtx(){return this.ctx}getPosNeu(){return this.posNeu}getShape(){return this.shape}getEps(){return this.eps}visualClick(t){var e;if(0!=this.n){if("rect"==this.shape){var n=1,s=t;return(e=new fa((()=>{Da.schedule((()=>{5==n&&(n=1),1==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width-2,2):2==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width-2,this.height-2):3==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(0,this.height-2):4==n&&s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(2,2),n++}))}),[{time:0},{time:60/La.bpm.value},{time:60/La.bpm.value*2},{time:60/La.bpm.value*3}]).start(0)).loopStart=0,e.loopEnd=60/La.bpm.value*4,e.loop=!0,e}if("tri"==this.shape){n=1,s=t;return(e=new fa((()=>{Da.schedule((()=>{4==n&&(n=1),1==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width-2,this.height-2):2==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(2,this.height-2):3==n&&s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width/2,4),n++}))}),[{time:0},{time:60/La.bpm.value},{time:60/La.bpm.value*2}]).start(0)).loopStart=0,e.loopEnd=60/La.bpm.value*3,e.loop=!0,e}n=1,s=t;var i=.4*Math.PI,r=.3*Math.PI,o=this.width/(1+2*Math.cos(i));return(e=new fa((()=>{Da.schedule((()=>{6==n&&(n=1),1==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width-2,this.height-o*Math.sin(i)):2==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width-o*Math.cos(i)-2,this.height-2):3==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width-o*(Math.cos(i)+1),this.height-2):4==n?s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(2,this.height-o*Math.sin(i)):5==n&&s.animate({duration:60/La.bpm.value*1e3,delay:0,when:"now",swing:!1,times:0,wait:0}).move(this.width/2,2+this.height-o*(Math.sin(i)+Math.cos(r))),n++}))}),[{time:0},{time:60/La.bpm.value},{time:60/La.bpm.value*2},{time:60/La.bpm.value*3},{time:60/La.bpm.value*4}]).start(0)).loopStart=0,e.loopEnd=60/La.bpm.value*5,e.loop=!0,e}}initPosNeu(){switch(this.shape){case"rect":for(let t=0;t<this.n;t++){let[e,n]=[this.width*Math.random(),this.height*Math.random()];this.posNeu[t]=[e,n]}break;case"tri":for(let t=0;t<this.n;t++){let e=Math.random()/1.2+.05,n=Math.random()/1.2+.05,s=Math.sqrt(e),i=0*(1-s)+s*(1-n)*(this.width/2)+s*n*this.width,r=(1-s)*this.height+s*(1-n)*0+s*n*this.height;this.posNeu[t]=[i,r]}break;case"pent":let s=.4*Math.PI,i=.3*Math.PI,r=this.width/(1+2*Math.cos(s)),o=this.width/2,a=this.height-r*Math.tan(i)/2,l=0,c=this.width-r*Math.cos(s),h=this.width-r*(Math.cos(s)+1),u=this.width,d=this.width/2,p=this.height-r*Math.sin(s),m=this.height,f=this.height,g=this.height-r*Math.sin(s),_=this.height-r*(Math.sin(s)+Math.cos(i));for(var t=0;t<this.n;t++){let s=Math.floor(5*Math.random());if(0==s){let s=Math.random(),i=Math.random(),r=Math.sqrt(s);var e=(1-r)*h+r*(1-i)*o+r*i*c,n=(1-r)*f+r*(1-i)*a+r*i*m;this.posNeu[t]=[e,n]}else if(1==s){let e=Math.random(),n=Math.random(),s=Math.sqrt(e),i=(1-s)*l+s*(1-n)*o+s*n*h,r=(1-s)*p+s*(1-n)*a+s*n*f;this.posNeu[t]=[i,r]}else if(2==s){let e=Math.random(),n=Math.random(),s=Math.sqrt(e),i=(1-s)*d+s*(1-n)*o+s*n*l,r=(1-s)*_+s*(1-n)*a+s*n*p;this.posNeu[t]=[i,r]}else if(3==s){let e=Math.random(),n=Math.random(),s=Math.sqrt(e),i=(1-s)*u+s*(1-n)*o+s*n*d,r=(1-s)*g+s*(1-n)*a+s*n*_;this.posNeu[t]=[i,r]}else{if(4!=s)throw Error("rand Error on Pent");{let e=Math.random(),n=Math.random(),s=Math.sqrt(e),i=(1-s)*c+s*(1-n)*o+s*n*u,r=(1-s)*m+s*(1-n)*a+s*n*g;this.posNeu[t]=[i,r]}}}break;default:throw Error("error on rhythm shape")}}drawNeurons(){for(var t=1;t<this.posNeu.length;t++)this.ctx.line(this.posNeu[t][0],this.posNeu[t][1],this.posNeu[t-1][0],this.posNeu[t-1][1]).css({stroke:"hsl("+this.count/4+", 100%, 50%)",width:"4px"});for(var e=1;e<this.posNeu.length;e++)this.ctx.circle(10).attr({cx:this.posNeu[e-1][0],cy:this.posNeu[e-1][1]}).css({fill:"hsl("+this.count/4+", 100%, 50%)"}),e==this.posNeu.length-1&&this.ctx.circle(10).attr({cx:this.posNeu[e][0],cy:this.posNeu[e][1]}).css({fill:"hsl("+this.count/4+", 100%, 50%)"})}initNeurons(){this.initPosNeu(),this.drawNeurons()}getPosDot(){switch(this.shape){case"rect":return[s=this.width*Math.random(),i=this.height*Math.random()];case"tri":var t=Math.random(),e=Math.random(),n=Math.sqrt(t);return[s=0*(1-n)+n*(1-e)*this.width/2+n*e*this.width,i=(1-n)*this.height+n*(1-e)*0+n*e*this.height];case"pent":let r=.4*Math.PI,o=.3*Math.PI,a=this.width/(1+2*Math.cos(r)),l=this.width/2,c=this.height-a*Math.tan(o)/2,h=0,u=this.width-a*Math.cos(r),d=this.width-a*(Math.cos(r)+1),p=this.width,m=this.width/2,f=this.height-a*Math.sin(r),g=this.height,_=this.height,v=this.height-a*Math.sin(r),y=this.height-a*(Math.sin(r)+Math.cos(o)),b=Math.floor(5*Math.random());if(0==b){let t=Math.random(),e=Math.random(),n=Math.sqrt(t);var s=(1-n)*d+n*(1-e)*l+n*e*u,i=(1-n)*_+n*(1-e)*c+n*e*g}else if(1==b){let t=Math.random(),e=Math.random(),n=Math.sqrt(t);s=(1-n)*h+n*(1-e)*l+n*e*d,i=(1-n)*f+n*(1-e)*c+n*e*_}else if(2==b){let t=Math.random(),e=Math.random(),n=Math.sqrt(t);s=(1-n)*m+n*(1-e)*l+n*e*h,i=(1-n)*y+n*(1-e)*c+n*e*f}else if(3==b){let t=Math.random(),e=Math.random(),n=Math.sqrt(t);s=(1-n)*p+n*(1-e)*l+n*e*m,i=(1-n)*v+n*(1-e)*c+n*e*y}else{if(4!=b)throw Error("rand Dot Error on Pent");{let t=Math.random(),e=Math.random(),n=Math.sqrt(t);s=(1-n)*u+n*(1-e)*l+n*e*p,i=(1-n)*g+n*(1-e)*c+n*e*v}}return[s,i];default:throw Error("Error on Dot shape")}}learning(){var t=0,e=0;let n=this.getPosDot();for(var s=n[0],i=n[1],r=0;r<this.posNeu.length;r++){var o=this.posNeu[r][0],a=this.posNeu[r][1],l=Math.hypot(s-o,i-a);0==r?(e=l,t=r):l<e&&(t=r,e=l)}for(var c=0;c<this.posNeu.length;c++)this.posNeu[c][0]=this.posNeu[c][0]+this.eps*Math.exp(-Math.pow(c-t,2)/(2*Math.pow(this.sigma,2)))*(s-this.posNeu[c][0]),this.posNeu[c][1]=this.posNeu[c][1]+this.eps*Math.exp(-Math.pow(c-t,2)/(2*Math.pow(this.sigma,2)))*(i-this.posNeu[c][1]);this.count%5==0&&(this.sigma=.95*this.sigma,this.eps=.999*this.eps),this.count++}normalizeArray(t){let e=Math.min(...t),n=Math.max(...t),s=[];t[t.length]=0;for(let i=0;i<t.length;i++)s[i]=(t[i]-e)/(n-e),0==i?t[i]=0:s[i-1]>=0&&s[i-1]<1/8?t[i]=t[i-1]+1/4:s[i-1]>=1/8&&s[i-1]<2/8?t[i]=t[i-1]+.5:s[i-1]>=2/8&&s[i-1]<3/8?t[i]=t[i-1]+3/4:s[i-1]>=3/8&&s[i-1]<.5?t[i]=t[i-1]+1:s[i-1]>=.5&&s[i-1]<5/8?t[i]=t[i-1]+5/4:s[i-1]>=5/8&&s[i-1]<6/8?t[i]=t[i-1]+1.5:s[i-1]>=6/8&&s[i-1]<7/8?t[i]=t[i-1]+7/4:t[i]=t[i-1]+2;return t}calcDistNormNeu(){for(var t=[],e=1;e<this.posNeu.length;e++){let n=this.posNeu[e][0],s=this.posNeu[e][1],i=this.posNeu[e-1][0],r=this.posNeu[e-1][1];t[e-1]=Math.hypot(n-i,s-r)}return this.normalizeArray(t)}render(){this.ctx.clear(),this.learning(),this.drawNeurons()}};var Na;Na=class{constructor(t,e,n,s,i,r,o,a,l){this.arrDur=t,this.bpm=e,this.url=n,this.metrica=s,this.count=0,this.ctx=i,this.vol=r,this.sol=o,this.pan=a,this.sampler=l,this.part=new fa((t=>{this.sampler.start(t),Da.schedule((()=>{0==this.count?(this.ctx.get(this.arrDur.length-1+this.count).css({fill:"white"}),this.ctx.get(2*(this.arrDur.length-1)).css({fill:"red"})):(this.ctx.get(this.arrDur.length-1+this.count).css({fill:"white"}),this.ctx.get(this.arrDur.length-1+this.count-1).css({fill:"red"})),this.count++,this.count==this.arrDur.length&&(this.count=0)}))}),[]).start(0)}getarrDur(){return this.arrDur}rightLoop(){var t=this.arrDur[this.arrDur.length-1];return t%this.metrica==0?t+=this.metrica:(t=Math.ceil(this.arrDur[this.arrDur.length-1]))%this.metrica!=0&&(t+=this.metrica-t%this.metrica),t}createPart(){var t=60/this.bpm;this.part.loopStart=0,this.part.loopEnd=this.rightLoop()*t;for(var e=0;e<this.arrDur.length;e++)this.arrDur[e]=this.arrDur[e]*t,this.part.add({time:this.arrDur[e]});this.part.loop=!0}};var Pa;Pa=class{constructor(t,e,n,s,i,r,o){this.arrDur=t,this.arrPos=e,this.bpm=n,this.metrica=s,this.baseNote=i,this.ctx=r,this.count=0,this.synth=o,this.part}initPart(){this.part=new fa(((t,e)=>{this.synth.triggerAttackRelease(e.note,"8n",t),Da.schedule((()=>{0==this.count?(this.ctx.get(this.arrDur.length-1+this.count).css({fill:"white"}),this.ctx.get(2*(this.arrDur.length-1)).css({fill:"red"})):(this.ctx.get(this.arrDur.length-1+this.count).css({fill:"white"}),this.ctx.get(this.arrDur.length-1+this.count-1).css({fill:"red"})),this.count++,this.count==this.arrDur.length&&(this.count=0)}))}),[]).start(0),this.part.set({humanize:!0})}rightLoop(){var t=this.arrDur[this.arrDur.length-1];return t%this.metrica==0?t+=this.metrica:(t=Math.ceil(this.arrDur[this.arrDur.length-1]))%this.metrica!=0&&(t+=this.metrica-t%this.metrica),t}createPart(){var t=60/this.bpm;this.part.loopStart=0,this.part.loopEnd=this.rightLoop()*t;for(var e=0;e<this.arrDur.length;e++)this.arrDur[e]=this.arrDur[e]*t,this.part.add({time:this.arrDur[e],note:this.baseNote*Math.pow(2,(this.arrPos[e]-1)/12)});this.part.loop=!0}getLoopEnd(){return this.part.loopEnd}};var Ba;Ba=class{constructor(t,e,n,s){this.n=t,this.l=e,this.ctx=n,this.posNeu=[],this.sigma=20,this.eps=.2,this.count=0,this.bpm=s}getPad(){return this.pad}getN(){return this.n}getWidth(){return this.l}getCtx(){return this.ctx}getPosNeu(){return this.posNeu}getEps(){return this.eps}initPosNeu(){for(let i=0;i<this.n;i++){var t=this.l/2*Math.sqrt(Math.random()),e=2*Math.random()*Math.PI,n=this.l/2,s=this.l/2;let[r,o]=[n+t*Math.cos(e),s+t*Math.sin(e)];this.posNeu[i]=[r,o]}}drawNeurons(){for(var t=1;t<this.posNeu.length;t++)this.ctx.line(this.posNeu[t][0],this.posNeu[t][1],this.posNeu[t-1][0],this.posNeu[t-1][1]).css({stroke:"hsl("+this.count/4+", 100%, 50%)",width:"4px"});for(var e=1;e<this.posNeu.length;e++)this.ctx.circle(10).attr({cx:this.posNeu[e-1][0],cy:this.posNeu[e-1][1]}).css({fill:"hsl("+this.count/4+", 100%, 50%)"}),e==this.posNeu.length-1&&this.ctx.circle(10).attr({cx:this.posNeu[e][0],cy:this.posNeu[e][1]}).css({fill:"hsl("+this.count/4+", 100%, 50%)"})}initNeurons(){this.initPosNeu(),this.drawNeurons()}getPosDot(){var t=this.l/2*Math.sqrt(Math.random()),e=2*Math.random()*Math.PI,n=this.l/2,s=this.l/2;return[n+t*Math.cos(e),s+t*Math.sin(e)]}learning(){var t=0,e=0;let n=this.getPosDot();for(var s=n[0],i=n[1],r=0;r<this.posNeu.length;r++){var o=this.posNeu[r][0],a=this.posNeu[r][1],l=Math.hypot(s-o,i-a);0==r?(e=l,t=r):l<e&&(t=r,e=l)}for(var c=0;c<this.posNeu.length;c++)this.posNeu[c][0]=this.posNeu[c][0]+this.eps*Math.exp(-Math.pow(c-t,2)/(2*Math.pow(this.sigma,2)))*(s-this.posNeu[c][0]),this.posNeu[c][1]=this.posNeu[c][1]+this.eps*Math.exp(-Math.pow(c-t,2)/(2*Math.pow(this.sigma,2)))*(i-this.posNeu[c][1]);this.count%5==0&&(this.sigma=.95*this.sigma,this.eps=.999*this.eps),this.count++}normalizeArray(t){let e=Math.min(...t),n=Math.max(...t),s=[];t[t.length]=0;for(let i=0;i<t.length;i++)s[i]=(t[i]-e)/(n-e),0==i?t[i]=0:s[i-1]>=0&&s[i-1]<2/8?t[i]=t[i-1]+.5:s[i-1]>=2/8&&s[i-1]<.5?t[i]=t[i-1]+1:s[i-1]>=.5&&s[i-1]<6/8?t[i]=t[i-1]+1.5:t[i]=t[i-1]+2;return t}calcDistNormNeu(){for(var t=[],e=1;e<this.posNeu.length;e++){let n=this.posNeu[e][0],s=this.posNeu[e][1],i=this.posNeu[e-1][0],r=this.posNeu[e-1][1];t[e-1]=Math.hypot(n-i,s-r)}return this.normalizeArray(t)}render(){this.ctx.clear(),this.learning(),this.drawNeurons()}};var Ra;Ra=class{constructor(t,e,n,s,i,r,o,a,l,c){this.arrDur=t,this.leMel=e,this.bpm=n,this.metrica=s,this.BaseNote=i,this.ctx=r,this.PolySynth=o,this.count=0,this.arrPosMel=a,this.arrDurMel=l,this.mode=c,this.part,this.melnotes=[],this.baseChords={ionic:[0,2,4,5,7,9,11],doric:[0,2,3,5,7,9,10],frigian:[0,1,3,5,7,8,10],lydian:[0,2,4,6,7,9,11],mixolydian:[0,2,4,5,7,9,10],eolian:[0,2,3,5,7,8,10],locrian:[0,1,3,5,6,8,10],arm:[0,2,3,5,7,8,11],dim:[0,1,3,4,6,7,9,10],semid:[0,2,3,5,6,8,9,11],esa:[0,2,4,6,8,10],petmin:[0,3,5,7,10],petmag:[0,2,5,7,9],blues:[0,5,7]},this.chords={ionic:[[1,0,0,0,1,0,0,1,0,0,0,0],[0,0,1,0,0,1,0,0,0,1,0,0],[0,0,0,0,1,0,0,1,0,0,0,1],[1,0,0,0,0,1,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,0],[0,0,1,0,0,1,0,0,0,0,0,1]],doric:[[1,0,0,1,0,0,0,1,0,0,0,0],[0,0,1,0,0,1,0,0,0,1,0,0],[0,0,0,1,0,0,0,1,0,0,1,0],[1,0,0,0,0,1,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0,1,0],[1,0,0,1,0,0,0,0,0,1,0,0],[0,0,1,0,0,1,0,0,0,0,1,0]],frigian:[[1,0,0,1,0,0,0,1,0,0,0,0],[0,1,0,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,0,1,0,0,1,0],[1,0,0,0,0,1,0,0,1,0,0,0],[0,1,0,0,0,0,0,1,0,0,1,0],[1,0,0,1,0,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0,0,1,0]],lydian:[[1,0,0,0,1,0,0,1,0,0,0,0],[0,0,1,0,0,0,1,0,0,1,0,0],[0,0,0,0,1,0,0,1,0,0,0,1],[1,0,0,0,0,0,1,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,0],[0,0,1,0,0,0,1,0,0,0,0,1]],mixolydian:[[1,0,0,0,1,0,0,1,0,0,0,0],[0,0,1,0,0,1,0,0,0,1,0,0],[0,0,0,0,1,0,0,1,0,0,1,0],[1,0,0,0,0,1,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0,1,0],[1,0,0,0,1,0,0,0,0,1,0,0],[0,0,1,0,0,1,0,0,0,0,1,0]],eolian:[[1,0,0,1,0,0,0,1,0,0,0,0],[0,0,1,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,0,1,0,0,1,0],[1,0,0,0,0,1,0,0,1,0,0,0],[0,0,1,0,0,0,0,1,0,0,1,0],[1,0,0,1,0,0,0,0,1,0,0,0],[0,0,1,0,0,1,0,0,0,0,1,0]],locrian:[[1,0,0,1,0,0,1,0,0,0,0,0],[0,1,0,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,0,0,0,1,0],[1,0,0,0,0,1,0,0,1,0,0,0],[0,1,0,0,0,0,1,0,0,0,1,0],[1,0,0,1,0,0,0,0,1,0,0,0],[0,1,0,0,0,1,0,0,0,0,1,0]],arm:[[1,0,0,1,0,0,0,1,0,0,0,0],[0,0,1,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,0,1,0,0,0,1],[1,0,0,0,0,1,0,0,1,0,0,0],[0,0,1,0,0,0,0,1,0,0,0,1],[1,0,0,1,0,0,0,0,1,0,0,0],[0,0,1,0,0,1,0,0,0,0,0,1]],dim:[[1,0,0,1,0,0,1,0,0,0,0,0],[0,1,0,0,1,0,0,1,0,0,0,0],[0,0,0,1,0,0,1,0,0,1,0,0],[0,0,0,0,1,0,0,1,0,0,1,0],[1,0,0,0,0,0,1,0,0,1,0,0],[0,1,0,0,0,0,0,1,0,0,1,0],[1,0,0,1,0,0,0,0,0,1,0,0],[0,1,0,0,1,0,0,0,0,0,1,0]],semid:[[1,0,0,1,0,0,1,0,0,0,0,0],[0,0,1,0,0,1,0,0,1,0,0,0],[0,0,0,1,0,0,1,0,0,1,0,0],[0,0,0,0,0,1,0,0,1,0,0,1],[1,0,0,0,0,0,1,0,0,1,0,0],[0,0,1,0,0,0,0,0,1,0,0,1],[1,0,0,1,0,0,0,0,0,1,0,0],[0,0,1,0,0,1,0,0,0,0,0,1]],esa:[[1,0,0,0,1,0,0,0,1,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0]],petmin:[[1,0,0,1,0,0,0,1,0,0,0,0],[0,0,0,1,0,0,0,1,0,0,1,0],[1,0,0,0,0,1,0,0,1,0,0,0],[0,0,1,0,0,0,0,1,0,0,1,0],[0,0,1,0,0,1,0,0,0,0,1,0]],petmag:[[1,0,0,0,1,0,0,1,0,0,0,0],[0,0,1,0,0,1,0,0,0,1,0,0],[1,0,0,0,0,1,0,0,0,1,0,0],[0,0,1,0,0,0,0,1,0,0,0,1],[1,0,0,0,1,0,0,0,0,1,0,0]],blues:[[1,0,0,0,1,0,0,1,0,0,1,0],[1,0,0,1,0,1,0,0,0,1,0,0],[0,0,1,0,0,1,0,1,0,0,0,1]]}}initPart(){this.part=new fa(((t,e)=>{this.PolySynth.triggerAttackRelease(e.note,"4n",t),Da.schedule((()=>{0==this.count?(this.ctx.get(this.arrDur.length-1+this.count).css({fill:"white"}),this.ctx.get(2*(this.arrDur.length-1)).css({fill:"red"})):(this.ctx.get(this.arrDur.length-1+this.count).css({fill:"white"}),this.ctx.get(this.arrDur.length-1+this.count-1).css({fill:"red"})),this.count++,this.count==this.arrDur.length&&(this.count=0)}))}),[]).start(0)}arrayProd(t,e){var n,s;return s=e,(n=t).map(((t,e)=>n[e]*s[e])).reduce(((t,e)=>t+e))}findChord(){var t=0;for(let s=1;s<=this.arrDur.length;s++){var e=0,n=[0,0,0,0,0,0,0,0,0,0,0,0];if(s==this.arrDur.length)for(;t<this.arrPosMel.length;)n[(this.arrPosMel[t]-1)%12]++,t++;else for(e=this.arrDur[s];this.arrDurMel[t]<e;)n[(this.arrPosMel[t]-1)%12]++,t++;this.melnotes.push(n)}for(let t=0;t<this.melnotes.length;t++){var s=0,i=0,r=0;for(let e=0;e<this.chords[this.mode].length;e++)if((i=this.arrayProd(this.melnotes[t],this.chords[this.mode][e]))>s)s=i,r=e;else if(i==s){Math.random()>.5&&(s=i,r=e)}var o=[];for(let t=0;t<this.chords[this.mode][r].length;t++)0!=this.chords[this.mode][r][t]&&o.push(this.BaseNote*Math.pow(2,t/12));o.push(this.BaseNote*Math.pow(2,this.baseChords[this.mode][r]/12)/2),this.melnotes[t]=o}}rightLoop(){var t=this.arrDur[this.arrDur.length-1];return t%this.metrica==0?t+=this.metrica:(t=Math.ceil(this.arrDur[this.arrDur.length-1]))%this.metrica!=0&&(t+=this.metrica-t%this.metrica),t}createPart(){var t=60/this.bpm;this.part.loopStart=0,this.part.loopEnd=this.rightLoop()*t;var e=this.leMel/this.part.loopEnd;this.part.loopEnd=this.leMel;for(var n=0;n<this.arrDur.length;n++)this.arrDur[n]=this.arrDur[n]*t*e;this.findChord();for(var s=0;s<this.arrDur.length;s++)this.part.add({time:this.arrDur[s],note:this.melnotes[s]});this.part.loop=!0}};const Va={},qa=[];function ja(t,e){if(Array.isArray(t))for(const n of t)ja(n,e);else if("object"!=typeof t)Wa(Object.getOwnPropertyNames(e)),Va[t]=Object.assign(Va[t]||{},e);else for(const e in t)ja(e,t[e])}function Fa(t){return Va[t]||{}}function Wa(t){qa.push(...t)}function za(t,e){let n;const s=t.length,i=[];for(n=0;n<s;n++)i.push(e(t[n]));return i}function Ha(t,e){let n;const s=t.length,i=[];for(n=0;n<s;n++)e(t[n])&&i.push(t[n]);return i}function Ua(t){return t%360*Math.PI/180}function Ya(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function $a(t){return t.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))}function Xa(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Ga(t,e,n,s){return null!=e&&null!=n||(s=s||t.bbox(),null==e?e=s.width/s.height*n:null==n&&(n=s.height/s.width*e)),{width:e,height:n}}function Za(t,e){const n=t.origin;let s=null!=t.ox?t.ox:null!=t.originX?t.originX:"center",i=null!=t.oy?t.oy:null!=t.originY?t.originY:"center";null!=n&&([s,i]=Array.isArray(n)?n:"object"==typeof n?[n.x,n.y]:[n,n]);const r="string"==typeof s,o="string"==typeof i;if(r||o){const{height:t,width:n,x:a,y:l}=e.bbox();r&&(s=s.includes("left")?a:s.includes("right")?a+n:a+n/2),o&&(i=i.includes("top")?l:i.includes("bottom")?l+t:l+t/2)}return[s,i]}const Qa={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};class Ka{}const Ja={};function tl(t,e="http://www.w3.org/2000/svg"){return Qa.document.createElementNS(e,t)}function el(t,e=!1){if(t instanceof Ka)return t;if("object"==typeof t)return il(t);if(null==t)return new Ja.___SYMBOL___ROOT___;if("string"==typeof t&&"<"!==t.charAt(0))return il(Qa.document.querySelector(t));const n=e?Qa.document.createElement("div"):tl("svg");return n.innerHTML=t,t=il(n.firstChild),n.removeChild(n.firstChild),t}function nl(t,e){return e&&e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node?e:tl(t)}function sl(t){if(!t)return null;if(t.instance instanceof Ka)return t.instance;if("#document-fragment"===t.nodeName)return new Ja.Fragment(t);let e=Xa(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":Ja[e]||(e="Dom"),new Ja[e](t)}let il=sl;function rl(t,e=t.name,n=!1){return Ja[e]=t,n&&(Ja.___SYMBOL___ROOT___=t),Wa(Object.getOwnPropertyNames(t.prototype)),t}let ol=1e3;function al(t){return"Svgjs"+Xa(t)+ol++}function ll(t){for(let e=t.children.length-1;e>=0;e--)ll(t.children[e]);return t.id?(t.id=al(t.nodeName),t):t}function cl(t,e){let n,s;for(s=(t=Array.isArray(t)?t:[t]).length-1;s>=0;s--)for(n in e)t[s].prototype[n]=e[n]}function hl(t){return function(...e){const n=e[e.length-1];return!n||n.constructor!==Object||n instanceof Array?t.apply(this,e):t.apply(this,e.slice(0,-1)).attr(n)}}ja("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const t=this.position();return this.parent().add(this.remove(),t+1),this},backward:function(){const t=this.position();return this.parent().add(this.remove(),t?t-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(t){(t=el(t)).remove();const e=this.position();return this.parent().add(t,e),this},after:function(t){(t=el(t)).remove();const e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=el(t)).before(this),this},insertAfter:function(t){return(t=el(t)).after(this),this}});const ul=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,dl=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,pl=/rgb\((\d+),(\d+),(\d+)\)/,ml=/(#[a-z_][a-z0-9\-_]*)/i,fl=/\)\s*,?\s*/,gl=/\s/g,_l=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,vl=/^rgb\(/,yl=/^(\s+)?$/,bl=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,wl=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,xl=/[\s,]+/,Tl=/[MLHVCSQTAZ]/i;function El(t){const e=Math.round(t),n=Math.max(0,Math.min(255,e)).toString(16);return 1===n.length?"0"+n:n}function Cl(t,e){for(let n=e.length;n--;)if(null==t[e[n]])return!1;return!0}function Al(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}ja("Dom",{classes:function(){const t=this.attr("class");return null==t?[]:t.trim().split(xl)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){const e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}}),ja("Dom",{css:function(t,e){const n={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){const e=t.split(/\s*:\s*/);n[e[0]]=e[1]})),n;if(arguments.length<2){if(Array.isArray(t)){for(const e of t){const t=Ya(e);n[e]=this.node.style[t]}return n}if("string"==typeof t)return this.node.style[Ya(t)];if("object"==typeof t)for(const e in t)this.node.style[Ya(e)]=null==t[e]||yl.test(t[e])?"":t[e]}return 2===arguments.length&&(this.node.style[Ya(t)]=null==e||yl.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),ja("Dom",{data:function(t,e,n){if(null==t)return this.data(za(Ha(this.node.attributes,(t=>0===t.nodeName.indexOf("data-"))),(t=>t.nodeName.slice(5))));if(t instanceof Array){const e={};for(const n of t)e[n]=this.data(n);return e}if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),ja("Dom",{remember:function(t,e){if("object"==typeof arguments[0])for(const e in t)this.remember(e,t[e]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(let t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});class kl{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof kl||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static random(t="vibrant",e,n){const{random:s,round:i,sin:r,PI:o}=Math;if("vibrant"===t){const t=24*s()+57,e=38*s()+45,n=360*s();return new kl(t,e,n,"lch")}if("sine"===t){const t=i(80*r(2*o*(e=null==e?s():e)/.5+.01)+150),n=i(50*r(2*o*e/.5+4.6)+200),a=i(100*r(2*o*e/.5+2.3)+150);return new kl(t,n,a)}if("pastel"===t){const t=8*s()+86,e=17*s()+9,n=360*s();return new kl(t,e,n,"lch")}if("dark"===t){const t=10+10*s(),e=50*s()+86,n=360*s();return new kl(t,e,n,"lch")}if("rgb"===t){const t=255*s(),e=255*s(),n=255*s();return new kl(t,e,n)}if("lab"===t){const t=100*s(),e=256*s()-128,n=256*s()-128;return new kl(t,e,n,"lab")}if("grey"===t){const t=255*s();return new kl(t,t,t)}throw new Error("Unsupported random color mode")}static test(t){return"string"==typeof t&&(_l.test(t)||vl.test(t))}cmyk(){const{_a:t,_b:e,_c:n}=this.rgb(),[s,i,r]=[t,e,n].map((t=>t/255)),o=Math.min(1-s,1-i,1-r);if(1===o)return new kl(0,0,0,1,"cmyk");return new kl((1-s-o)/(1-o),(1-i-o)/(1-o),(1-r-o)/(1-o),o,"cmyk")}hsl(){const{_a:t,_b:e,_c:n}=this.rgb(),[s,i,r]=[t,e,n].map((t=>t/255)),o=Math.max(s,i,r),a=Math.min(s,i,r),l=(o+a)/2,c=o===a,h=o-a;return new kl(360*(c?0:o===s?((i-r)/h+(i<r?6:0))/6:o===i?((r-s)/h+2)/6:o===r?((s-i)/h+4)/6:0),100*(c?0:l>.5?h/(2-o-a):h/(o+a)),100*l,"hsl")}init(t=0,e=0,n=0,s=0,i="rgb"){if(t=t||0,this.space)for(const t in this.space)delete this[this.space[t]];if("number"==typeof t)i="string"==typeof s?s:i,s="string"==typeof s?0:s,Object.assign(this,{_a:t,_b:e,_c:n,_d:s,space:i});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const n=function(t,e){const n=Cl(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,_d:0,space:"rgb"}:Cl(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:Cl(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:Cl(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:Cl(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:Cl(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=e||n.space,n}(t,e);Object.assign(this,n)}else if("string"==typeof t)if(vl.test(t)){const e=t.replace(gl,""),[n,s,i]=pl.exec(e).slice(1,4).map((t=>parseInt(t)));Object.assign(this,{_a:n,_b:s,_c:i,_d:0,space:"rgb"})}else{if(!_l.test(t))throw Error("Unsupported string format, can't construct Color");{const e=t=>parseInt(t,16),[,n,s,i]=dl.exec((r=t,4===r.length?["#",r.substring(1,2),r.substring(1,2),r.substring(2,3),r.substring(2,3),r.substring(3,4),r.substring(3,4)].join(""):r)).map(e);Object.assign(this,{_a:n,_b:s,_c:i,_d:0,space:"rgb"})}}var r;const{_a:o,_b:a,_c:l,_d:c}=this,h="rgb"===this.space?{r:o,g:a,b:l}:"xyz"===this.space?{x:o,y:a,z:l}:"hsl"===this.space?{h:o,s:a,l:l}:"lab"===this.space?{l:o,a:a,b:l}:"lch"===this.space?{l:o,c:a,h:l}:"cmyk"===this.space?{c:o,m:a,y:l,k:c}:{};Object.assign(this,h)}lab(){const{x:t,y:e,z:n}=this.xyz();return new kl(116*e-16,500*(t-e),200*(e-n),"lab")}lch(){const{l:t,a:e,b:n}=this.lab(),s=Math.sqrt(e**2+n**2);let i=180*Math.atan2(n,e)/Math.PI;i<0&&(i*=-1,i=360-i);return new kl(t,s,i,"lch")}rgb(){if("rgb"===this.space)return this;if("lab"===(t=this.space)||"xyz"===t||"lch"===t){let{x:t,y:e,z:n}=this;if("lab"===this.space||"lch"===this.space){let{l:s,a:i,b:r}=this;if("lch"===this.space){const{c:t,h:e}=this,n=Math.PI/180;i=t*Math.cos(n*e),r=t*Math.sin(n*e)}const o=(s+16)/116,a=i/500+o,l=o-r/200,c=16/116,h=.008856,u=7.787;t=.95047*(a**3>h?a**3:(a-c)/u),e=1*(o**3>h?o**3:(o-c)/u),n=1.08883*(l**3>h?l**3:(l-c)/u)}const s=3.2406*t+-1.5372*e+-.4986*n,i=-.9689*t+1.8758*e+.0415*n,r=.0557*t+-.204*e+1.057*n,o=Math.pow,a=.0031308,l=s>a?1.055*o(s,1/2.4)-.055:12.92*s,c=i>a?1.055*o(i,1/2.4)-.055:12.92*i,h=r>a?1.055*o(r,1/2.4)-.055:12.92*r;return new kl(255*l,255*c,255*h)}if("hsl"===this.space){let{h:t,s:e,l:n}=this;if(t/=360,e/=100,n/=100,0===e){n*=255;return new kl(n,n,n)}const s=n<.5?n*(1+e):n+e-n*e,i=2*n-s,r=255*Al(i,s,t+1/3),o=255*Al(i,s,t),a=255*Al(i,s,t-1/3);return new kl(r,o,a)}if("cmyk"===this.space){const{c:t,m:e,y:n,k:s}=this,i=255*(1-Math.min(1,t*(1-s)+s)),r=255*(1-Math.min(1,e*(1-s)+s)),o=255*(1-Math.min(1,n*(1-s)+s));return new kl(i,r,o)}return this;var t}toArray(){const{_a:t,_b:e,_c:n,_d:s,space:i}=this;return[t,e,n,s,i]}toHex(){const[t,e,n]=this._clamped().map(El);return`#${t}${e}${n}`}toRgb(){const[t,e,n]=this._clamped();return`rgb(${t},${e},${n})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:n}=this.rgb(),[s,i,r]=[t,e,n].map((t=>t/255)),o=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,a=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,l=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,c=(.4124*o+.3576*a+.1805*l)/.95047,h=(.2126*o+.7152*a+.0722*l)/1,u=(.0193*o+.1192*a+.9505*l)/1.08883,d=c>.008856?Math.pow(c,1/3):7.787*c+16/116,p=h>.008856?Math.pow(h,1/3):7.787*h+16/116,m=u>.008856?Math.pow(u,1/3):7.787*u+16/116;return new kl(d,p,m,"xyz")}_clamped(){const{_a:t,_b:e,_c:n}=this.rgb(),{max:s,min:i,round:r}=Math;return[t,e,n].map((t=>s(0,i(r(t),255))))}}class Sl{constructor(...t){this.init(...t)}clone(){return new Sl(this)}init(t,e){const n=0,s=0,i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==i.x?n:i.x,this.y=null==i.y?s:i.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){Ol.isMatrixLike(t)||(t=new Ol(t));const{x:e,y:n}=this;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}}function Ml(t,e,n){return Math.abs(e-t)<(n||1e-6)}class Ol{constructor(...t){this.init(...t)}static formatTransforms(t){const e="both"===t.flip||!0===t.flip,n=t.flip&&(e||"x"===t.flip)?-1:1,s=t.flip&&(e||"y"===t.flip)?-1:1,i=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,r=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,o=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,a=t.scale&&t.scale.length?t.scale[1]*s:isFinite(t.scale)?t.scale*s:isFinite(t.scaleY)?t.scaleY*s:s,l=t.shear||0,c=t.rotate||t.theta||0,h=new Sl(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),u=h.x,d=h.y,p=new Sl(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),m=p.x,f=p.y,g=new Sl(t.translate||t.tx||t.translateX,t.ty||t.translateY),_=g.x,v=g.y,y=new Sl(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:o,scaleY:a,skewX:i,skewY:r,shear:l,theta:c,rx:y.x,ry:y.y,tx:_,ty:v,ox:u,oy:d,px:m,py:f}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static matrixMultiply(t,e,n){const s=t.a*e.a+t.c*e.b,i=t.b*e.a+t.d*e.b,r=t.a*e.c+t.c*e.d,o=t.b*e.c+t.d*e.d,a=t.e+t.a*e.e+t.c*e.f,l=t.f+t.b*e.e+t.d*e.f;return n.a=s,n.b=i,n.c=r,n.d=o,n.e=a,n.f=l,n}around(t,e,n){return this.clone().aroundO(t,e,n)}aroundO(t,e,n){const s=t||0,i=e||0;return this.translateO(-s,-i).lmultiplyO(n).translateO(s,i)}clone(){return new Ol(this)}decompose(t=0,e=0){const n=this.a,s=this.b,i=this.c,r=this.d,o=this.e,a=this.f,l=n*r-s*i,c=l>0?1:-1,h=c*Math.sqrt(n*n+s*s),u=Math.atan2(c*s,c*n),d=180/Math.PI*u,p=Math.cos(u),m=Math.sin(u),f=(n*i+s*r)/l,g=i*h/(f*n-s)||r*h/(f*s+n);return{scaleX:h,scaleY:g,shear:f,rotate:d,translateX:o-t+t*p*h+e*(f*p*h-m*g),translateY:a-e+t*m*h+e*(f*m*h+p*g),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new Ol(t);return Ml(this.a,e.a)&&Ml(this.b,e.b)&&Ml(this.c,e.c)&&Ml(this.d,e.d)&&Ml(this.e,e.e)&&Ml(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=Ol.fromArray([1,0,0,1,0,0]);return t=t instanceof Kl?t.matrixify():"string"==typeof t?Ol.fromArray(t.split(xl).map(parseFloat)):Array.isArray(t)?Ol.fromArray(t):"object"==typeof t&&Ol.isMatrixLike(t)?t:"object"==typeof t?(new Ol).transform(t):6===arguments.length?Ol.fromArray([].slice.call(arguments)):e,this.a=null!=t.a?t.a:e.a,this.b=null!=t.b?t.b:e.b,this.c=null!=t.c?t.c:e.c,this.d=null!=t.d?t.d:e.d,this.e=null!=t.e?t.e:e.e,this.f=null!=t.f?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,n=this.c,s=this.d,i=this.e,r=this.f,o=t*s-e*n;if(!o)throw new Error("Cannot invert "+this);const a=s/o,l=-e/o,c=-n/o,h=t/o,u=-(a*i+c*r),d=-(l*i+h*r);return this.a=a,this.b=l,this.c=c,this.d=h,this.e=u,this.f=d,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=t instanceof Ol?t:new Ol(t);return Ol.matrixMultiply(e,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=t instanceof Ol?t:new Ol(t);return Ol.matrixMultiply(this,e,this)}rotate(t,e,n){return this.clone().rotateO(t,e,n)}rotateO(t,e=0,n=0){t=Ua(t);const s=Math.cos(t),i=Math.sin(t),{a:r,b:o,c:a,d:l,e:c,f:h}=this;return this.a=r*s-o*i,this.b=o*s+r*i,this.c=a*s-l*i,this.d=l*s+a*i,this.e=c*s-h*i+n*i-e*s+e,this.f=h*s+c*i-e*i-n*s+n,this}scale(t,e,n,s){return this.clone().scaleO(...arguments)}scaleO(t,e=t,n=0,s=0){3===arguments.length&&(s=n,n=e,e=t);const{a:i,b:r,c:o,d:a,e:l,f:c}=this;return this.a=i*t,this.b=r*e,this.c=o*t,this.d=a*e,this.e=l*t-n*t+n,this.f=c*e-s*e+s,this}shear(t,e,n){return this.clone().shearO(t,e,n)}shearO(t,e=0,n=0){const{a:s,b:i,c:r,d:o,e:a,f:l}=this;return this.a=s+i*t,this.c=r+o*t,this.e=a+l*t-n*t,this}skew(t,e,n,s){return this.clone().skewO(...arguments)}skewO(t,e=t,n=0,s=0){3===arguments.length&&(s=n,n=e,e=t),t=Ua(t),e=Ua(e);const i=Math.tan(t),r=Math.tan(e),{a:o,b:a,c:l,d:c,e:h,f:u}=this;return this.a=o+a*i,this.b=a+o*r,this.c=l+c*i,this.d=c+l*r,this.e=h+u*i-s*i,this.f=u+h*r-n*r,this}skewX(t,e,n){return this.skew(t,0,e,n)}skewY(t,e,n){return this.skew(0,t,e,n)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(Ol.isMatrixLike(t)){return new Ol(t).multiplyO(this)}const e=Ol.formatTransforms(t),{x:n,y:s}=new Sl(e.ox,e.oy).transform(this),i=(new Ol).translateO(e.rx,e.ry).lmultiplyO(this).translateO(-n,-s).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(n,s);if(isFinite(e.px)||isFinite(e.py)){const t=new Sl(n,s).transform(i),r=isFinite(e.px)?e.px-t.x:0,o=isFinite(e.py)?e.py-t.y:0;i.translateO(r,o)}return i.translateO(e.tx,e.ty),i}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Il(){if(!Il.nodes){const t=el().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");const e=t.path().node;Il.nodes={svg:t,path:e}}if(!Il.nodes.svg.node.parentNode){const t=Qa.document.body||Qa.document.documentElement;Il.nodes.svg.addTo(t)}return Il.nodes}function Ll(t){return!(t.width||t.height||t.x||t.y)}rl(Ol,"Matrix");class Dl{constructor(...t){this.init(...t)}addOffset(){return this.x+=Qa.window.pageXOffset,this.y+=Qa.window.pageYOffset,new Dl(this)}init(t){return t="string"==typeof t?t.split(xl).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return Ll(this)}merge(t){const e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),s=Math.max(this.x+this.width,t.x+t.width)-e,i=Math.max(this.y+this.height,t.y+t.height)-n;return new Dl(e,n,s,i)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof Ol||(t=new Ol(t));let e=1/0,n=-1/0,s=1/0,i=-1/0;return[new Sl(this.x,this.y),new Sl(this.x2,this.y),new Sl(this.x,this.y2),new Sl(this.x2,this.y2)].forEach((function(r){r=r.transform(t),e=Math.min(e,r.x),n=Math.max(n,r.x),s=Math.min(s,r.y),i=Math.max(i,r.y)})),new Dl(e,s,n-e,i-s)}}function Nl(t,e,n){let s;try{if(s=e(t.node),Ll(s)&&((i=t.node)!==Qa.document&&!(Qa.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===Qa.document}).call(Qa.document.documentElement,i)))throw new Error("Element not in the dom")}catch(e){s=n(t)}var i;return s}ja({viewbox:{viewbox(t,e,n,s){return null==t?new Dl(this.attr("viewBox")):this.attr("viewBox",new Dl(t,e,n,s))},zoom(t,e){let{width:n,height:s}=this.attr(["width","height"]);if((n||s)&&"string"!=typeof n&&"string"!=typeof s||(n=this.node.clientWidth,s=this.node.clientHeight),!n||!s)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const i=this.viewbox(),r=n/i.width,o=s/i.height,a=Math.min(r,o);if(null==t)return a;let l=a/t;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new Sl(n/2/r+i.x,s/2/o+i.y);const c=new Dl(i).transform(new Ol({scale:l,origin:e}));return this.viewbox(c)}}}),rl(Dl,"Box");class Pl extends Array{constructor(t=[],...e){if(super(t,...e),"number"==typeof t)return this;this.length=0,this.push(...t)}}cl([Pl],{each(t,...e){return"function"==typeof t?this.map(((e,n,s)=>t.call(e,e,n,s))):this.map((n=>n[t](...e)))},toArray(){return Array.prototype.concat.apply([],this)}});const Bl=["toArray","constructor","each"];function Rl(t,e){return new Pl(za((e||Qa.document).querySelectorAll(t),(function(t){return sl(t)})))}Pl.extend=function(t){t=t.reduce(((t,e)=>(Bl.includes(e)||"_"===e[0]||(t[e]=function(...t){return this.each(e,...t)}),t)),{}),cl([Pl],t)};let Vl=0;const ql={};function jl(t){let e=t.getEventHolder();return e===Qa.window&&(e=ql),e.events||(e.events={}),e.events}function Fl(t){return t.getEventTarget()}function Wl(t,e,n,s,i){const r=n.bind(s||t),o=el(t),a=jl(o),l=Fl(o);e=Array.isArray(e)?e:e.split(xl),n._svgjsListenerId||(n._svgjsListenerId=++Vl),e.forEach((function(t){const e=t.split(".")[0],s=t.split(".")[1]||"*";a[e]=a[e]||{},a[e][s]=a[e][s]||{},a[e][s][n._svgjsListenerId]=r,l.addEventListener(e,r,i||!1)}))}function zl(t,e,n,s){const i=el(t),r=jl(i),o=Fl(i);("function"!=typeof n||(n=n._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(xl)).forEach((function(t){const e=t&&t.split(".")[0],a=t&&t.split(".")[1];let l,c;if(n)r[e]&&r[e][a||"*"]&&(o.removeEventListener(e,r[e][a||"*"][n],s||!1),delete r[e][a||"*"][n]);else if(e&&a){if(r[e]&&r[e][a]){for(c in r[e][a])zl(o,[e,a].join("."),c);delete r[e][a]}}else if(a)for(t in r)for(l in r[t])a===l&&zl(o,[t,a].join("."));else if(e){if(r[e]){for(l in r[e])zl(o,[e,l].join("."));delete r[e]}}else{for(t in r)zl(o,t);!function(t){let e=t.getEventHolder();e===Qa.window&&(e=ql),e.events&&(e.events={})}(i)}}))}class Hl extends Ka{addEventListener(){}dispatch(t,e,n){return function(t,e,n,s){const i=Fl(t);return e instanceof Qa.window.Event||(e=new Qa.window.CustomEvent(e,{detail:n,cancelable:!0,...s})),i.dispatchEvent(e),e}(this,t,e,n)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const n=e[t.type];for(const e in n)for(const s in n[e])n[e][s](t);return!t.defaultPrevented}fire(t,e,n){return this.dispatch(t,e,n),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,n){return zl(this,t,e,n),this}on(t,e,n,s){return Wl(this,t,e,n,s),this}removeEventListener(){}}function Ul(){}rl(Hl,"EventTarget");const Yl={duration:400,ease:">",delay:0},$l={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Xl extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return"number"==typeof t||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(xl).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class Gl{constructor(...t){this.init(...t)}convert(t){return new Gl(this.value,t)}divide(t){return t=new Gl(t),new Gl(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(ul))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof Gl&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new Gl(t),new Gl(this-t,this.unit||t.unit)}plus(t){return t=new Gl(t),new Gl(this+t,this.unit||t.unit)}times(t){return t=new Gl(t),new Gl(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const Zl=[];class Ql extends Hl{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=el(t)).removeNamespace&&this.node instanceof Qa.window.SVGElement&&t.removeNamespace(),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return el(t).put(this,e)}children(){return new Pl(za(this.node.children,(function(t){return sl(t)})))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0){return this.writeDataToDom(),new this.constructor(ll(this.node.cloneNode(t)))}each(t,e){const n=this.children();let s,i;for(s=0,i=n.length;s<i;s++)t.apply(n[s],[s,n]),e&&n[s].each(t,e);return this}element(t,e){return this.put(new Ql(tl(t),e))}first(){return sl(this.node.firstChild)}get(t){return sl(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,"http://www.w3.org/1999/xhtml")}id(t){return void 0!==t||this.node.id||(this.node.id=al(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return sl(this.node.lastChild)}matches(t){const e=this.node,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return n&&n.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=sl(e.node.parentNode),!t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=sl(e.node.parentNode));return e}put(t,e){return t=el(t),this.add(t,e),t}putIn(t,e){return el(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=el(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const n=10**t,s=this.attr(e);for(const t in s)"number"==typeof s[t]&&(s[t]=Math.round(s[t]*n)/n);return this.attr(s),this}svg(t,e){return this.xml(t,e,"http://www.w3.org/2000/svg")}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const n=e.index(this);return e.put(t,n).put(this)}writeDataToDom(){return this.each((function(){this.writeDataToDom()})),this}xml(t,e,n){if("boolean"==typeof t&&(n=e,e=t,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();let n=this;if(null!=t){if(n=sl(n.node.cloneNode(!0)),e){const e=t(n);if(n=e||n,!1===e)return""}n.each((function(){const e=t(this),n=e||this;!1===e?this.remove():e&&this!==n&&this.replace(n)}),!0)}return e?n.node.outerHTML:n.node.innerHTML}e=null!=e&&e;const s=tl("wrapper",n),i=Qa.document.createDocumentFragment();s.innerHTML=t;for(let t=s.children.length;t--;)i.appendChild(s.firstElementChild);const r=this.parent();return e?this.replace(i)&&r:this.add(i)}}cl(Ql,{attr:function(t,e,n){if(null==t){t={},e=this.node.attributes;for(const n of e)t[n.nodeName]=bl.test(n.nodeValue)?parseFloat(n.nodeValue):n.nodeValue;return t}if(t instanceof Array)return t.reduce(((t,e)=>(t[e]=this.attr(e),t)),{});if("object"==typeof t&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?$l[t]:bl.test(e)?parseFloat(e):e;"number"==typeof(e=Zl.reduce(((e,n)=>n(t,e,this)),e))?e=new Gl(e):kl.isColor(e)?e=new kl(e):e.constructor===Array&&(e=new Xl(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return Rl(t,this.node)},findOne:function(t){return sl(this.node.querySelector(t))}}),rl(Ql,"Dom");class Kl extends Ql{constructor(t,e){super(t,e),this.dom={},this.node.instance=this,t.hasAttribute("svgjs:data")&&this.setData(JSON.parse(t.getAttribute("svgjs:data"))||{})}center(t,e){return this.cx(t).cy(e)}cx(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,e){return this.dx(t).dy(e)}dx(t=0){return this.x(new Gl(t).plus(this.x()))}dy(t=0){return this.y(new Gl(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,e){return this.x(t).y(e)}parents(t=this.root()){const e="string"==typeof t;e||(t=el(t));const n=new Pl;let s=this;for(;(s=s.parent())&&s.node!==Qa.document&&"#document-fragment"!==s.nodeName&&(n.push(s),e||s.node!==t.node)&&(!e||!s.matches(t));)if(s.node===this.root().node)return null;return n}reference(t){if(!(t=this.attr(t)))return null;const e=(t+"").match(ml);return e?el(e[1]):null}root(){const t=this.parent(Ja["___SYMBOL___ROOT___"]);return t&&t.root()}setData(t){return this.dom=t,this}size(t,e){const n=Ga(this,t,e);return this.width(new Gl(n.width)).height(new Gl(n.height))}width(t){return this.attr("width",t)}writeDataToDom(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}cl(Kl,{bbox:function(){const t=Nl(this,(t=>t.getBBox()),(t=>{try{const e=t.clone().addTo(Il().svg).show(),n=e.node.getBBox();return e.remove(),n}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}}));return new Dl(t)},rbox:function(t){const e=Nl(this,(t=>t.getBoundingClientRect()),(t=>{throw new Error(`Getting rbox of element "${t.node.nodeName}" is not possible`)})),n=new Dl(e);return t?n.transform(t.screenCTM().inverseO()):n.addOffset()},inside:function(t,e){const n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},point:function(t,e){return new Sl(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new Ol(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){const t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new Ol(e)}return new Ol(this.node.getScreenCTM())}}),rl(Kl,"Element");const Jl={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){const e={};let n;e[t]=function(e){if(void 0===e)return this.attr(t);if("string"==typeof e||e instanceof kl||kl.isRgb(e)||e instanceof Kl)this.attr(t,e);else for(n=Jl[t].length-1;n>=0;n--)null!=e[Jl[t][n]]&&this.attr(Jl.prefix(t,Jl[t][n]),e[Jl[t][n]]);return this},ja(["Element","Runner"],e)})),ja(["Element","Runner"],{matrix:function(t,e,n,s,i,r){return null==t?new Ol(this):this.attr("transform",new Ol(t,e,n,s,i,r))},rotate:function(t,e,n){return this.transform({rotate:t,ox:e,oy:n},!0)},skew:function(t,e,n,s){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:n},!0):this.transform({skew:[t,e],ox:n,oy:s},!0)},shear:function(t,e,n){return this.transform({shear:t,ox:e,oy:n},!0)},scale:function(t,e,n,s){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:n},!0):this.transform({scale:[t,e],ox:n,oy:s},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t="both",e="center"){return-1==="xybothtrue".indexOf(t)&&(e=t,t="both"),this.transform({flip:t,origin:e},!0)},opacity:function(t){return this.attr("opacity",t)}}),ja("radius",{radius:function(t,e=t){return"radialGradient"===(this._element||this).type?this.attr("r",new Gl(t)):this.rx(t).ry(e)}}),ja("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new Sl(this.node.getPointAtLength(t))}}),ja(["Element","Runner"],{font:function(t,e){if("object"==typeof t){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}});ja("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce((function(t,e){return t[e]=function(t){return null===t?this.off(e):this.on(e,t),this},t}),{})),ja("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(fl).slice(0,-1).map((function(t){const e=t.trim().split("(");return[e[0],e[1].split(xl).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(Ol.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new Ol)},toParent:function(t,e){if(this===t)return this;const n=this.screenCTM(),s=t.screenCTM().inverse();return this.addTo(t,e).untransform().transform(s.multiply(n)),this},toRoot:function(t){return this.toParent(this.root(),t)},transform:function(t,e){if(null==t||"string"==typeof t){const e=new Ol(this).decompose();return null==t?e:e[t]}Ol.isMatrixLike(t)||(t={...t,origin:Za(t,this)});const n=new Ol(!0===e?this:e||!1).transform(t);return this.attr("transform",n)}});class tc extends Kl{flatten(t=this,e){return this.each((function(){if(this instanceof tc)return this.flatten().ungroup()})),this}ungroup(t=this.parent(),e=t.index(this)){return e=-1===e?t.children().length:e,this.each((function(n,s){return s[s.length-n-1].toParent(t,e)})),this.remove()}}rl(tc,"Container");class ec extends tc{constructor(t,e=t){super(nl("defs",t),e)}flatten(){return this}ungroup(){return this}}rl(ec,"Defs");class nc extends Kl{}function sc(t){return this.attr("rx",t)}function ic(t){return this.attr("ry",t)}function rc(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function oc(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function ac(t){return this.attr("cx",t)}function lc(t){return this.attr("cy",t)}function cc(t){return null==t?2*this.rx():this.rx(new Gl(t).divide(2))}function hc(t){return null==t?2*this.ry():this.ry(new Gl(t).divide(2))}rl(nc,"Shape");var uc={__proto__:null,rx:sc,ry:ic,x:rc,y:oc,cx:ac,cy:lc,width:cc,height:hc};class dc extends nc{constructor(t,e=t){super(nl("ellipse",t),e)}size(t,e){const n=Ga(this,t,e);return this.rx(new Gl(n.width).divide(2)).ry(new Gl(n.height).divide(2))}}cl(dc,uc),ja("Container",{ellipse:hl((function(t=0,e=t){return this.put(new dc).size(t,e).move(0,0)}))}),rl(dc,"Ellipse");class pc extends Ql{constructor(t=Qa.document.createDocumentFragment()){super(t)}xml(t,e,n){if("boolean"==typeof t&&(n=e,e=t,t=null),null==t||"function"==typeof t){const t=new Ql(tl("wrapper",n));return t.add(this.node.cloneNode(!0)),t.xml(!1,n)}return super.xml(t,!1,n)}}function mc(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new Gl(t),fy:new Gl(e)}):this.attr({x1:new Gl(t),y1:new Gl(e)})}function fc(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new Gl(t),cy:new Gl(e)}):this.attr({x2:new Gl(t),y2:new Gl(e)})}rl(pc,"Fragment");var gc,_c={__proto__:null,from:mc,to:fc};class vc extends tc{constructor(t,e){super(nl(t+"Gradient","string"==typeof t?null:t),e)}attr(t,e,n){return"transform"===t&&(t="gradientTransform"),super.attr(t,e,n)}bbox(){return new Dl}targets(){return Rl('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}cl(vc,_c),ja({Container:{gradient(...t){return this.defs().gradient(...t)}},Defs:{gradient:hl((function(t,e){return this.put(new vc(t)).update(e)}))}}),rl(vc,"Gradient");class yc extends tc{constructor(t,e=t){super(nl("pattern",t),e)}attr(t,e,n){return"transform"===t&&(t="patternTransform"),super.attr(t,e,n)}bbox(){return new Dl}targets(){return Rl('svg [fill*="'+this.id()+'"]')}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return'url("#'+this.id()+'")'}}ja({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:hl((function(t,e,n){return this.put(new yc).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),rl(yc,"Pattern");class bc extends nc{constructor(t,e=t){super(nl("image",t),e)}load(t,e){if(!t)return this;const n=new Qa.window.Image;return Wl(n,"load",(function(t){const s=this.parent(yc);0===this.width()&&0===this.height()&&this.size(n.width,n.height),s instanceof yc&&0===s.width()&&0===s.height()&&s.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),Wl(n,"load error",(function(){zl(n)})),this.attr("href",n.src=t,"http://www.w3.org/1999/xlink")}}gc=function(t,e,n){return"fill"!==t&&"stroke"!==t||wl.test(e)&&(e=n.root().defs().image(e)),e instanceof bc&&(e=n.root().defs().pattern(0,0,(t=>{t.add(e)}))),e},Zl.push(gc),ja({Container:{image:hl((function(t,e){return this.put(new bc).size(0,0).load(t,e)}))}}),rl(bc,"Image");class wc extends Xl{bbox(){let t=-1/0,e=-1/0,n=1/0,s=1/0;return this.forEach((function(i){t=Math.max(i[0],t),e=Math.max(i[1],e),n=Math.min(i[0],n),s=Math.min(i[1],s)})),new Dl(n,s,t-n,e-s)}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+t,this[n][1]+e];return this}parse(t=[0,0]){const e=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(xl).map(parseFloat)).length%2!=0&&t.pop();for(let n=0,s=t.length;n<s;n+=2)e.push([t[n],t[n+1]]);return e}size(t,e){let n;const s=this.bbox();for(n=this.length-1;n>=0;n--)s.width&&(this[n][0]=(this[n][0]-s.x)*t/s.width+s.x),s.height&&(this[n][1]=(this[n][1]-s.y)*e/s.height+s.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,n=this.length;e<n;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){Ol.isMatrixLike(t)||(t=new Ol(t));for(let e=this.length;e--;){const[n,s]=this[e];this[e][0]=t.a*n+t.c*s+t.e,this[e][1]=t.b*n+t.d*s+t.f}return this}}var xc={__proto__:null,MorphArray:wc,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){const e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){const e=this.bbox();return null==t?e.height:this.size(e.width,t)}};class Tc extends nc{constructor(t,e=t){super(nl("line",t),e)}array(){return new wc([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,e){return this.attr(this.array().move(t,e).toLine())}plot(t,e,n,s){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:s}:new wc(t).toLine(),this.attr(t))}size(t,e){const n=Ga(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}cl(Tc,xc),ja({Container:{line:hl((function(...t){return Tc.prototype.plot.apply(this.put(new Tc),null!=t[0]?t:[0,0,0,0])}))}}),rl(Tc,"Line");class Ec extends tc{constructor(t,e=t){super(nl("marker",t),e)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,e){return this.attr("refX",t).attr("refY",e)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}function Cc(t,e){return function(n){return null==n?this[t]:(this[t]=n,e&&e.call(this),this)}}ja({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:hl((function(t,e,n){return this.put(new Ec).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}))},marker:{marker(t,e,n,s){let i=["marker"];return"all"!==t&&i.push(t),i=i.join("-"),t=arguments[1]instanceof Ec?arguments[1]:this.defs().marker(e,n,s),this.attr(i,t)}}}),rl(Ec,"Marker");const Ac={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,n,s){return function(i){return i<0?t>0?e/t*i:n>0?s/n*i:0:i>1?n<1?(1-s)/(1-n)*i+(s-n)/(1-n):t<1?(1-e)/(1-t)*i+(e-t)/(1-t):1:3*i*(1-i)**2*e+3*i**2*(1-i)*s+i**3}},steps:function(t,e="end"){e=e.split("-").reverse()[0];let n=t;return"none"===e?--n:"both"===e&&++n,(s,i=!1)=>{let r=Math.floor(s*t);const o=s*r%1==0;return"start"!==e&&"both"!==e||++r,i&&o&&--r,s>=0&&r<0&&(r=0),s<=1&&r>n&&(r=n),r/n}}};class kc{done(){return!1}}class Sc extends kc{constructor(t=Yl.ease){super(),this.ease=Ac[t]||t}step(t,e,n){return"number"!=typeof t?n<1?t:e:t+(e-t)*this.ease(n)}}class Mc extends kc{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,n,s){return this.stepper(t,e,n,s)}}function Oc(){const t=(this._duration||500)/1e3,e=this._overshoot||0,n=Math.PI,s=Math.log(e/100+1e-10),i=-s/Math.sqrt(n*n+s*s),r=3.9/(i*t);this.d=2*i*r,this.k=r*r}cl(class extends Mc{constructor(t=500,e=0){super(),this.duration(t).overshoot(e)}step(t,e,n,s){if("string"==typeof t)return t;if(s.done=n===1/0,n===1/0)return e;if(0===n)return t;n>100&&(n=16),n/=1e3;const i=s.velocity||0,r=-this.d*i-this.k*(t-e),o=t+i*n+r*n*n/2;return s.velocity=i+r*n,s.done=Math.abs(e-o)+Math.abs(i)<.002,s.done?e:o}},{duration:Cc("_duration",Oc),overshoot:Cc("_overshoot",Oc)});cl(class extends Mc{constructor(t=.1,e=.01,n=0,s=1e3){super(),this.p(t).i(e).d(n).windup(s)}step(t,e,n,s){if("string"==typeof t)return t;if(s.done=n===1/0,n===1/0)return e;if(0===n)return t;const i=e-t;let r=(s.integral||0)+i*n;const o=(i-(s.error||0))/n,a=this._windup;return!1!==a&&(r=Math.max(-a,Math.min(r,a))),s.error=i,s.integral=r,s.done=Math.abs(i)<.001,s.done?e:t+(this.P*i+this.I*r+this.D*o)}},{windup:Cc("_windup"),p:Cc("P"),i:Cc("I"),d:Cc("D")});const Ic={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Lc={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},Dc="mlhvqtcsaz".split("");for(let t=0,e=Dc.length;t<e;++t)Lc[Dc[t]]=function(t){return function(e,n,s){if("H"===t)e[0]=e[0]+n.x;else if("V"===t)e[0]=e[0]+n.y;else if("A"===t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(let t=0,s=e.length;t<s;++t)e[t]=e[t]+(t%2?n.y:n.x);return Lc[t](e,n,s)}}(Dc[t].toUpperCase());function Nc(t){return t.segment.length&&t.segment.length-1===Ic[t.segment[0].toUpperCase()]}function Pc(t,e){t.inNumber&&Bc(t,!1);const n=Tl.test(e);if(n)t.segment=[e];else{const e=t.lastCommand,n=e.toLowerCase(),s=e===n;t.segment=["m"===n?s?"l":"L":e]}return t.inSegment=!0,t.lastCommand=t.segment[0],n}function Bc(t,e){if(!t.inNumber)throw new Error("Parser Error");t.number&&t.segment.push(parseFloat(t.number)),t.inNumber=e,t.number="",t.pointSeen=!1,t.hasExponent=!1,Nc(t)&&Rc(t)}function Rc(t){t.inSegment=!1,t.absolute&&(t.segment=function(t){const e=t.segment[0];return Lc[e](t.segment.slice(1),t.p,t.p0)}(t)),t.segments.push(t.segment)}function Vc(t){if(!t.segment.length)return!1;const e="A"===t.segment[0].toUpperCase(),n=t.segment.length;return e&&(4===n||5===n)}function qc(t){return"E"===t.lastToken.toUpperCase()}class jc extends Xl{bbox(){return Il().path.setAttribute("d",this.toString()),new Dl(Il.nodes.path.getBBox())}move(t,e){const n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(let n,s=this.length-1;s>=0;s--)n=this[s][0],"M"===n||"L"===n||"T"===n?(this[s][1]+=t,this[s][2]+=e):"H"===n?this[s][1]+=t:"V"===n?this[s][1]+=e:"C"===n||"S"===n||"Q"===n?(this[s][1]+=t,this[s][2]+=e,this[s][3]+=t,this[s][4]+=e,"C"===n&&(this[s][5]+=t,this[s][6]+=e)):"A"===n&&(this[s][6]+=t,this[s][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(t,e=!0){let n=0,s="";const i={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new Sl,p:new Sl};for(;i.lastToken=s,s=t.charAt(n++);)if(i.inSegment||!Pc(i,s))if("."!==s)if(isNaN(parseInt(s)))if(" "!==s&&","!==s)if("-"!==s)if("E"!==s.toUpperCase()){if(Tl.test(s)){if(i.inNumber)Bc(i,!1);else{if(!Nc(i))throw new Error("parser Error");Rc(i)}--n}}else i.number+=s,i.hasExponent=!0;else{if(i.inNumber&&!qc(i)){Bc(i,!1),--n;continue}i.number+=s,i.inNumber=!0}else i.inNumber&&Bc(i,!1);else{if("0"===i.number||Vc(i)){i.inNumber=!0,i.number=s,Bc(i,!0);continue}i.inNumber=!0,i.number+=s}else{if(i.pointSeen||i.hasExponent){Bc(i,!1),--n;continue}i.inNumber=!0,i.pointSeen=!0,i.number+=s}return i.inNumber&&Bc(i,!1),i.inSegment&&Nc(i)&&Rc(i),i.segments}(t)}size(t,e){const n=this.bbox();let s,i;for(n.width=0===n.width?1:n.width,n.height=0===n.height?1:n.height,s=this.length-1;s>=0;s--)i=this[s][0],"M"===i||"L"===i||"T"===i?(this[s][1]=(this[s][1]-n.x)*t/n.width+n.x,this[s][2]=(this[s][2]-n.y)*e/n.height+n.y):"H"===i?this[s][1]=(this[s][1]-n.x)*t/n.width+n.x:"V"===i?this[s][1]=(this[s][1]-n.y)*e/n.height+n.y:"C"===i||"S"===i||"Q"===i?(this[s][1]=(this[s][1]-n.x)*t/n.width+n.x,this[s][2]=(this[s][2]-n.y)*e/n.height+n.y,this[s][3]=(this[s][3]-n.x)*t/n.width+n.x,this[s][4]=(this[s][4]-n.y)*e/n.height+n.y,"C"===i&&(this[s][5]=(this[s][5]-n.x)*t/n.width+n.x,this[s][6]=(this[s][6]-n.y)*e/n.height+n.y)):"A"===i&&(this[s][1]=this[s][1]*t/n.width,this[s][2]=this[s][2]*e/n.height,this[s][6]=(this[s][6]-n.x)*t/n.width+n.x,this[s][7]=(this[s][7]-n.y)*e/n.height+n.y);return this}toString(){return function(t){let e="";for(let n=0,s=t.length;n<s;n++)e+=t[n][0],null!=t[n][1]&&(e+=t[n][1],null!=t[n][2]&&(e+=" ",e+=t[n][2],null!=t[n][3]&&(e+=" ",e+=t[n][3],e+=" ",e+=t[n][4],null!=t[n][5]&&(e+=" ",e+=t[n][5],e+=" ",e+=t[n][6],null!=t[n][7]&&(e+=" ",e+=t[n][7])))));return e+" "}(this)}}const Fc=t=>{const e=typeof t;return"number"===e?Gl:"string"===e?kl.isColor(t)?kl:xl.test(t)?Tl.test(t)?jc:Xl:ul.test(t)?Gl:zc:$c.indexOf(t.constructor)>-1?t.constructor:Array.isArray(t)?Xl:"object"===e?Yc:zc};class Wc{constructor(t){this._stepper=t||new Sc("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}from(t){return null==t?this._from:(this._from=this._set(t),this)}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){this._type||this.type(Fc(t));let e=new this._type(t);return this._type===kl&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===Yc&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map((function(t){return t.done=!0,t})),e}}class zc{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class Hc{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,Hc.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}Hc.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Uc=(t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0;class Yc{constructor(...t){this.init(...t)}align(t){const e=this.values;for(let n=0,s=e.length;n<s;++n){if(e[n+1]===t[n+1]){if(e[n+1]===kl&&t[n+7]!==e[n+7]){const e=t[n+7],s=new kl(this.values.splice(n+3,5))[e]().toArray();this.values.splice(n+3,0,...s)}n+=e[n+2]+2;continue}if(!t[n+1])return this;const s=(new t[n+1]).toArray(),i=e[n+2]+3;e.splice(n,i,t[n],t[n+1],t[n+2],...s),n+=e[n+2]+2}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};const e=[];for(const n in t){const s=Fc(t[n]),i=new s(t[n]).toArray();e.push([n,s,i.length,...i])}return e.sort(Uc),this.values=e.reduce(((t,e)=>t.concat(e)),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const n=e.shift(),s=e.shift(),i=e.shift(),r=e.splice(0,i);t[n]=new s(r)}return t}}const $c=[zc,Hc,Yc];class Xc extends nc{constructor(t,e=t){super(nl("path",t),e)}array(){return this._array||(this._array=new jc(this.attr("d")))}clear(){return delete this._array,this}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new jc(t))}size(t,e){const n=Ga(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}}Xc.prototype.MorphArray=jc,ja({Container:{path:hl((function(t){return this.put(new Xc).plot(t||new jc)}))}}),rl(Xc,"Path");var Gc={__proto__:null,array:function(){return this._array||(this._array=new wc(this.attr("points")))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new wc(t))},size:function(t,e){const n=Ga(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}};class Zc extends nc{constructor(t,e=t){super(nl("polygon",t),e)}}ja({Container:{polygon:hl((function(t){return this.put(new Zc).plot(t||new wc)}))}}),cl(Zc,xc),cl(Zc,Gc),rl(Zc,"Polygon");class Qc extends nc{constructor(t,e=t){super(nl("polyline",t),e)}}ja({Container:{polyline:hl((function(t){return this.put(new Qc).plot(t||new wc)}))}}),cl(Qc,xc),cl(Qc,Gc),rl(Qc,"Polyline");class Kc extends nc{constructor(t,e=t){super(nl("rect",t),e)}}cl(Kc,{rx:sc,ry:ic}),ja({Container:{rect:hl((function(t,e){return this.put(new Kc).size(t,e)}))}}),rl(Kc,"Rect");class Jc{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=void 0!==t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const th={nextDraw:null,frames:new Jc,timeouts:new Jc,immediates:new Jc,timer:()=>Qa.window.performance||Qa.window.Date,transforms:[],frame(t){const e=th.frames.push({run:t});return null===th.nextDraw&&(th.nextDraw=Qa.window.requestAnimationFrame(th._draw)),e},timeout(t,e){e=e||0;const n=th.timer().now()+e,s=th.timeouts.push({run:t,time:n});return null===th.nextDraw&&(th.nextDraw=Qa.window.requestAnimationFrame(th._draw)),s},immediate(t){const e=th.immediates.push(t);return null===th.nextDraw&&(th.nextDraw=Qa.window.requestAnimationFrame(th._draw)),e},cancelFrame(t){null!=t&&th.frames.remove(t)},clearTimeout(t){null!=t&&th.timeouts.remove(t)},cancelImmediate(t){null!=t&&th.immediates.remove(t)},_draw(t){let e=null;const n=th.timeouts.last();for(;(e=th.timeouts.shift())&&(t>=e.time?e.run():th.timeouts.push(e),e!==n););let s=null;const i=th.frames.last();for(;s!==i&&(s=th.frames.shift());)s.run(t);let r=null;for(;r=th.immediates.shift();)r();th.nextDraw=th.timeouts.first()||th.frames.first()?Qa.window.requestAnimationFrame(th._draw):null}},eh=function(t){const e=t.start,n=t.runner.duration();return{start:e,duration:n,end:e+n,runner:t.runner}},nh=function(){const t=Qa.window;return(t.performance||t.Date).now()};class sh extends Hl{constructor(t=nh){super(),this._timeSource=t,this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map((t=>t.start+t.runner.duration()));return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return null==t?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(null==t)return this.speed(-e);const n=Math.abs(e);return this.speed(t?-n:n)}schedule(t,e,n){if(null==t)return this._runners.map(eh);let s=0;const i=this.getEndTime();if(e=e||0,null==n||"last"===n||"after"===n)s=i;else if("absolute"===n||"start"===n)s=e,e=0;else if("now"===n)s=this._time;else if("relative"===n){const n=this.getRunnerInfoById(t.id);n&&(s=n.start+e,e=0)}else{if("with-last"!==n)throw new Error('Invalid value for the "when" parameter');{const t=this.getLastRunnerInfo();s=t?t.start:this._time}}t.unschedule(),t.timeline(this);const r=t.persist(),o={persist:null===r?this._persist:r,start:s+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(o),this._runners.sort(((t,e)=>t.start-e.start)),this._runnerIds=this._runners.map((t=>t.runner.id)),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}speed(t){return null==t?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return th.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=th.frame(this._step)),this)}_stepFn(t=!1){const e=this._timeSource();let n=e-this._lastSourceTime;t&&(n=0);const s=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=s,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let t=this._runners.length;t--;){const e=this._runners[t],n=e.runner;this._time-e.start<=0&&n.reset()}let i=!1;for(let t=0,e=this._runners.length;t<e;t++){const n=this._runners[t],r=n.runner;let o=s;const a=this._time-n.start;if(a<=0){i=!0;continue}if(a<o&&(o=a),!r.active())continue;if(r.step(o).done){if(!0!==n.persist){r.duration()-r.time()+this._time+n.persist<this._time&&(r.unschedule(),--t,--e)}}else i=!0}return i&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}}ja({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new sh,this._timeline):(this._timeline=t,this)}}});class ih extends Hl{constructor(t){super(),this.id=ih.id++,t="function"==typeof(t=null==t?Yl.duration:t)?new Mc(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof t&&t,this._isDeclarative=t instanceof Mc,this._stepper=this._isDeclarative?t:new Sc,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new Ol,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,e,n){let s=1,i=!1,r=0;return e=e||Yl.delay,n=n||"last","object"!=typeof(t=t||Yl.duration)||t instanceof kc||(e=t.delay||e,n=t.when||n,i=t.swing||i,s=t.times||s,r=t.wait||r,t=t.duration||Yl.duration),{duration:t,delay:e,swing:i,times:s,wait:r,when:n}}active(t){return null==t?this.enabled:(this.enabled=t,this)}addTransform(t,e){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,e,n){const s=ih.sanitise(t,e,n),i=new ih(s.duration);return this._timeline&&i.timeline(this._timeline),this._element&&i.element(this._element),i.loop(s).schedule(s.delay,s.when)}clearTransform(){return this.transforms=new Ol,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((t=>!t.isTransform)))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new Sc(t),this}element(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,e,n){return"object"==typeof t&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}loops(t){const e=this._duration+this._wait;if(null==t){const t=Math.floor(this._time/e),n=(this._time-t*e)/this._duration;return Math.min(t+n,this._times)}const n=t%1,s=e*Math.floor(t)+this._duration*n;return this.time(s)}persist(t){return null==t?this._persist:(this._persist=t,this)}position(t){const e=this._time,n=this._duration,s=this._wait,i=this._times,r=this._swing,o=this._reverse;let a;if(null==t){const t=function(t){const e=r*Math.floor(t%(2*(s+n))/(s+n)),i=e&&!o||!e&&o,a=Math.pow(-1,i)*(t%(s+n))/n+i;return Math.max(Math.min(a,1),0)},l=i*(s+n)-s;return a=e<=0?Math.round(t(1e-5)):e<l?t(e):Math.round(t(l-1e-5)),a}const l=Math.floor(this.loops()),c=r&&l%2==0;return a=l+(c&&!o||o&&c?t:1-t),this.loops(a)}progress(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,e,n,s){this._queue.push({initialiser:t||Ul,runner:e||Ul,retarget:n,isTransform:s,initialised:!1,finished:!1});return this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=null==t?!this._reverse:t,this}schedule(t,e,n){if(t instanceof sh||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}step(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;const e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;const s=this.duration(),i=this._lastTime<=0&&this._time>0,r=this._lastTime<s&&this._time>=s;this._lastTime=this._time,i&&this.fire("start",this);const o=this._isDeclarative;this.done=!o&&!r&&this._time>=s,this._reseted=!1;let a=!1;return(n||o)&&(this._initialise(n),this.transforms=new Ol,a=this._run(o?t:e),this.fire("step",this)),this.done=this.done||a&&o,r&&this.fire("finished",this),this}time(t){if(null==t)return this._time;const e=t-this._time;return this.step(e),this}timeline(t){return void 0===t?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let e=0,n=this._queue.length;e<n;++e){const n=this._queue[e],s=this._isDeclarative||!n.initialised&&t;t=!n.finished,s&&t&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){const t=this.timeline();t&&t.play()}}_run(t){let e=!0;for(let n=0,s=this._queue.length;n<s;++n){const s=this._queue[n],i=s.runner.call(this,t);s.finished=s.finished||!0===i,e=e&&s.finished}return e}_tryRetarget(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){const e=this._queue.indexOf(this._history[t].caller);return this._queue.splice(e,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;const s=this.timeline();return s&&s.play(),!0}return!1}}ih.id=0;class rh{constructor(t=new Ol,e=-1,n=!0){this.transforms=t,this.id=e,this.done=n}clearTransformsFromQueue(){}}cl([ih,rh],{mergeWith(t){return new rh(t.transforms.lmultiply(this.transforms),t.id)}});const oh=(t,e)=>t.lmultiplyO(e),ah=t=>t.transforms;function lh(){const t=this._transformationRunners.runners.map(ah).reduce(oh,new Ol);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class ch{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new rh).forEach((t=>t.clearTransformsFromQueue())),this}edit(t,e){const n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const n=this.runners[e];if(t&&n.done&&t.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(n.id);const s=n.mergeWith(t);this.edit(t.id,s),t=s,--e}else t=n}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}ja({Element:{animate(t,e,n){const s=ih.sanitise(t,e,n),i=this.timeline();return new ih(s.duration).loop(s).element(this).timeline(i.play()).schedule(s.delay,s.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(t){return this._transformationRunners.runners.filter((e=>e.id<=t.id)).map(ah).reduce(oh,new Ol)},_addRunner(t){this._transformationRunners.add(t),th.cancelImmediate(this._frameId),this._frameId=th.immediate(lh.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new ch).add(new rh(new Ol(this))))}}});cl(ih,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(t,e,n){if("string"==typeof e)return this.styleAttr(t,{[e]:n});let s=e;if(this._tryRetarget(t,s))return this;let i=new Wc(this._stepper).to(s),r=Object.keys(s);return this.queue((function(){i=i.from(this.element()[t](r))}),(function(e){return this.element()[t](i.at(e).valueOf()),i.done()}),(function(e){const n=Object.keys(e),o=(a=r,n.filter((t=>!a.includes(t))));var a;if(o.length){const e=this.element()[t](o),n=new Yc(i.from()).valueOf();Object.assign(n,e),i.from(n)}const l=new Yc(i.to()).valueOf();Object.assign(l,e),i.to(l),r=n,s=e})),this._rememberMorpher(t,i),this},zoom(t,e){if(this._tryRetarget("zoom",t,e))return this;let n=new Wc(this._stepper).to(new Gl(t));return this.queue((function(){n=n.from(this.element().zoom())}),(function(t){return this.element().zoom(n.at(t),e),n.done()}),(function(t,s){e=s,n.to(t)})),this._rememberMorpher("zoom",n),this},transform(t,e,n){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;const s=Ol.isMatrixLike(t);n=null!=t.affine?t.affine:null!=n?n:!s;const i=new Wc(this._stepper).type(n?Hc:Ol);let r,o,a,l,c;return this.queue((function(){o=o||this.element(),r=r||Za(t,o),c=new Ol(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(h){e||this.clearTransform();const{x:u,y:d}=new Sl(r).transform(o._currentTransform(this));let p=new Ol({...t,origin:[u,d]}),m=this._isDeclarative&&a?a:c;if(n){p=p.decompose(u,d),m=m.decompose(u,d);const t=p.rotate,e=m.rotate,n=[t-360,t,t+360],s=n.map((t=>Math.abs(t-e))),i=Math.min(...s),r=s.indexOf(i);p.rotate=n[r]}e&&(s||(p.rotate=t.rotate||0),this._isDeclarative&&l&&(m.rotate=l)),i.from(m),i.to(p);const f=i.at(h);return l=f.rotate,a=new Ol(f),this.addTransform(a),o._addRunner(this),i.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(r=Za(e,o)),t={...e,origin:r}}),!0),this._isDeclarative&&this._rememberMorpher("transform",i),this},x(t,e){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(t,e){if(e=new Gl(e),this._tryRetarget(t,e))return this;const n=new Wc(this._stepper).to(e);let s=null;return this.queue((function(){s=this.element()[t](),n.from(s),n.to(s+e)}),(function(e){return this.element()[t](n.at(e)),n.done()}),(function(t){n.to(s+new Gl(t))})),this._rememberMorpher(t,n),this},_queueObject(t,e){if(this._tryRetarget(t,e))return this;const n=new Wc(this._stepper).to(e);return this.queue((function(){n.from(this.element()[t]())}),(function(e){return this.element()[t](n.at(e)),n.done()})),this._rememberMorpher(t,n),this},_queueNumber(t,e){return this._queueObject(t,new Gl(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){let n;return t&&e||(n=this._element.bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,n,s){if(4===arguments.length)return this.plot([t,e,n,s]);if(this._tryRetarget("plot",t))return this;const i=new Wc(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){i.from(this._element.array())}),(function(t){return this._element.plot(i.at(t)),i.done()})),this._rememberMorpher("plot",i),this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,n,s){return this._queueObject("viewbox",new Dl(t,e,n,s))},update(t){return"object"!=typeof t?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),cl(ih,{rx:sc,ry:ic,from:mc,to:fc}),rl(ih,"Runner");class hh extends tc{constructor(t,e=t){super(nl("svg",t),e),this.namespace()}defs(){return this.isRoot()?sl(this.node.querySelector("defs"))||this.put(new ec):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof Qa.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:"http://www.w3.org/2000/svg",version:"1.1"}).attr("xmlns:xlink","http://www.w3.org/1999/xlink","http://www.w3.org/2000/xmlns/").attr("xmlns:svgjs","http://svgjs.dev/svgjs","http://www.w3.org/2000/xmlns/"):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,"http://www.w3.org/2000/xmlns/").attr("xmlns:svgjs",null,"http://www.w3.org/2000/xmlns/")}root(){return this.isRoot()?this:super.root()}}ja({Container:{nested:hl((function(){return this.put(new hh)}))}}),rl(hh,"Svg",!0);class uh extends tc{constructor(t,e=t){super(nl("symbol",t),e)}}ja({Container:{symbol:hl((function(){return this.put(new uh)}))}}),rl(uh,"Symbol");var dh={__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(Qa.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()},x:function(t,e=this.bbox()){return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)},y:function(t,e=this.bbox()){return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)},move:function(t,e,n=this.bbox()){return this.x(t,n).y(e,n)},cx:function(t,e=this.bbox()){return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)},cy:function(t,e=this.bbox()){return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)},center:function(t,e,n=this.bbox()){return this.cx(t,n).cy(e,n)},ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)},build:function(t){return this._build=!!t,this}};class ph extends nc{constructor(t,e=t){super(nl("text",t),e),this.dom.leading=new Gl(1.3),this._rebuild=!0,this._build=!1}leading(t){return null==t?this.dom.leading:(this.dom.leading=new Gl(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){const t=this;let e=0;const n=this.dom.leading;this.each((function(s){const i=Qa.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=n*new Gl(i);this.dom.newLined&&(this.attr("x",t.attr("x")),"\n"===this.text()?e+=r:(this.attr("dy",s?r+e:0),e=0))})),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new Gl(t.leading||1.3),this}text(t){if(void 0===t){const e=this.node.childNodes;let n=0;t="";for(let s=0,i=e.length;s<i;++s)"textPath"!==e[s].nodeName?(s!==n&&3!==e[s].nodeType&&!0===sl(e[s]).dom.newLined&&(t+="\n"),t+=e[s].textContent):0===s&&(n=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(let e=0,n=(t=(t+"").split("\n")).length;e<n;e++)this.newLine(t[e]);return this.build(!1).rebuild()}}cl(ph,dh),ja({Container:{text:hl((function(t=""){return this.put(new ph).text(t)})),plain:hl((function(t=""){return this.put(new ph).plain(t)}))}}),rl(ph,"Text");class mh extends nc{constructor(t,e=t){super(nl("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof ph))return this;const e=t.index(this),n=Qa.window.getComputedStyle(this.node).getPropertyValue("font-size"),s=t.dom.leading*new Gl(n);return this.dy(e?s:0).attr("x",t.x())}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}cl(mh,dh),ja({Tspan:{tspan:hl((function(t=""){const e=new mh;return this._build||this.clear(),this.put(e).text(t)}))},Text:{newLine:function(t=""){return this.tspan(t).newLine()}}}),rl(mh,"Tspan");class fh extends nc{constructor(t,e=t){super(nl("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new Gl(t).divide(2))}}cl(fh,{x:rc,y:oc,cx:ac,cy:lc,width:cc,height:hc}),ja({Container:{circle:hl((function(t=0){return this.put(new fh).size(t).move(0,0)}))}}),rl(fh,"Circle");class gh extends tc{constructor(t,e=t){super(nl("clipPath",t),e)}remove(){return this.targets().forEach((function(t){t.unclip()})),super.remove()}targets(){return Rl('svg [clip-path*="'+this.id()+'"]')}}ja({Container:{clip:hl((function(){return this.defs().put(new gh)}))},Element:{clipper(){return this.reference("clip-path")},clipWith(t){const e=t instanceof gh?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip(){return this.attr("clip-path",null)}}}),rl(gh,"ClipPath");class _h extends Kl{constructor(t,e=t){super(nl("foreignObject",t),e)}}ja({Container:{foreignObject:hl((function(t,e){return this.put(new _h).size(t,e)}))}}),rl(_h,"ForeignObject");var vh={__proto__:null,dmove:function(t,e){return this.children().forEach(((n,s)=>{let i;try{i=n.bbox()}catch(t){return}const r=new Ol(n),o=r.translate(t,e).transform(r.inverse()),a=new Sl(i.x,i.y).transform(o);n.move(a.x,a.y)})),this},dx:function(t){return this.dmove(t,0)},dy:function(t){return this.dmove(0,t)},height:function(t,e=this.bbox()){return null==t?e.height:this.size(e.width,t,e)},move:function(t=0,e=0,n=this.bbox()){const s=t-n.x,i=e-n.y;return this.dmove(s,i)},size:function(t,e,n=this.bbox()){const s=Ga(this,t,e,n),i=s.width/n.width,r=s.height/n.height;return this.children().forEach(((t,e)=>{const s=new Sl(n).transform(new Ol(t).inverse());t.scale(i,r,s.x,s.y)})),this},width:function(t,e=this.bbox()){return null==t?e.width:this.size(t,e.height,e)},x:function(t,e=this.bbox()){return null==t?e.x:this.move(t,e.y,e)},y:function(t,e=this.bbox()){return null==t?e.y:this.move(e.x,t,e)}};class yh extends tc{constructor(t,e=t){super(nl("g",t),e)}}cl(yh,vh),ja({Container:{group:hl((function(){return this.put(new yh)}))}}),rl(yh,"G");class bh extends tc{constructor(t,e=t){super(nl("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,"http://www.w3.org/1999/xlink")}}cl(bh,vh),ja({Container:{link:hl((function(t){return this.put(new bh).to(t)}))},Element:{unlink(){const t=this.linker();if(!t)return this;const e=t.parent();if(!e)return this.remove();const n=e.index(t);return e.add(this,n),t.remove(),this},linkTo(t){let e=this.linker();return e||(e=new bh,this.wrap(e)),"function"==typeof t?t.call(e,e):e.to(t),this},linker(){const t=this.parent();return t&&"a"===t.node.nodeName.toLowerCase()?t:null}}}),rl(bh,"A");class wh extends tc{constructor(t,e=t){super(nl("mask",t),e)}remove(){return this.targets().forEach((function(t){t.unmask()})),super.remove()}targets(){return Rl('svg [mask*="'+this.id()+'"]')}}ja({Container:{mask:hl((function(){return this.defs().put(new wh)}))},Element:{masker(){return this.reference("mask")},maskWith(t){const e=t instanceof wh?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask(){return this.attr("mask",null)}}}),rl(wh,"Mask");class xh extends Kl{constructor(t,e=t){super(nl("stop",t),e)}update(t){return("number"==typeof t||t instanceof Gl)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new Gl(t.offset)),this}}ja({Gradient:{stop:function(t,e,n){return this.put(new xh).update(t,e,n)}}}),rl(xh,"Stop");class Th extends Kl{constructor(t,e=t){super(nl("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,n={}){return this.rule("@font-face",{fontFamily:t,src:e,...n})}rule(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;let n=t+"{";for(const t in e)n+=$a(t)+":"+e[t]+";";return n+="}",n}(t,e))}}ja("Dom",{style(t,e){return this.put(new Th).rule(t,e)},fontface(t,e,n){return this.put(new Th).font(t,e,n)}}),rl(Th,"Style");class Eh extends ph{constructor(t,e=t){super(nl("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let n=null;return e&&(n=e.plot(t)),null==t?n:this}track(){return this.reference("href")}}ja({Container:{textPath:hl((function(t,e){return t instanceof ph||(t=this.text(t)),t.path(e)}))},Text:{path:hl((function(t,e=!0){const n=new Eh;let s;if(t instanceof Xc||(t=this.defs().path(t)),n.attr("href","#"+t,"http://www.w3.org/1999/xlink"),e)for(;s=this.node.firstChild;)n.node.appendChild(s);return this.put(n)})),textPath(){return this.findOne("textPath")}},Path:{text:hl((function(t){return t instanceof ph||(t=(new ph).addTo(this.parent()).text(t)),t.path(this)})),targets(){return Rl("svg textPath").filter((t=>(t.attr("href")||"").includes(this.id())))}}}),Eh.prototype.MorphArray=jc,rl(Eh,"TextPath");class Ch extends nc{constructor(t,e=t){super(nl("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,"http://www.w3.org/1999/xlink")}}ja({Container:{use:hl((function(t,e){return this.put(new Ch).use(t,e)}))}}),rl(Ch,"Use");const Ah=el;cl([hh,uh,bc,yc,Ec],Fa("viewbox")),cl([Tc,Qc,Zc,Xc],Fa("marker")),cl(ph,Fa("Text")),cl(Xc,Fa("Path")),cl(ec,Fa("Defs")),cl([ph,mh],Fa("Tspan")),cl([Kc,dc,vc,ih],Fa("radius")),cl(Hl,Fa("EventTarget")),cl(Ql,Fa("Dom")),cl(Kl,Fa("Element")),cl(nc,Fa("Shape")),cl([tc,pc],Fa("Container")),cl(vc,Fa("Gradient")),cl(ih,Fa("Runner")),Pl.extend([...new Set(qa)]),function(t=[]){$c.push(...[].concat(t))}([Gl,kl,Dl,Ol,Xl,wc,jc,Sl]),cl($c,{to(t){return(new Wc).type(this.constructor).from(this.toArray()).to(t)},fromArray(t){return this.init(t),this},toConsumable(){return this.toArray()},morph(t,e,n,s,i){return this.fromArray(t.map((function(t,r){return s.step(t,e[r],n,i[r],i)})))}});var kh={};e(kh,"popperGenerator",(()=>nd)),e(kh,"detectOverflow",(()=>zu)),e(kh,"createPopperBase",(()=>sd)),e(kh,"createPopper",(()=>id)),e(kh,"createPopperLite",(()=>rd));var Sh={};e(Sh,"top",(()=>Mh)),e(Sh,"bottom",(()=>Oh)),e(Sh,"right",(()=>Ih)),e(Sh,"left",(()=>Lh)),e(Sh,"auto",(()=>Dh)),e(Sh,"basePlacements",(()=>Nh)),e(Sh,"start",(()=>Ph)),e(Sh,"end",(()=>Bh)),e(Sh,"clippingParents",(()=>Rh)),e(Sh,"viewport",(()=>Vh)),e(Sh,"popper",(()=>qh)),e(Sh,"reference",(()=>jh)),e(Sh,"variationPlacements",(()=>Fh)),e(Sh,"placements",(()=>Wh)),e(Sh,"beforeRead",(()=>zh)),e(Sh,"read",(()=>Hh)),e(Sh,"afterRead",(()=>Uh)),e(Sh,"beforeMain",(()=>Yh)),e(Sh,"main",(()=>$h)),e(Sh,"afterMain",(()=>Xh)),e(Sh,"beforeWrite",(()=>Gh)),e(Sh,"write",(()=>Zh)),e(Sh,"afterWrite",(()=>Qh)),e(Sh,"modifierPhases",(()=>Kh));var Mh="top",Oh="bottom",Ih="right",Lh="left",Dh="auto",Nh=[Mh,Oh,Ih,Lh],Ph="start",Bh="end",Rh="clippingParents",Vh="viewport",qh="popper",jh="reference",Fh=Nh.reduce((function(t,e){return t.concat([e+"-"+Ph,e+"-"+Bh])}),[]),Wh=[].concat(Nh,[Dh]).reduce((function(t,e){return t.concat([e,e+"-"+Ph,e+"-"+Bh])}),[]),zh="beforeRead",Hh="read",Uh="afterRead",Yh="beforeMain",$h="main",Xh="afterMain",Gh="beforeWrite",Zh="write",Qh="afterWrite",Kh=[zh,Hh,Uh,Yh,$h,Xh,Gh,Zh,Qh],Jh={};function tu(t){return t?(t.nodeName||"").toLowerCase():null}function eu(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function nu(t){return t instanceof eu(t).Element||t instanceof Element}function su(t){return t instanceof eu(t).HTMLElement||t instanceof HTMLElement}function iu(t){return"undefined"!=typeof ShadowRoot&&(t instanceof eu(t).ShadowRoot||t instanceof ShadowRoot)}e(Jh,"applyStyles",(()=>ru)),e(Jh,"arrow",(()=>Tu)),e(Jh,"computeStyles",(()=>ku)),e(Jh,"eventListeners",(()=>Mu)),e(Jh,"flip",(()=>Hu)),e(Jh,"hide",(()=>$u)),e(Jh,"offset",(()=>Xu)),e(Jh,"popperOffsets",(()=>Gu)),e(Jh,"preventOverflow",(()=>Zu));var ru={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},s=e.attributes[t]||{},i=e.elements[t];su(i)&&tu(i)&&(Object.assign(i.style,n),Object.keys(s).forEach((function(t){var e=s[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var s=e.elements[t],i=e.attributes[t]||{},r=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});su(s)&&tu(s)&&(Object.assign(s.style,r),Object.keys(i).forEach((function(t){s.removeAttribute(t)})))}))}},requires:["computeStyles"]};function ou(t){return t.split("-")[0]}var au=Math.max,lu=Math.min,cu=Math.round;function hu(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),s=1,i=1;if(su(t)&&e){var r=t.offsetHeight,o=t.offsetWidth;o>0&&(s=cu(n.width)/o||1),r>0&&(i=cu(n.height)/r||1)}return{width:n.width/s,height:n.height/i,top:n.top/i,right:n.right/s,bottom:n.bottom/i,left:n.left/s,x:n.left/s,y:n.top/i}}function uu(t){var e=hu(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function du(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&iu(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function pu(t){return eu(t).getComputedStyle(t)}function mu(t){return["table","td","th"].indexOf(tu(t))>=0}function fu(t){return((nu(t)?t.ownerDocument:t.document)||window.document).documentElement}function gu(t){return"html"===tu(t)?t:t.assignedSlot||t.parentNode||(iu(t)?t.host:null)||fu(t)}function _u(t){return su(t)&&"fixed"!==pu(t).position?t.offsetParent:null}function vu(t){for(var e=eu(t),n=_u(t);n&&mu(n)&&"static"===pu(n).position;)n=_u(n);return n&&("html"===tu(n)||"body"===tu(n)&&"static"===pu(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&su(t)&&"fixed"===pu(t).position)return null;for(var n=gu(t);su(n)&&["html","body"].indexOf(tu(n))<0;){var s=pu(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(t)||e}function yu(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function bu(t,e,n){return au(t,lu(e,n))}function wu(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function xu(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var Tu={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,s=t.name,i=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ou(n.placement),l=yu(a),c=[Lh,Ih].indexOf(a)>=0?"height":"width";if(r&&o){var h=function(t,e){return wu("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:xu(t,Nh))}(i.padding,n),u=uu(r),d="y"===l?Mh:Lh,p="y"===l?Oh:Ih,m=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],f=o[l]-n.rects.reference[l],g=vu(r),_=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=m/2-f/2,y=h[d],b=_-u[c]-h[p],w=_/2-u[c]/2+v,x=bu(y,w,b),T=l;n.modifiersData[s]=((e={})[T]=x,e.centerOffset=x-w,e)}},effect:function(t){var e=t.state,n=t.options.element,s=void 0===n?"[data-popper-arrow]":n;null!=s&&("string"!=typeof s||(s=e.elements.popper.querySelector(s)))&&du(e.elements.popper,s)&&(e.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Eu(t){return t.split("-")[1]}var Cu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Au(t){var e,n=t.popper,s=t.popperRect,i=t.placement,r=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,u=t.isFixed,d=o.x,p=void 0===d?0:d,m=o.y,f=void 0===m?0:m,g="function"==typeof h?h({x:p,y:f}):{x:p,y:f};p=g.x,f=g.y;var _=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),y=Lh,b=Mh,w=window;if(c){var x=vu(n),T="clientHeight",E="clientWidth";if(x===eu(n)&&"static"!==pu(x=fu(n)).position&&"absolute"===a&&(T="scrollHeight",E="scrollWidth"),i===Mh||(i===Lh||i===Ih)&&r===Bh)b=Oh,f-=(u&&w.visualViewport?w.visualViewport.height:x[T])-s.height,f*=l?1:-1;if(i===Lh||(i===Mh||i===Oh)&&r===Bh)y=Ih,p-=(u&&w.visualViewport?w.visualViewport.width:x[E])-s.width,p*=l?1:-1}var C,A=Object.assign({position:a},c&&Cu),k=!0===h?function(t){var e=t.x,n=t.y,s=window.devicePixelRatio||1;return{x:cu(e*s)/s||0,y:cu(n*s)/s||0}}({x:p,y:f}):{x:p,y:f};return p=k.x,f=k.y,l?Object.assign({},A,((C={})[b]=v?"0":"",C[y]=_?"0":"",C.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+f+"px)":"translate3d("+p+"px, "+f+"px, 0)",C)):Object.assign({},A,((e={})[b]=v?f+"px":"",e[y]=_?p+"px":"",e.transform="",e))}var ku={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,s=n.gpuAcceleration,i=void 0===s||s,r=n.adaptive,o=void 0===r||r,a=n.roundOffsets,l=void 0===a||a,c={placement:ou(e.placement),variation:Eu(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Au(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Au(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},Su={passive:!0};var Mu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,s=t.options,i=s.scroll,r=void 0===i||i,o=s.resize,a=void 0===o||o,l=eu(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach((function(t){t.addEventListener("scroll",n.update,Su)})),a&&l.addEventListener("resize",n.update,Su),function(){r&&c.forEach((function(t){t.removeEventListener("scroll",n.update,Su)})),a&&l.removeEventListener("resize",n.update,Su)}},data:{}},Ou={left:"right",right:"left",bottom:"top",top:"bottom"};function Iu(t){return t.replace(/left|right|bottom|top/g,(function(t){return Ou[t]}))}var Lu={start:"end",end:"start"};function Du(t){return t.replace(/start|end/g,(function(t){return Lu[t]}))}function Nu(t){var e=eu(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Pu(t){return hu(fu(t)).left+Nu(t).scrollLeft}function Bu(t){var e=pu(t),n=e.overflow,s=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function Ru(t){return["html","body","#document"].indexOf(tu(t))>=0?t.ownerDocument.body:su(t)&&Bu(t)?t:Ru(gu(t))}function Vu(t,e){var n;void 0===e&&(e=[]);var s=Ru(t),i=s===(null==(n=t.ownerDocument)?void 0:n.body),r=eu(s),o=i?[r].concat(r.visualViewport||[],Bu(s)?s:[]):s,a=e.concat(o);return i?a:a.concat(Vu(gu(o)))}function qu(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ju(t,e){return e===Vh?qu(function(t){var e=eu(t),n=fu(t),s=e.visualViewport,i=n.clientWidth,r=n.clientHeight,o=0,a=0;return s&&(i=s.width,r=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=s.offsetLeft,a=s.offsetTop)),{width:i,height:r,x:o+Pu(t),y:a}}(t)):nu(e)?function(t){var e=hu(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):qu(function(t){var e,n=fu(t),s=Nu(t),i=null==(e=t.ownerDocument)?void 0:e.body,r=au(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=au(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+Pu(t),l=-s.scrollTop;return"rtl"===pu(i||n).direction&&(a+=au(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}(fu(t)))}function Fu(t,e,n){var s="clippingParents"===e?function(t){var e=Vu(gu(t)),n=["absolute","fixed"].indexOf(pu(t).position)>=0&&su(t)?vu(t):t;return nu(n)?e.filter((function(t){return nu(t)&&du(t,n)&&"body"!==tu(t)})):[]}(t):[].concat(e),i=[].concat(s,[n]),r=i[0],o=i.reduce((function(e,n){var s=ju(t,n);return e.top=au(s.top,e.top),e.right=lu(s.right,e.right),e.bottom=lu(s.bottom,e.bottom),e.left=au(s.left,e.left),e}),ju(t,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Wu(t){var e,n=t.reference,s=t.element,i=t.placement,r=i?ou(i):null,o=i?Eu(i):null,a=n.x+n.width/2-s.width/2,l=n.y+n.height/2-s.height/2;switch(r){case Mh:e={x:a,y:n.y-s.height};break;case Oh:e={x:a,y:n.y+n.height};break;case Ih:e={x:n.x+n.width,y:l};break;case Lh:e={x:n.x-s.width,y:l};break;default:e={x:n.x,y:n.y}}var c=r?yu(r):null;if(null!=c){var h="y"===c?"height":"width";switch(o){case Ph:e[c]=e[c]-(n[h]/2-s[h]/2);break;case Bh:e[c]=e[c]+(n[h]/2-s[h]/2)}}return e}function zu(t,e){void 0===e&&(e={});var n=e,s=n.placement,i=void 0===s?t.placement:s,r=n.boundary,o=void 0===r?Rh:r,a=n.rootBoundary,l=void 0===a?Vh:a,c=n.elementContext,h=void 0===c?qh:c,u=n.altBoundary,d=void 0!==u&&u,p=n.padding,m=void 0===p?0:p,f=wu("number"!=typeof m?m:xu(m,Nh)),g=h===qh?jh:qh,_=t.rects.popper,v=t.elements[d?g:h],y=Fu(nu(v)?v:v.contextElement||fu(t.elements.popper),o,l),b=hu(t.elements.reference),w=Wu({reference:b,element:_,strategy:"absolute",placement:i}),x=qu(Object.assign({},_,w)),T=h===qh?x:b,E={top:y.top-T.top+f.top,bottom:T.bottom-y.bottom+f.bottom,left:y.left-T.left+f.left,right:T.right-y.right+f.right},C=t.modifiersData.offset;if(h===qh&&C){var A=C[i];Object.keys(E).forEach((function(t){var e=[Ih,Oh].indexOf(t)>=0?1:-1,n=[Mh,Oh].indexOf(t)>=0?"y":"x";E[t]+=A[n]*e}))}return E}var Hu={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var i=n.mainAxis,r=void 0===i||i,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,u=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,m=void 0===p||p,f=n.allowedAutoPlacements,g=e.options.placement,_=ou(g),v=l||(_===g||!m?[Iu(g)]:function(t){if(ou(t)===Dh)return[];var e=Iu(t);return[Du(t),e,Du(e)]}(g)),y=[g].concat(v).reduce((function(t,n){return t.concat(ou(n)===Dh?function(t,e){void 0===e&&(e={});var n=e,s=n.placement,i=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Wh:l,h=Eu(s),u=h?a?Fh:Fh.filter((function(t){return Eu(t)===h})):Nh,d=u.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=u);var p=d.reduce((function(e,n){return e[n]=zu(t,{placement:n,boundary:i,rootBoundary:r,padding:o})[ou(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:h,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:f}):n)}),[]),b=e.rects.reference,w=e.rects.popper,x=new Map,T=!0,E=y[0],C=0;C<y.length;C++){var A=y[C],k=ou(A),S=Eu(A)===Ph,M=[Mh,Oh].indexOf(k)>=0,O=M?"width":"height",I=zu(e,{placement:A,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),L=M?S?Ih:Lh:S?Oh:Mh;b[O]>w[O]&&(L=Iu(L));var D=Iu(L),N=[];if(r&&N.push(I[k]<=0),a&&N.push(I[L]<=0,I[D]<=0),N.every((function(t){return t}))){E=A,T=!1;break}x.set(A,N)}if(T)for(var P=function(t){var e=y.find((function(e){var n=x.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return E=e,"break"},B=m?3:1;B>0;B--){if("break"===P(B))break}e.placement!==E&&(e.modifiersData[s]._skip=!0,e.placement=E,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Uu(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Yu(t){return[Mh,Ih,Oh,Lh].some((function(e){return t[e]>=0}))}var $u={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,s=e.rects.reference,i=e.rects.popper,r=e.modifiersData.preventOverflow,o=zu(e,{elementContext:"reference"}),a=zu(e,{altBoundary:!0}),l=Uu(o,s),c=Uu(a,i,r),h=Yu(l),u=Yu(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}};var Xu={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,s=t.name,i=n.offset,r=void 0===i?[0,0]:i,o=Wh.reduce((function(t,n){return t[n]=function(t,e,n){var s=ou(t),i=[Lh,Mh].indexOf(s)>=0?-1:1,r="function"==typeof n?n(Object.assign({},e,{placement:t})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[Lh,Ih].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}(n,e.rects,r),t}),{}),a=o[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[s]=o}};var Gu={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Wu({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var Zu={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,s=t.name,i=n.mainAxis,r=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,u=n.padding,d=n.tether,p=void 0===d||d,m=n.tetherOffset,f=void 0===m?0:m,g=zu(e,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),_=ou(e.placement),v=Eu(e.placement),y=!v,b=yu(_),w="x"===b?"y":"x",x=e.modifiersData.popperOffsets,T=e.rects.reference,E=e.rects.popper,C="function"==typeof f?f(Object.assign({},e.rects,{placement:e.placement})):f,A="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),k=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,S={x:0,y:0};if(x){if(r){var M,O="y"===b?Mh:Lh,I="y"===b?Oh:Ih,L="y"===b?"height":"width",D=x[b],N=D+g[O],P=D-g[I],B=p?-E[L]/2:0,R=v===Ph?T[L]:E[L],V=v===Ph?-E[L]:-T[L],q=e.elements.arrow,j=p&&q?uu(q):{width:0,height:0},F=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=F[O],z=F[I],H=bu(0,T[L],j[L]),U=y?T[L]/2-B-H-W-A.mainAxis:R-H-W-A.mainAxis,Y=y?-T[L]/2+B+H+z+A.mainAxis:V+H+z+A.mainAxis,$=e.elements.arrow&&vu(e.elements.arrow),X=$?"y"===b?$.clientTop||0:$.clientLeft||0:0,G=null!=(M=null==k?void 0:k[b])?M:0,Z=D+Y-G,Q=bu(p?lu(N,D+U-G-X):N,D,p?au(P,Z):P);x[b]=Q,S[b]=Q-D}if(a){var K,J="x"===b?Mh:Lh,tt="x"===b?Oh:Ih,et=x[w],nt="y"===w?"height":"width",st=et+g[J],it=et-g[tt],rt=-1!==[Mh,Lh].indexOf(_),ot=null!=(K=null==k?void 0:k[w])?K:0,at=rt?st:et-T[nt]-E[nt]-ot+A.altAxis,lt=rt?et+T[nt]+E[nt]-ot-A.altAxis:it,ct=p&&rt?function(t,e,n){var s=bu(t,e,n);return s>n?n:s}(at,et,lt):bu(p?at:st,et,p?lt:it);x[w]=ct,S[w]=ct-et}e.modifiersData[s]=S}},requiresIfExists:["offset"]};function Qu(t,e,n){void 0===n&&(n=!1);var s,i,r=su(e),o=su(e)&&function(t){var e=t.getBoundingClientRect(),n=cu(e.width)/t.offsetWidth||1,s=cu(e.height)/t.offsetHeight||1;return 1!==n||1!==s}(e),a=fu(e),l=hu(t,o),c={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(r||!r&&!n)&&(("body"!==tu(e)||Bu(a))&&(c=(s=e)!==eu(s)&&su(s)?{scrollLeft:(i=s).scrollLeft,scrollTop:i.scrollTop}:Nu(s)),su(e)?((h=hu(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):a&&(h.x=Pu(a))),{x:l.left+c.scrollLeft-h.x,y:l.top+c.scrollTop-h.y,width:l.width,height:l.height}}function Ku(t){var e=new Map,n=new Set,s=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var s=e.get(t);s&&i(s)}})),s.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),s}function Ju(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var td={placement:"bottom",modifiers:[],strategy:"absolute"};function ed(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function nd(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,s=void 0===n?[]:n,i=e.defaultOptions,r=void 0===i?td:i;return function(t,e,n){void 0===n&&(n=r);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},td,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},o=[],a=!1,l={state:i,setOptions:function(n){var a="function"==typeof n?n(i.options):n;c(),i.options=Object.assign({},r,i.options,a),i.scrollParents={reference:nu(t)?Vu(t):t.contextElement?Vu(t.contextElement):[],popper:Vu(e)};var h=function(t){var e=Ku(t);return Kh.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(s,i.options.modifiers)));return i.orderedModifiers=h.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,s=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var a=r({state:i,name:e,instance:l,options:s}),c=function(){};o.push(a||c)}})),l.update()},forceUpdate:function(){if(!a){var t=i.elements,e=t.reference,n=t.popper;if(ed(e,n)){i.rects={reference:Qu(e,vu(n),"fixed"===i.options.strategy),popper:uu(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var s=0;s<i.orderedModifiers.length;s++)if(!0!==i.reset){var r=i.orderedModifiers[s],o=r.fn,c=r.options,h=void 0===c?{}:c,u=r.name;"function"==typeof o&&(i=o({state:i,options:h,name:u,instance:l})||i)}else i.reset=!1,s=-1}}},update:Ju((function(){return new Promise((function(t){l.forceUpdate(),t(i)}))})),destroy:function(){c(),a=!0}};if(!ed(t,e))return l;function c(){o.forEach((function(t){return t()})),o=[]}return l.setOptions(n).then((function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var sd=nd(),id=nd({defaultModifiers:[Mu,Gu,ku,ru,Xu,Hu,Zu,Tu,$u]}),rd=nd({defaultModifiers:[Mu,Gu,ku,ru]});n(kh,Sh),n(kh,Jh);const od=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},ad=t=>{const e=od(t);return e&&document.querySelector(e)?e:null},ld=t=>{const e=od(t);return e?document.querySelector(e):null},cd=t=>{t.dispatchEvent(new Event("transitionend"))},hd=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),ud=t=>hd(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,dd=(t,e,n)=>{Object.keys(n).forEach((s=>{const i=n[s],r=e[s],o=r&&hd(r)?"element":null==(a=r)?`${a}`:{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(i).test(o))throw new TypeError(`${t.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${i}".`)}))},pd=t=>!(!hd(t)||0===t.getClientRects().length)&&"visible"===getComputedStyle(t).getPropertyValue("visibility"),md=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),fd=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?fd(t.parentNode):null},gd=()=>{},_d=t=>{t.offsetHeight},vd=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},yd=[],bd=()=>"rtl"===document.documentElement.dir,wd=t=>{var e;e=()=>{const e=vd();if(e){const n=t.NAME,s=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=s,t.jQueryInterface)}},"loading"===document.readyState?(yd.length||document.addEventListener("DOMContentLoaded",(()=>{yd.forEach((t=>t()))})),yd.push(e)):e()},xd=t=>{"function"==typeof t&&t()},Td=(t,e,n=!0)=>{if(!n)return void xd(t);const s=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const s=Number.parseFloat(e),i=Number.parseFloat(n);return s||i?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let i=!1;const r=({target:n})=>{n===e&&(i=!0,e.removeEventListener("transitionend",r),xd(t))};e.addEventListener("transitionend",r),setTimeout((()=>{i||cd(e)}),s)},Ed=(t,e,n,s)=>{let i=t.indexOf(e);if(-1===i)return t[!n&&s?t.length-1:0];const r=t.length;return i+=n?1:-1,s&&(i=(i+r)%r),t[Math.max(0,Math.min(i,r-1))]},Cd=/[^.]*(?=\..*)\.|.*/,Ad=/\..*/,kd=/::\d+$/,Sd={};let Md=1;const Od={mouseenter:"mouseover",mouseleave:"mouseout"},Id=/^(mouseenter|mouseleave)/i,Ld=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Dd(t,e){return e&&`${e}::${Md++}`||t.uidEvent||Md++}function Nd(t){const e=Dd(t);return t.uidEvent=e,Sd[e]=Sd[e]||{},Sd[e]}function Pd(t,e,n=null){const s=Object.keys(t);for(let i=0,r=s.length;i<r;i++){const r=t[s[i]];if(r.originalHandler===e&&r.delegationSelector===n)return r}return null}function Bd(t,e,n){const s="string"==typeof e,i=s?n:e;let r=qd(t);return Ld.has(r)||(r=t),[s,i,r]}function Rd(t,e,n,s,i){if("string"!=typeof e||!t)return;if(n||(n=s,s=null),Id.test(e)){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s?s=t(s):n=t(n)}const[r,o,a]=Bd(e,n,s),l=Nd(t),c=l[a]||(l[a]={}),h=Pd(c,o,r?n:null);if(h)return void(h.oneOff=h.oneOff&&i);const u=Dd(o,e.replace(Cd,"")),d=r?function(t,e,n){return function s(i){const r=t.querySelectorAll(e);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(let a=r.length;a--;)if(r[a]===o)return i.delegateTarget=o,s.oneOff&&jd.off(t,i.type,e,n),n.apply(o,[i]);return null}}(t,n,s):function(t,e){return function n(s){return s.delegateTarget=t,n.oneOff&&jd.off(t,s.type,e),e.apply(t,[s])}}(t,n);d.delegationSelector=r?n:null,d.originalHandler=o,d.oneOff=i,d.uidEvent=u,c[u]=d,t.addEventListener(a,d,r)}function Vd(t,e,n,s,i){const r=Pd(e[n],s,i);r&&(t.removeEventListener(n,r,Boolean(i)),delete e[n][r.uidEvent])}function qd(t){return t=t.replace(Ad,""),Od[t]||t}const jd={on(t,e,n,s){Rd(t,e,n,s,!1)},one(t,e,n,s){Rd(t,e,n,s,!0)},off(t,e,n,s){if("string"!=typeof e||!t)return;const[i,r,o]=Bd(e,n,s),a=o!==e,l=Nd(t),c=e.startsWith(".");if(void 0!==r){if(!l||!l[o])return;return void Vd(t,l,o,r,i?n:null)}c&&Object.keys(l).forEach((n=>{!function(t,e,n,s){const i=e[n]||{};Object.keys(i).forEach((r=>{if(r.includes(s)){const s=i[r];Vd(t,e,n,s.originalHandler,s.delegationSelector)}}))}(t,l,n,e.slice(1))}));const h=l[o]||{};Object.keys(h).forEach((n=>{const s=n.replace(kd,"");if(!a||e.includes(s)){const e=h[n];Vd(t,l,o,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,n){if("string"!=typeof e||!t)return null;const s=vd(),i=qd(e),r=e!==i,o=Ld.has(i);let a,l=!0,c=!0,h=!1,u=null;return r&&s&&(a=s.Event(e,n),s(t).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented()),o?(u=document.createEvent("HTMLEvents"),u.initEvent(i,l,!0)):u=new CustomEvent(e,{bubbles:l,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((t=>{Object.defineProperty(u,t,{get:()=>n[t]})})),h&&u.preventDefault(),c&&t.dispatchEvent(u),u.defaultPrevented&&void 0!==a&&a.preventDefault(),u}},Fd=new Map,Wd={set(t,e,n){Fd.has(t)||Fd.set(t,new Map);const s=Fd.get(t);s.has(e)||0===s.size?s.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(t,e)=>Fd.has(t)&&Fd.get(t).get(e)||null,remove(t,e){if(!Fd.has(t))return;const n=Fd.get(t);n.delete(e),0===n.size&&Fd.delete(t)}};class zd{constructor(t){(t=ud(t))&&(this._element=t,Wd.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Wd.remove(this._element,this.constructor.DATA_KEY),jd.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((t=>{this[t]=null}))}_queueCallback(t,e,n=!0){Td(t,e,n)}static getInstance(t){return Wd.get(ud(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.1.3"}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const Hd=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;jd.on(document,n,`[data-bs-dismiss="${s}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),md(this))return;const i=ld(this)||this.closest(`.${s}`);t.getOrCreateInstance(i)[e]()}))};class Ud extends zd{static get NAME(){return"alert"}close(){if(jd.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),jd.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Ud.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Hd(Ud,"close"),wd(Ud);class Yd extends zd{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=Yd.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}function $d(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function Xd(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}jd.on(document,"click.bs.button.data-api",'[data-bs-toggle="button"]',(t=>{t.preventDefault();const e=t.target.closest('[data-bs-toggle="button"]');Yd.getOrCreateInstance(e).toggle()})),wd(Yd);const Gd={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Xd(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Xd(e)}`)},getDataAttributes(t){if(!t)return{};const e={};return Object.keys(t.dataset).filter((t=>t.startsWith("bs"))).forEach((n=>{let s=n.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=$d(t.dataset[n])})),e},getDataAttribute:(t,e)=>$d(t.getAttribute(`data-bs-${Xd(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position:t=>({top:t.offsetTop,left:t.offsetLeft})},Zd={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let s=t.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE&&3!==s.nodeType;)s.matches(e)&&n.push(s),s=s.parentNode;return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(", ");return this.find(e,t).filter((t=>!md(t)&&pd(t)))}},Qd={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},Kd={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Jd="next",tp="prev",ep="left",np="right",sp={ArrowLeft:np,ArrowRight:ep};class ip extends zd{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=Zd.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Qd}static get NAME(){return"carousel"}next(){this._slide(Jd)}nextWhenVisible(){!document.hidden&&pd(this._element)&&this.next()}prev(){this._slide(tp)}pause(t){t||(this._isPaused=!0),Zd.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&(cd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=Zd.findOne(".active.carousel-item",this._element);const e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void jd.one(this._element,"slid.bs.carousel",(()=>this.to(t)));if(e===t)return this.pause(),void this.cycle();const n=t>e?Jd:tp;this._slide(n,this._items[t])}_getConfig(t){return t={...Qd,...Gd.getDataAttributes(this._element),..."object"==typeof t?t:{}},dd("carousel",t,Kd),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=40)return;const e=t/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?np:ep)}_addEventListeners(){this._config.keyboard&&jd.on(this._element,"keydown.bs.carousel",(t=>this._keydown(t))),"hover"===this._config.pause&&(jd.on(this._element,"mouseenter.bs.carousel",(t=>this.pause(t))),jd.on(this._element,"mouseleave.bs.carousel",(t=>this.cycle(t)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=t=>this._pointerEvent&&("pen"===t.pointerType||"touch"===t.pointerType),e=e=>{t(e)?this.touchStartX=e.clientX:this._pointerEvent||(this.touchStartX=e.touches[0].clientX)},n=t=>{this.touchDeltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this.touchStartX},s=e=>{t(e)&&(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((t=>this.cycle(t)),500+this._config.interval))};Zd.find(".carousel-item img",this._element).forEach((t=>{jd.on(t,"dragstart.bs.carousel",(t=>t.preventDefault()))})),this._pointerEvent?(jd.on(this._element,"pointerdown.bs.carousel",(t=>e(t))),jd.on(this._element,"pointerup.bs.carousel",(t=>s(t))),this._element.classList.add("pointer-event")):(jd.on(this._element,"touchstart.bs.carousel",(t=>e(t))),jd.on(this._element,"touchmove.bs.carousel",(t=>n(t))),jd.on(this._element,"touchend.bs.carousel",(t=>s(t))))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=sp[t.key];e&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?Zd.find(".carousel-item",t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){const n=t===Jd;return Ed(this._items,e,n,this._config.wrap)}_triggerSlideEvent(t,e){const n=this._getItemIndex(t),s=this._getItemIndex(Zd.findOne(".active.carousel-item",this._element));return jd.trigger(this._element,"slide.bs.carousel",{relatedTarget:t,direction:e,from:s,to:n})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=Zd.findOne(".active",this._indicatorsElement);e.classList.remove("active"),e.removeAttribute("aria-current");const n=Zd.find("[data-bs-target]",this._indicatorsElement);for(let e=0;e<n.length;e++)if(Number.parseInt(n[e].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(t)){n[e].classList.add("active"),n[e].setAttribute("aria-current","true");break}}}_updateInterval(){const t=this._activeElement||Zd.findOne(".active.carousel-item",this._element);if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,e){const n=this._directionToOrder(t),s=Zd.findOne(".active.carousel-item",this._element),i=this._getItemIndex(s),r=e||this._getItemByOrder(n,s),o=this._getItemIndex(r),a=Boolean(this._interval),l=n===Jd,c=l?"carousel-item-start":"carousel-item-end",h=l?"carousel-item-next":"carousel-item-prev",u=this._orderToDirection(n);if(r&&r.classList.contains("active"))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(r,u).defaultPrevented)return;if(!s||!r)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(r),this._activeElement=r;const d=()=>{jd.trigger(this._element,"slid.bs.carousel",{relatedTarget:r,direction:u,from:i,to:o})};if(this._element.classList.contains("slide")){r.classList.add(h),_d(r),s.classList.add(c),r.classList.add(c);const t=()=>{r.classList.remove(c,h),r.classList.add("active"),s.classList.remove("active",h,c),this._isSliding=!1,setTimeout(d,0)};this._queueCallback(t,s,!0)}else s.classList.remove("active"),r.classList.add("active"),this._isSliding=!1,d();a&&this.cycle()}_directionToOrder(t){return[np,ep].includes(t)?bd()?t===ep?tp:Jd:t===ep?Jd:tp:t}_orderToDirection(t){return[Jd,tp].includes(t)?bd()?t===tp?ep:np:t===tp?np:ep:t}static carouselInterface(t,e){const n=ip.getOrCreateInstance(t,e);let{_config:s}=n;"object"==typeof e&&(s={...s,...e});const i="string"==typeof e?e:s.slide;if("number"==typeof e)n.to(e);else if("string"==typeof i){if(void 0===n[i])throw new TypeError(`No method named "${i}"`);n[i]()}else s.interval&&s.ride&&(n.pause(),n.cycle())}static jQueryInterface(t){return this.each((function(){ip.carouselInterface(this,t)}))}static dataApiClickHandler(t){const e=ld(this);if(!e||!e.classList.contains("carousel"))return;const n={...Gd.getDataAttributes(e),...Gd.getDataAttributes(this)},s=this.getAttribute("data-bs-slide-to");s&&(n.interval=!1),ip.carouselInterface(e,n),s&&ip.getInstance(e).to(s),t.preventDefault()}}jd.on(document,"click.bs.carousel.data-api","[data-bs-slide], [data-bs-slide-to]",ip.dataApiClickHandler),jd.on(window,"load.bs.carousel.data-api",(()=>{const t=Zd.find('[data-bs-ride="carousel"]');for(let e=0,n=t.length;e<n;e++)ip.carouselInterface(t[e],ip.getInstance(t[e]))})),wd(ip);const rp={toggle:!0,parent:null},op={toggle:"boolean",parent:"(null|element)"};class ap extends zd{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];const n=Zd.find('[data-bs-toggle="collapse"]');for(let t=0,e=n.length;t<e;t++){const e=n[t],s=ad(e),i=Zd.find(s).filter((t=>t===this._element));null!==s&&i.length&&(this._selector=s,this._triggerArray.push(e))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return rp}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t,e=[];if(this._config.parent){const t=Zd.find(":scope .collapse .collapse",this._config.parent);e=Zd.find(".collapse.show, .collapse.collapsing",this._config.parent).filter((e=>!t.includes(e)))}const n=Zd.findOne(this._selector);if(e.length){const s=e.find((t=>n!==t));if(t=s?ap.getInstance(s):null,t&&t._isTransitioning)return}if(jd.trigger(this._element,"show.bs.collapse").defaultPrevented)return;e.forEach((e=>{n!==e&&ap.getOrCreateInstance(e,{toggle:!1}).hide(),t||Wd.set(e,"bs.collapse",null)}));const s=this._getDimension();this._element.classList.remove("collapse"),this._element.classList.add("collapsing"),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse","show"),this._element.style[s]="",jd.trigger(this._element,"shown.bs.collapse")}),this._element,!0),this._element.style[s]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(jd.trigger(this._element,"hide.bs.collapse").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,_d(this._element),this._element.classList.add("collapsing"),this._element.classList.remove("collapse","show");const e=this._triggerArray.length;for(let t=0;t<e;t++){const e=this._triggerArray[t],n=ld(e);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0;this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove("collapsing"),this._element.classList.add("collapse"),jd.trigger(this._element,"hidden.bs.collapse")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains("show")}_getConfig(t){return(t={...rp,...Gd.getDataAttributes(this._element),...t}).toggle=Boolean(t.toggle),t.parent=ud(t.parent),dd("collapse",t,op),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=Zd.find(":scope .collapse .collapse",this._config.parent);Zd.find('[data-bs-toggle="collapse"]',this._config.parent).filter((e=>!t.includes(e))).forEach((t=>{const e=ld(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}))}_addAriaAndCollapsedClass(t,e){t.length&&t.forEach((t=>{e?t.classList.remove("collapsed"):t.classList.add("collapsed"),t.setAttribute("aria-expanded",e)}))}static jQueryInterface(t){return this.each((function(){const e={};"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1);const n=ap.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}jd.on(document,"click.bs.collapse.data-api",'[data-bs-toggle="collapse"]',(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=ad(this);Zd.find(e).forEach((t=>{ap.getOrCreateInstance(t,{toggle:!1}).toggle()}))})),wd(ap);const lp=new RegExp("ArrowUp|ArrowDown|Escape"),cp=bd()?"top-end":"top-start",hp=bd()?"top-start":"top-end",up=bd()?"bottom-end":"bottom-start",dp=bd()?"bottom-start":"bottom-end",pp=bd()?"left-start":"right-start",mp=bd()?"right-start":"left-start",fp={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},gp={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class _p extends zd{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return fp}static get DefaultType(){return gp}static get NAME(){return"dropdown"}toggle(){return this._isShown()?this.hide():this.show()}show(){if(md(this._element)||this._isShown(this._menu))return;const t={relatedTarget:this._element};if(jd.trigger(this._element,"show.bs.dropdown",t).defaultPrevented)return;const e=_p.getParentFromElement(this._element);this._inNavbar?Gd.setDataAttribute(this._menu,"popper","none"):this._createPopper(e),"ontouchstart"in document.documentElement&&!e.closest(".navbar-nav")&&[].concat(...document.body.children).forEach((t=>jd.on(t,"mouseover",gd))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add("show"),this._element.classList.add("show"),jd.trigger(this._element,"shown.bs.dropdown",t)}hide(){if(md(this._element)||!this._isShown(this._menu))return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){jd.trigger(this._element,"hide.bs.dropdown",t).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>jd.off(t,"mouseover",gd))),this._popper&&this._popper.destroy(),this._menu.classList.remove("show"),this._element.classList.remove("show"),this._element.setAttribute("aria-expanded","false"),Gd.removeDataAttribute(this._menu,"popper"),jd.trigger(this._element,"hidden.bs.dropdown",t))}_getConfig(t){if(t={...this.constructor.Default,...Gd.getDataAttributes(this._element),...t},dd("dropdown",t,this.constructor.DefaultType),"object"==typeof t.reference&&!hd(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${"dropdown".toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(t){if(void 0===kh)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=t:hd(this._config.reference)?e=ud(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const n=this._getPopperConfig(),s=n.modifiers.find((t=>"applyStyles"===t.name&&!1===t.enabled));this._popper=kh.createPopper(e,this._menu,n),s&&Gd.setDataAttribute(this._menu,"popper","static")}_isShown(t=this._element){return t.classList.contains("show")}_getMenuElement(){return Zd.next(this._element,".dropdown-menu")[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains("dropend"))return pp;if(t.classList.contains("dropstart"))return mp;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?hp:cp:e?dp:up}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=Zd.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(pd);n.length&&Ed(n,e,"ArrowDown"===t,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=_p.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t&&(2===t.button||"keyup"===t.type&&"Tab"!==t.key))return;const e=Zd.find('[data-bs-toggle="dropdown"]');for(let n=0,s=e.length;n<s;n++){const s=_p.getInstance(e[n]);if(!s||!1===s._config.autoClose)continue;if(!s._isShown())continue;const i={relatedTarget:s._element};if(t){const e=t.composedPath(),n=e.includes(s._menu);if(e.includes(s._element)||"inside"===s._config.autoClose&&!n||"outside"===s._config.autoClose&&n)continue;if(s._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;"click"===t.type&&(i.clickEvent=t)}s._completeHide(i)}}static getParentFromElement(t){return ld(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?"Space"===t.key||"Escape"!==t.key&&("ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.target.closest(".dropdown-menu")):!lp.test(t.key))return;const e=this.classList.contains("show");if(!e&&"Escape"===t.key)return;if(t.preventDefault(),t.stopPropagation(),md(this))return;const n=this.matches('[data-bs-toggle="dropdown"]')?this:Zd.prev(this,'[data-bs-toggle="dropdown"]')[0],s=_p.getOrCreateInstance(n);if("Escape"!==t.key)return"ArrowUp"===t.key||"ArrowDown"===t.key?(e||s.show(),void s._selectMenuItem(t)):void(e&&"Space"!==t.key||_p.clearMenus());s.hide()}}jd.on(document,"keydown.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]',_p.dataApiKeydownHandler),jd.on(document,"keydown.bs.dropdown.data-api",".dropdown-menu",_p.dataApiKeydownHandler),jd.on(document,"click.bs.dropdown.data-api",_p.clearMenus),jd.on(document,"keyup.bs.dropdown.data-api",_p.clearMenus),jd.on(document,"click.bs.dropdown.data-api",'[data-bs-toggle="dropdown"]',(function(t){t.preventDefault(),_p.getOrCreateInstance(this).toggle()})),wd(_p);class vp{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",(e=>e+t)),this._setElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","paddingRight",(e=>e+t)),this._setElementAttributes(".sticky-top","marginRight",(e=>e-t))}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const s=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+s)return;this._saveInitialAttribute(t,e);const i=window.getComputedStyle(t)[e];t.style[e]=`${n(Number.parseFloat(i))}px`}))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top","paddingRight"),this._resetElementAttributes(".sticky-top","marginRight")}_saveInitialAttribute(t,e){const n=t.style[e];n&&Gd.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=Gd.getDataAttribute(t,e);void 0===n?t.style.removeProperty(e):(Gd.removeDataAttribute(t,e),t.style[e]=n)}))}_applyManipulationCallback(t,e){hd(t)?e(t):Zd.find(t,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}}const yp={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},bp={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"};class wp{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&_d(this._getElement()),this._getElement().classList.add("show"),this._emulateAnimation((()=>{xd(t)}))):xd(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation((()=>{this.dispose(),xd(t)}))):xd(t)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_getConfig(t){return(t={...yp,..."object"==typeof t?t:{}}).rootElement=ud(t.rootElement),dd("backdrop",t,bp),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),jd.on(this._getElement(),"mousedown.bs.backdrop",(()=>{xd(this._config.clickCallback)})),this._isAppended=!0)}dispose(){this._isAppended&&(jd.off(this._element,"mousedown.bs.backdrop"),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){Td(t,this._getElement(),this._config.isAnimated)}}const xp={trapElement:null,autofocus:!0},Tp={trapElement:"element",autofocus:"boolean"};class Ep{constructor(t){this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:t,autofocus:e}=this._config;this._isActive||(e&&t.focus(),jd.off(document,".bs.focustrap"),jd.on(document,"focusin.bs.focustrap",(t=>this._handleFocusin(t))),jd.on(document,"keydown.tab.bs.focustrap",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,jd.off(document,".bs.focustrap"))}_handleFocusin(t){const{target:e}=t,{trapElement:n}=this._config;if(e===document||e===n||n.contains(e))return;const s=Zd.focusableChildren(n);0===s.length?n.focus():"backward"===this._lastTabNavDirection?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?"backward":"forward")}_getConfig(t){return t={...xp,..."object"==typeof t?t:{}},dd("focustrap",t,Tp),t}}const Cp={backdrop:!0,keyboard:!0,focus:!0},Ap={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"};class kp extends zd{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=Zd.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new vp}static get Default(){return Cp}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;jd.trigger(this._element,"show.bs.modal",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add("modal-open"),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),jd.on(this._dialog,"mousedown.dismiss.bs.modal",(()=>{jd.one(this._element,"mouseup.dismiss.bs.modal",(t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;if(jd.trigger(this._element,"hide.bs.modal").defaultPrevented)return;this._isShown=!1;const t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove("show"),jd.off(this._element,"click.dismiss.bs.modal"),jd.off(this._dialog,"mousedown.dismiss.bs.modal"),this._queueCallback((()=>this._hideModal()),this._element,t)}dispose(){[window,this._dialog].forEach((t=>jd.off(t,".bs.modal"))),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new wp({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ep({trapElement:this._element})}_getConfig(t){return t={...Cp,...Gd.getDataAttributes(this._element),..."object"==typeof t?t:{}},dd("modal",t,Ap),t}_showElement(t){const e=this._isAnimated(),n=Zd.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,n&&(n.scrollTop=0),e&&_d(this._element),this._element.classList.add("show");this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,jd.trigger(this._element,"shown.bs.modal",{relatedTarget:t})}),this._dialog,e)}_setEscapeEvent(){this._isShown?jd.on(this._element,"keydown.dismiss.bs.modal",(t=>{this._config.keyboard&&"Escape"===t.key?(t.preventDefault(),this.hide()):this._config.keyboard||"Escape"!==t.key||this._triggerBackdropTransition()})):jd.off(this._element,"keydown.dismiss.bs.modal")}_setResizeEvent(){this._isShown?jd.on(window,"resize.bs.modal",(()=>this._adjustDialog())):jd.off(window,"resize.bs.modal")}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove("modal-open"),this._resetAdjustments(),this._scrollBar.reset(),jd.trigger(this._element,"hidden.bs.modal")}))}_showBackdrop(t){jd.on(this._element,"click.dismiss.bs.modal",(t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&(!0===this._config.backdrop?this.hide():"static"===this._config.backdrop&&this._triggerBackdropTransition())})),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(jd.trigger(this._element,"hidePrevented.bs.modal").defaultPrevented)return;const{classList:t,scrollHeight:e,style:n}=this._element,s=e>document.documentElement.clientHeight;!s&&"hidden"===n.overflowY||t.contains("modal-static")||(s||(n.overflowY="hidden"),t.add("modal-static"),this._queueCallback((()=>{t.remove("modal-static"),s||this._queueCallback((()=>{n.overflowY=""}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;(!n&&t&&!bd()||n&&!t&&bd())&&(this._element.style.paddingLeft=`${e}px`),(n&&!t&&!bd()||!n&&t&&bd())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=kp.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}jd.on(document,"click.bs.modal.data-api",'[data-bs-toggle="modal"]',(function(t){const e=ld(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),jd.one(e,"show.bs.modal",(t=>{t.defaultPrevented||jd.one(e,"hidden.bs.modal",(()=>{pd(this)&&this.focus()}))}));const n=Zd.findOne(".modal.show");n&&kp.getInstance(n).hide();kp.getOrCreateInstance(e).toggle(this)})),Hd(kp),wd(kp);const Sp={backdrop:!0,keyboard:!0,scroll:!1},Mp={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"};class Op extends zd{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return"offcanvas"}static get Default(){return Sp}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;if(jd.trigger(this._element,"show.bs.offcanvas",{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||(new vp).hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add("show");this._queueCallback((()=>{this._config.scroll||this._focustrap.activate(),jd.trigger(this._element,"shown.bs.offcanvas",{relatedTarget:t})}),this._element,!0)}hide(){if(!this._isShown)return;if(jd.trigger(this._element,"hide.bs.offcanvas").defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove("show"),this._backdrop.hide();this._queueCallback((()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||(new vp).reset(),jd.trigger(this._element,"hidden.bs.offcanvas")}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(t){return t={...Sp,...Gd.getDataAttributes(this._element),..."object"==typeof t?t:{}},dd("offcanvas",t,Mp),t}_initializeBackDrop(){return new wp({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Ep({trapElement:this._element})}_addEventListeners(){jd.on(this._element,"keydown.dismiss.bs.offcanvas",(t=>{this._config.keyboard&&"Escape"===t.key&&this.hide()}))}static jQueryInterface(t){return this.each((function(){const e=Op.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}jd.on(document,"click.bs.offcanvas.data-api",'[data-bs-toggle="offcanvas"]',(function(t){const e=ld(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),md(this))return;jd.one(e,"hidden.bs.offcanvas",(()=>{pd(this)&&this.focus()}));const n=Zd.findOne(".offcanvas.show");n&&n!==e&&Op.getInstance(n).hide();Op.getOrCreateInstance(e).toggle(this)})),jd.on(window,"load.bs.offcanvas.data-api",(()=>Zd.find(".offcanvas.show").forEach((t=>Op.getOrCreateInstance(t).show())))),Hd(Op),wd(Op);const Ip=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Lp=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Dp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,Np=(t,e)=>{const n=t.nodeName.toLowerCase();if(e.includes(n))return!Ip.has(n)||Boolean(Lp.test(t.nodeValue)||Dp.test(t.nodeValue));const s=e.filter((t=>t instanceof RegExp));for(let t=0,e=s.length;t<e;t++)if(s[t].test(n))return!0;return!1},Pp={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function Bp(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const s=(new window.DOMParser).parseFromString(t,"text/html"),i=[].concat(...s.body.querySelectorAll("*"));for(let t=0,n=i.length;t<n;t++){const n=i[t],s=n.nodeName.toLowerCase();if(!Object.keys(e).includes(s)){n.remove();continue}const r=[].concat(...n.attributes),o=[].concat(e["*"]||[],e[s]||[]);r.forEach((t=>{Np(t,o)||n.removeAttribute(t.nodeName)}))}return s.body.innerHTML}const Rp=new Set(["sanitize","allowList","sanitizeFn"]),Vp={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},qp={AUTO:"auto",TOP:"top",RIGHT:bd()?"left":"right",BOTTOM:"bottom",LEFT:bd()?"right":"left"},jp={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:Pp,popperConfig:null},Fp={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"};class Wp extends zd{constructor(t,e){if(void 0===kh)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return jp}static get NAME(){return"tooltip"}static get Event(){return Fp}static get DefaultType(){return Vp}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains("show"))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),jd.off(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const t=jd.trigger(this._element,this.constructor.Event.SHOW),e=fd(this._element),n=null===e?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(t.defaultPrevented||!n)return;"tooltip"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(".tooltip-inner").innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const s=this.getTipElement(),i=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME);s.setAttribute("id",i),this._element.setAttribute("aria-describedby",i),this._config.animation&&s.classList.add("fade");const r="function"==typeof this._config.placement?this._config.placement.call(this,s,this._element):this._config.placement,o=this._getAttachment(r);this._addAttachmentClass(o);const{container:a}=this._config;Wd.set(s,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(a.append(s),jd.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=kh.createPopper(this._element,s,this._getPopperConfig(o)),s.classList.add("show");const l=this._resolvePossibleFunction(this._config.customClass);l&&s.classList.add(...l.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>{jd.on(t,"mouseover",gd)}));const c=this.tip.classList.contains("fade");this._queueCallback((()=>{const t=this._hoverState;this._hoverState=null,jd.trigger(this._element,this.constructor.Event.SHOWN),"out"===t&&this._leave(null,this)}),this.tip,c)}hide(){if(!this._popper)return;const t=this.getTipElement();if(jd.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove("show"),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((t=>jd.off(t,"mouseover",gd))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const e=this.tip.classList.contains("fade");this._queueCallback((()=>{this._isWithActiveTrigger()||("show"!==this._hoverState&&t.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),jd.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())}),this.tip,e),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");t.innerHTML=this._config.template;const e=t.children[0];return this.setContent(e),e.classList.remove("fade","show"),this.tip=e,this.tip}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),".tooltip-inner")}_sanitizeAndSetContent(t,e,n){const s=Zd.findOne(n,t);e||!s?this.setElementContent(s,e):s.remove()}setElementContent(t,e){if(null!==t)return hd(e)?(e=ud(e),void(this._config.html?e.parentNode!==t&&(t.innerHTML="",t.append(e)):t.textContent=e.textContent)):void(this._config.html?(this._config.sanitize&&(e=Bp(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e)}getTitle(){const t=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(t)}updateAttachment(t){return"right"===t?"end":"left"===t?"start":t}_initializeOnDelegatedTarget(t,e){return e||this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:t=>this._handlePopperPlacementChange(t)}],onFirstUpdate:t=>{t.options.placement!==t.placement&&this._handlePopperPlacementChange(t)}};return{...e,..."function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(t)}`)}_getAttachment(t){return qp[t.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach((t=>{if("click"===t)jd.on(this._element,this.constructor.Event.CLICK,this._config.selector,(t=>this.toggle(t)));else if("manual"!==t){const e="hover"===t?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,n="hover"===t?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;jd.on(this._element,e,this._config.selector,(t=>this._enter(t))),jd.on(this._element,n,this._config.selector,(t=>this._leave(t)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},jd.on(this._element.closest(".modal"),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=this._element.getAttribute("title"),e=typeof this._element.getAttribute("data-bs-original-title");(t||"string"!==e)&&(this._element.setAttribute("data-bs-original-title",t||""),!t||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",t),this._element.setAttribute("title",""))}_enter(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusin"===t.type?"focus":"hover"]=!0),e.getTipElement().classList.contains("show")||"show"===e._hoverState?e._hoverState="show":(clearTimeout(e._timeout),e._hoverState="show",e._config.delay&&e._config.delay.show?e._timeout=setTimeout((()=>{"show"===e._hoverState&&e.show()}),e._config.delay.show):e.show())}_leave(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger["focusout"===t.type?"focus":"hover"]=e._element.contains(t.relatedTarget)),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState="out",e._config.delay&&e._config.delay.hide?e._timeout=setTimeout((()=>{"out"===e._hoverState&&e.hide()}),e._config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=Gd.getDataAttributes(this._element);return Object.keys(e).forEach((t=>{Rp.has(t)&&delete e[t]})),(t={...this.constructor.Default,...e,..."object"==typeof t&&t?t:{}}).container=!1===t.container?document.body:ud(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),dd("tooltip",t,this.constructor.DefaultType),t.sanitize&&(t.template=Bp(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){const t=this.getTipElement(),e=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),n=t.getAttribute("class").match(e);null!==n&&n.length>0&&n.map((t=>t.trim())).forEach((e=>t.classList.remove(e)))}_getBasicClassPrefix(){return"bs-tooltip"}_handlePopperPlacementChange(t){const{state:e}=t;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each((function(){const e=Wp.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}wd(Wp);const zp={...Wp.Default,placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'},Hp={...Wp.DefaultType,content:"(string|element|function)"},Up={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"};class Yp extends Wp{static get Default(){return zp}static get NAME(){return"popover"}static get Event(){return Up}static get DefaultType(){return Hp}isWithContent(){return this.getTitle()||this._getContent()}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),".popover-header"),this._sanitizeAndSetContent(t,this._getContent(),".popover-body")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return"bs-popover"}static jQueryInterface(t){return this.each((function(){const e=Yp.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}wd(Yp);const $p={offset:10,method:"auto",target:""},Xp={offset:"number",method:"string",target:"(string|element)"},Gp=".nav-link, .list-group-item, .dropdown-item";class Zp extends zd{constructor(t,e){super(t),this._scrollElement="BODY"===this._element.tagName?window:this._element,this._config=this._getConfig(e),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,jd.on(this._scrollElement,"scroll.bs.scrollspy",(()=>this._process())),this.refresh(),this._process()}static get Default(){return $p}static get NAME(){return"scrollspy"}refresh(){const t=this._scrollElement===this._scrollElement.window?"offset":"position",e="auto"===this._config.method?t:this._config.method,n="position"===e?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();Zd.find(Gp,this._config.target).map((t=>{const s=ad(t),i=s?Zd.findOne(s):null;if(i){const t=i.getBoundingClientRect();if(t.width||t.height)return[Gd[e](i).top+n,s]}return null})).filter((t=>t)).sort(((t,e)=>t[0]-e[0])).forEach((t=>{this._offsets.push(t[0]),this._targets.push(t[1])}))}dispose(){jd.off(this._scrollElement,".bs.scrollspy"),super.dispose()}_getConfig(t){return(t={...$p,...Gd.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}}).target=ud(t.target)||document.documentElement,dd("scrollspy",t,Xp),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;){this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}}_activate(t){this._activeTarget=t,this._clear();const e=Gp.split(",").map((e=>`${e}[data-bs-target="${t}"],${e}[href="${t}"]`)),n=Zd.findOne(e.join(","),this._config.target);n.classList.add("active"),n.classList.contains("dropdown-item")?Zd.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add("active"):Zd.parents(n,".nav, .list-group").forEach((t=>{Zd.prev(t,".nav-link, .list-group-item").forEach((t=>t.classList.add("active"))),Zd.prev(t,".nav-item").forEach((t=>{Zd.children(t,".nav-link").forEach((t=>t.classList.add("active")))}))})),jd.trigger(this._scrollElement,"activate.bs.scrollspy",{relatedTarget:t})}_clear(){Zd.find(Gp,this._config.target).filter((t=>t.classList.contains("active"))).forEach((t=>t.classList.remove("active")))}static jQueryInterface(t){return this.each((function(){const e=Zp.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}jd.on(window,"load.bs.scrollspy.data-api",(()=>{Zd.find('[data-bs-spy="scroll"]').forEach((t=>new Zp(t)))})),wd(Zp);class Qp extends zd{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains("active"))return;let t;const e=ld(this._element),n=this._element.closest(".nav, .list-group");if(n){const e="UL"===n.nodeName||"OL"===n.nodeName?":scope > li > .active":".active";t=Zd.find(e,n),t=t[t.length-1]}const s=t?jd.trigger(t,"hide.bs.tab",{relatedTarget:this._element}):null;if(jd.trigger(this._element,"show.bs.tab",{relatedTarget:t}).defaultPrevented||null!==s&&s.defaultPrevented)return;this._activate(this._element,n);const i=()=>{jd.trigger(t,"hidden.bs.tab",{relatedTarget:this._element}),jd.trigger(this._element,"shown.bs.tab",{relatedTarget:t})};e?this._activate(e,e.parentNode,i):i()}_activate(t,e,n){const s=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?Zd.children(e,".active"):Zd.find(":scope > li > .active",e))[0],i=n&&s&&s.classList.contains("fade"),r=()=>this._transitionComplete(t,s,n);s&&i?(s.classList.remove("show"),this._queueCallback(r,t,!0)):r()}_transitionComplete(t,e,n){if(e){e.classList.remove("active");const t=Zd.findOne(":scope > .dropdown-menu .active",e.parentNode);t&&t.classList.remove("active"),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}t.classList.add("active"),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),_d(t),t.classList.contains("fade")&&t.classList.add("show");let s=t.parentNode;if(s&&"LI"===s.nodeName&&(s=s.parentNode),s&&s.classList.contains("dropdown-menu")){const e=t.closest(".dropdown");e&&Zd.find(".dropdown-toggle",e).forEach((t=>t.classList.add("active"))),t.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(t){return this.each((function(){const e=Qp.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}jd.on(document,"click.bs.tab.data-api",'[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',(function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),md(this))return;Qp.getOrCreateInstance(this).show()})),wd(Qp);const Kp={animation:"boolean",autohide:"boolean",delay:"number"},Jp={animation:!0,autohide:!0,delay:5e3};class tm extends zd{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return Kp}static get Default(){return Jp}static get NAME(){return"toast"}show(){if(jd.trigger(this._element,"show.bs.toast").defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");this._element.classList.remove("hide"),_d(this._element),this._element.classList.add("show"),this._element.classList.add("showing"),this._queueCallback((()=>{this._element.classList.remove("showing"),jd.trigger(this._element,"shown.bs.toast"),this._maybeScheduleHide()}),this._element,this._config.animation)}hide(){if(!this._element.classList.contains("show"))return;if(jd.trigger(this._element,"hide.bs.toast").defaultPrevented)return;this._element.classList.add("showing"),this._queueCallback((()=>{this._element.classList.add("hide"),this._element.classList.remove("showing"),this._element.classList.remove("show"),jd.trigger(this._element,"hidden.bs.toast")}),this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains("show")&&this._element.classList.remove("show"),super.dispose()}_getConfig(t){return t={...Jp,...Gd.getDataAttributes(this._element),..."object"==typeof t&&t?t:{}},dd("toast",t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){jd.on(this._element,"mouseover.bs.toast",(t=>this._onInteraction(t,!0))),jd.on(this._element,"mouseout.bs.toast",(t=>this._onInteraction(t,!1))),jd.on(this._element,"focusin.bs.toast",(t=>this._onInteraction(t,!0))),jd.on(this._element,"focusout.bs.toast",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=tm.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Hd(tm),wd(tm);var em=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map((function(t){return new Yp(t)}));const nm=new kp(document.getElementById("rulesModal"));document.getElementById("rules").onclick=function(){nm.show()},console.log("%c Designed With Love By Us ","background: #0055CC; color: #CCFF00");const sm={kicklofi:document.getElementById("kicklofi").src,snarelofi:document.getElementById("snarelofi").src,hihatlofi:document.getElementById("hihatlofi").src,analogtechnokick:document.getElementById("analogtechnokick").src,latinkick:document.getElementById("latinkick").src,pureanalogkick:document.getElementById("pureanalogkick").src,analogtechnosnare:document.getElementById("analogtechnosnare").src,rimshot:document.getElementById("rimshot").src,analogtechnohh:document.getElementById("analogtechnohh").src,analogtechnoopenhh:document.getElementById("analogtechnoopenhh").src,electrodubhh:document.getElementById("electrodubhh").src,afrocowbell:document.getElementById("afrocowbell").src,afrodjembe:document.getElementById("afrodjembe").src,afrodjembe2:document.getElementById("afrodjembe2").src,afrodjembe3:document.getElementById("afrodjembe3").src,afrorattle:document.getElementById("afrorattle").src,conga:document.getElementById("conga").src,conga2:document.getElementById("conga2").src,conga3:document.getElementById("conga3").src,conga4:document.getElementById("conga4").src,conga5:document.getElementById("conga5").src,shaker:document.getElementById("shaker").src,pluic:document.getElementById("pluic").src,indiancymbal:document.getElementById("indiancymbal").src,indiancymbal2:document.getElementById("indiancymbal2").src,indiandumbek:document.getElementById("indiandumbek").src,indiantabla:document.getElementById("indiantabla").src,indiantar:document.getElementById("indiantar").src,maracas:document.getElementById("maracas").src,timbale:document.getElementById("timbale").src,lazersnare:document.getElementById("lazersnare").src,eternsnare:document.getElementById("eternsnare").src,eternsnare2:document.getElementById("eternsnare2").src},im={rect:4,tri:3,pent:5},rm={C:130.81,"C#":138.59,D:146.83,"D#":155.56,E:164.81,F:174.61,"F#":185,G:196,"G#":207.65,A:220,"A#":233.08,B:246.94},om=document.getElementById("rhythm-button"),am=document.getElementById("neurons-button");om.disabled=!0,am.disabled=!0,La.bpm.value=120;var lm=La.bpm.value,cm=document.getElementById("bpmValue");cm.value=La.bpm.value,document.getElementById("bpmValuespan").innerText=cm.value,cm.oninput=function(){La.bpm.value=cm.value,lm=cm.value,document.getElementById("bpmValuespan").innerText=cm.value};parseFloat(document.getElementById("melodic-pad").clientWidth);var hm,um,dm,pm,mm,fm,gm,_m,vm,ym,bm,wm,xm,Tm,Em=new(t(c))(0,0,0,"","",lm,0,0),Cm=new(t(c))(0,0,0,"","",lm,0,0),Am=new(t(c))(0,0,0,"","",lm,0,0),km=new(t(l))(0,0,"",""),Sm=new(t(Ba))(0,0,"",lm);function Mm(t,e){for(let n=0;n<t.length;n++)t[n]==e?e.solo=!e.solo:t[n].solo=!1}function Om(t,e){for(let n=0;n<t.length;n++)t[n]==e?"rgb(78, 190, 255)"!=e.style.backgroundColor?(e.style.backgroundColor="rgb(78, 190, 255)",e.style.color="black",e.style.borderColor="rgb(78, 190, 255)"):(e.blur(),e.style.backgroundColor="",e.style.color="",e.style.borderColor=""):(t[n].style.backgroundColor="",t[n].style.color="",t[n].style.borderColor="")}function Im(t){"rgb(177, 0, 32)"!=t.style.backgroundColor?(t.style.backgroundColor="rgb(177, 0, 32)",t.style.color="black",t.style.borderColor="rgb(177, 0, 32)"):(t.blur(),t.style.backgroundColor="",t.style.color="",t.style.borderColor="")}const Lm=new va(0),Dm=document.getElementById("PanSlideRhy1");Dm.value=0,Dm.oninput=function(){Lm.set({pan:Dm.value}),Dm.value>0?(document.getElementById("panButt1").classList.add("din-pandx"),document.getElementById("panButt1").classList.add(xm),document.getElementById("panButt1").classList.remove("din-pansx"),document.getElementById("panButt1").classList.remove(Tm)):Dm.value<0?(document.getElementById("panButt1").classList.add("din-pansx"),document.getElementById("panButt1").classList.add(Tm),document.getElementById("panButt1").classList.remove("din-pandx"),document.getElementById("panButt1").classList.remove(xm)):(document.getElementById("panButt1").classList.remove("din-pandx"),document.getElementById("panButt1").classList.remove(xm),document.getElementById("panButt1").classList.remove("din-pansx"),document.getElementById("panButt1").classList.remove(Tm))};const Nm=document.getElementById("ResRhy1");Nm.onclick=function(){Dm.value=0,Lm.set({pan:Dm.value}),Nm.blur(),document.getElementById("panButt1").classList.remove("din-pandx"),document.getElementById("panButt1").classList.remove(xm),document.getElementById("panButt1").classList.remove("din-pansx"),document.getElementById("panButt1").classList.remove(Tm)};const Pm=new va(0),Bm=document.getElementById("PanSlideRhy2");Bm.value=0,Bm.oninput=function(){Pm.set({pan:Bm.value}),Bm.value>0?(document.getElementById("PanButt2").classList.add("din-pandx"),document.getElementById("PanButt2").classList.add(xm),document.getElementById("PanButt2").classList.remove("din-pansx"),document.getElementById("PanButt2").classList.remove(Tm)):Bm.value<0?(document.getElementById("PanButt2").classList.add("din-pansx"),document.getElementById("PanButt2").classList.add(Tm),document.getElementById("PanButt2").classList.remove("din-pandx"),document.getElementById("PanButt2").classList.remove(xm)):(document.getElementById("PanButt2").classList.remove("din-pandx"),document.getElementById("PanButt2").classList.remove(xm),document.getElementById("PanButt2").classList.remove("din-pansx"),document.getElementById("PanButt2").classList.remove(Tm))};const Rm=document.getElementById("ResRhy2");Rm.onclick=function(){Bm.value=0,Pm.set({pan:Bm.value}),Rm.blur(),document.getElementById("PanButt2").classList.remove("din-pandx"),document.getElementById("PanButt2").classList.remove(xm),document.getElementById("PanButt2").classList.remove("din-pansx"),document.getElementById("PanButt2").classList.remove(Tm)};const Vm=new va(0),qm=document.getElementById("PanSlideRhy3");qm.value=0,qm.oninput=function(){Vm.set({pan:qm.value}),qm.value>0?(document.getElementById("PanButt3").classList.add("din-pandx"),document.getElementById("PanButt3").classList.add(xm),document.getElementById("PanButt3").classList.remove("din-pansx"),document.getElementById("PanButt3").classList.remove(Tm)):qm.value<0?(document.getElementById("PanButt3").classList.add("din-pansx"),document.getElementById("PanButt3").classList.add(Tm),document.getElementById("PanButt3").classList.remove("din-pandx"),document.getElementById("PanButt3").classList.remove(xm)):(document.getElementById("PanButt3").classList.remove("din-pandx"),document.getElementById("PanButt3").classList.remove(xm),document.getElementById("PanButt3").classList.remove("din-pansx"),document.getElementById("PanButt3").classList.remove(Tm))};const jm=document.getElementById("ResRhy3");jm.onclick=function(){qm.value=0,Vm.set({pan:qm.value}),jm.blur(),document.getElementById("PanButt3").classList.remove("din-pandx"),document.getElementById("PanButt3").classList.remove(xm),document.getElementById("PanButt3").classList.remove("din-pansx"),document.getElementById("PanButt3").classList.remove(Tm)};const Fm=new va(0),Wm=document.getElementById("PanSlideMel");Wm.value=0,Wm.oninput=function(){Fm.set({pan:Wm.value}),Wm.value>0?(document.getElementById("PanMButt").classList.add("din-pandx"),document.getElementById("PanMButt").classList.add(xm),document.getElementById("PanMButt").classList.remove("din-pansx"),document.getElementById("PanMButt").classList.remove(Tm)):Wm.value<0?(document.getElementById("PanMButt").classList.add("din-pansx"),document.getElementById("PanMButt").classList.add(Tm),document.getElementById("PanMButt").classList.remove("din-pandx"),document.getElementById("PanMButt").classList.remove(xm)):(document.getElementById("PanMButt").classList.remove("din-pandx"),document.getElementById("PanMButt").classList.remove(xm),document.getElementById("PanMButt").classList.remove("din-pansx"),document.getElementById("PanMButt").classList.remove(Tm))};const zm=document.getElementById("ResMel");zm.onclick=function(){Wm.value=0,Fm.set({pan:Wm.value}),zm.blur(),document.getElementById("PanMButt").classList.remove("din-pandx"),document.getElementById("PanMButt").classList.remove(xm),document.getElementById("PanMButt").classList.remove("din-pansx"),document.getElementById("PanMButt").classList.remove(Tm)};const Hm=new va(0),Um=document.getElementById("PanSlideHarm");Um.value=0,Um.oninput=function(){Hm.set({pan:Um.value}),Um.value>0?(document.getElementById("PanHButt").classList.add("din-pandx"),document.getElementById("PanHButt").classList.add(xm),document.getElementById("PanHButt").classList.remove("din-pansx"),document.getElementById("PanHButt").classList.remove(Tm)):Um.value<0?(document.getElementById("PanHButt").classList.add("din-pansx"),document.getElementById("PanHButt").classList.add(Tm),document.getElementById("PanHButt").classList.remove("din-pandx"),document.getElementById("PanHButt").classList.remove(xm)):(document.getElementById("PanHButt").classList.remove("din-pandx"),document.getElementById("PanHButt").classList.remove(xm),document.getElementById("PanHButt").classList.remove("din-pansx"),document.getElementById("PanHButt").classList.remove(Tm))};const Ym=document.getElementById("ResHarm");Ym.onclick=function(){Um.value=0,Hm.set({pan:Um.value}),Ym.blur(),document.getElementById("PanHButt").classList.remove("din-pandx"),document.getElementById("PanHButt").classList.remove(xm),document.getElementById("PanHButt").classList.remove("din-pansx"),document.getElementById("PanHButt").classList.remove(Tm)};const $m=new Ea({wet:0,delayTime:"4n",feedback:0}),Xm=document.getElementById("WetDelay"),Gm=document.getElementById("WetDelSpan");Xm.value=0,Xm.oninput=function(){0==Xm.value?(document.getElementById("delon").classList.add("effect-off"),document.getElementById("delon").classList.remove("effect-on")):(document.getElementById("delon").classList.add("effect-on"),document.getElementById("delon").classList.remove("effect-off")),$m.set({wet:Xm.value}),Gm.innerText=Xm.value};const Zm=document.getElementById("FeedbackDelay"),Qm=document.getElementById("FeedbackDelSpan");Zm.value=0,Zm.oninput=function(){$m.set({feedback:Zm.value}),Qm.innerText=Zm.value};const Km=document.getElementById("selectNoteDelay");Km.onchange=function(){$m.set({delayTime:Km.value})};const Jm=new xa({wet:0,distortion:.1}),tf=document.getElementById("WetDist"),ef=document.getElementById("WetDistSpan");tf.value=0,tf.oninput=function(){0==tf.value?(document.getElementById("diston").classList.add("effect-off"),document.getElementById("diston").classList.remove("effect-on")):(document.getElementById("diston").classList.add("effect-on"),document.getElementById("diston").classList.remove("effect-off")),Jm.set({wet:tf.value}),ef.innerText=tf.value};const nf=document.getElementById("Dist"),sf=document.getElementById("DistSpan");nf.value=0,nf.oninput=function(){Jm.set({distortion:nf.value}),sf.innerText=nf.value};const rf=new Aa({wet:0,frequency:1,depth:0,spread:180}).toDestination().start(),of=document.getElementById("WetTrem"),af=document.getElementById("WetTremSpan");of.value=0,of.oninput=function(){0==of.value?(document.getElementById("tremon").classList.add("effect-off"),document.getElementById("tremon").classList.remove("effect-on")):(document.getElementById("tremon").classList.add("effect-on"),document.getElementById("tremon").classList.remove("effect-off")),rf.set({wet:of.value}),af.innerText=of.value};const lf=document.getElementById("FreqTrem"),cf=document.getElementById("FreqTremSpan");lf.value=1,lf.oninput=function(){rf.set({frequency:lf.value}),cf.innerText=lf.value};const hf=document.getElementById("DepthTrem"),uf=document.getElementById("DepthTremSpan");hf.value=0,hf.oninput=function(){rf.set({depth:hf.value}),uf.innerText=hf.value};const df=document.getElementById("SpreadTrem"),pf=document.getElementById("SpreadTremSpan");df.value=180,df.oninput=function(){rf.set({spread:df.value}),pf.innerText=df.value};const mf=new Ca({wet:0,frequency:1,baseFrequency:150,octaves:2}),ff=document.getElementById("WetPha"),gf=document.getElementById("WetPhaSpan");ff.value=0,ff.oninput=function(){0==ff.value?(document.getElementById("phaon").classList.add("effect-off"),document.getElementById("phaon").classList.remove("effect-on")):(document.getElementById("phaon").classList.add("effect-on"),document.getElementById("phaon").classList.remove("effect-off")),mf.set({wet:ff.value}),gf.innerText=ff.value};const _f=document.getElementById("FreqPha"),vf=document.getElementById("FreqPhaSpan");_f.value=1,_f.oninput=function(){mf.set({frequency:_f.value}),vf.innerText=_f.value};const yf=document.getElementById("OctPha"),bf=document.getElementById("OctPhaSpan");yf.value=1,yf.oninput=function(){mf.set({octaves:yf.value}),bf.innerText=yf.value};const wf=document.getElementById("BFPha"),xf=document.getElementById("BFPhaSpan");wf.value=100,wf.oninput=function(){mf.set({baseFrequency:wf.value}),xf.innerText=wf.value};var Tf=[],Ef=[];const Cf=new ko(-10),Af=new ka;Ef.push(Af);const kf=document.getElementById("VolMel");kf.value=5.84;const Sf=document.getElementById("solo-mel");Tf.push(Sf);const Mf=document.getElementById("mute-mel");kf.oninput=function(){Cf.volume.value=-Math.pow(kf.value-9,2),"rgb(177, 0, 32)"==Mf.style.backgroundColor&&(Mf.blur(),Mf.style.backgroundColor="",Mf.style.color="",Mf.style.borderColor="")},Sf.onclick=function(){Mm(Ef,Af),Om(Tf,Sf)},Mf.onclick=function(){Cf.mute=!Cf.mute,Im(Mf)};const Of=new ko(-10),If=(new ka).toDestination();Ef.push(If);const Lf=document.getElementById("VolHarm");Lf.value=5.84;const Df=document.getElementById("solo-harm");Tf.push(Df);const Nf=document.getElementById("mute-harm");Lf.oninput=function(){Of.volume.value=-Math.pow(Lf.value-9,2),"rgb(177, 0, 32)"==Nf.style.backgroundColor&&(Nf.blur(),Nf.style.backgroundColor="",Nf.style.color="",Nf.style.borderColor="")},Df.onclick=function(){Mm(Ef,If),Om(Tf,Df)},Nf.onclick=function(){Of.mute=!Of.mute,Im(Nf)};const Pf=new ko(-10),Bf=new ko(-10),Rf=new ko(-10),Vf=(new ka).toDestination(),qf=(new ka).toDestination(),jf=(new ka).toDestination();Ef.push(Vf,qf,jf);const Ff=document.getElementById("VolRhy1");Ff.value=5.84;const Wf=document.getElementById("VolRhy2");Wf.value=5.84;const zf=document.getElementById("VolRhy3");zf.value=5.84;const Hf=document.getElementById("solo1"),Uf=document.getElementById("solo2"),Yf=document.getElementById("solo3");Tf.push(Hf,Uf,Yf);const $f=document.getElementById("mute1"),Xf=document.getElementById("mute2"),Gf=document.getElementById("mute3");Ff.oninput=function(){Pf.volume.value=-Math.pow(Ff.value-9,2),"rgb(177, 0, 32)"==$f.style.backgroundColor&&($f.blur(),$f.style.backgroundColor="",$f.style.color="",$f.style.borderColor="")},Wf.oninput=function(){Bf.volume.value=-Math.pow(Wf.value-9,2),"rgb(177, 0, 32)"==Xf.style.backgroundColor&&(Xf.blur(),Xf.style.backgroundColor="",Xf.style.color="",Xf.style.borderColor="")},zf.oninput=function(){Rf.volume.value=-Math.pow(zf.value-9,2),"rgb(177, 0, 32)"==Gf.style.backgroundColor&&(Gf.blur(),Gf.style.backgroundColor="",Gf.style.color="",Gf.style.borderColor="")},Hf.onclick=function(){Mm(Ef,Vf),Om(Tf,Hf)},Uf.onclick=function(){Mm(Ef,qf),Om(Tf,Uf)},Yf.onclick=function(){Mm(Ef,jf),Om(Tf,Yf)},$f.onclick=function(){Pf.mute=!Pf.mute,Im($f)},Xf.onclick=function(){Bf.mute=!Bf.mute,Im(Xf)},Gf.onclick=function(){Rf.mute=!Rf.mute,Im(Gf)};var Zf=(new da).set({envelope:{attack:.5,decay:.5,sustain:.5,release:.5},maxPolyphony:32}).chain(mf,Jm,$m,Fm,Cf,Af,rf);const Qf=document.getElementById("selectWaveMel");Qf.onchange=function(){Zf.set({oscillator:{type:Qf.value}})};const Kf=document.getElementById("selectWaveHarm");Kf.onchange=function(){Jf.set({oscillator:{type:Kf.value}})};var Jf=(new da).set({envelope:{attack:.5,decay:.2,sustain:1,release:4},maxPolyphony:32}).chain(Of,Hm,If),tg=document.getElementById("atkslider");tg.value=Zf.get().envelope.attack,tg.onchange=()=>{Zf.set({envelope:{attack:parseFloat(tg.value)}})};var eg=document.getElementById("decayslider");eg.value=Zf.get().envelope.decay,eg.onchange=()=>{Zf.set({envelope:{decay:parseFloat(eg.value)}})};var ng=document.getElementById("susslider");ng.value=Zf.get().envelope.sustain,ng.onchange=()=>{Zf.set({envelope:{sustain:parseFloat(ng.value)}})};var sg=document.getElementById("relslider");sg.value=Zf.get().envelope.release,sg.onchange=()=>{Zf.set({envelope:{release:parseFloat(sg.value)}})};var ig=!1;const rg=document.getElementById("initNeuronsPad1");rg.onclick=function(){const e=document.getElementById("NeuronsPad1").value,n=document.getElementById("selectShape1").value;if(pm=sm[document.getElementById("soundP1").value],e<4||e>32||"Metric"==n||null==pm)document.getElementById("errorMessage1").innerText="Please, fill in all the fields correctly!";else{hm=new ta(pm).chain(Pf,Lm,Vf),ig=!0;const s=Ah().addTo("#rhythm-pad1").size(200,200);document.getElementById("rhythm-pad1").classList.add(n),gm=im[n],Em=new(t(c))("1",e,200,200,s,n,La.bpm.value,Pf,Vf,Lm,hm),document.getElementById("init1").classList.add("disabledNeurons"),document.getElementById("afterInit1").classList.remove("disabledNeurons"),Em.initNeurons(),am.disabled&&(am.disabled="")}},document.getElementById("soundP1").onchange=function(){ig&&hm.load(sm[document.getElementById("soundP1").value])};var og=!1;const ag=document.getElementById("initNeuronsPad2");ag.onclick=function(){const e=document.getElementById("NeuronsPad2").value,n=document.getElementById("selectShape2").value;if(mm=sm[document.getElementById("soundP2").value],e<4||e>32||"Metric"==n||null==mm)document.getElementById("errorMessage2").innerText="Please, fill in all the fields correctly!";else{um=new ta(mm).chain(Bf,Pm,qf),og=!0;const s=Ah().addTo("#rhythm-pad2").size(200,200);document.getElementById("rhythm-pad2").classList.add(n),_m=im[n],Cm=new(t(c))("2",e,200,200,s,n,La.bpm.value,Bf,qf,Pm,um),document.getElementById("init2").classList.add("disabledNeurons"),document.getElementById("afterInit2").classList.remove("disabledNeurons"),Cm.initNeurons(),am.disabled&&(am.disabled="")}},document.getElementById("soundP2").onchange=function(){og&&um.load(sm[document.getElementById("soundP2").value])};var lg=!1;const cg=document.getElementById("initNeuronsPad3");cg.onclick=function(){const e=document.getElementById("NeuronsPad3").value,n=document.getElementById("selectShape3").value;if(fm=sm[document.getElementById("soundP3").value],e<4||e>32||"Metric"==n||null==fm)document.getElementById("errorMessage3").innerText="Please, fill in all the fields correctly!";else{dm=new ta(fm).chain(Rf,Vm,jf),lg=!0;const s=Ah().addTo("#rhythm-pad3").size(200,200);document.getElementById("rhythm-pad3").classList.add(n),vm=im[n],Am=new(t(c))("3",e,200,200,s,n,La.bpm.value,Rf,jf,Vm,dm),document.getElementById("init3").classList.add("disabledNeurons"),document.getElementById("afterInit3").classList.remove("disabledNeurons"),Am.initNeurons(),am.disabled&&(am.disabled="")}},document.getElementById("soundP3").onchange=function(){lg&&dm.load(sm[document.getElementById("soundP3").value])};var hg=!1;const ug=document.getElementById("initMelodicPad");ug.onclick=function(){const e=document.getElementById("NeuronsPadMel").value;ym=parseFloat(document.getElementById("selectMetricMel").value);const n=document.getElementById("selectWaveMel").value;if(bm=document.getElementById("selectScaleMel").value,wm=rm[document.getElementById("selectKeyMel").value],e<4||e>32||0==ym||"Wave Type"==n||"Scale"==bm||null==wm)document.getElementById("errorMessagem").innerText="Please, fill in all the fields correctly!";else{document.getElementById("selectScaleMel").disabled="disabled",document.getElementById("selectKeyMel").disabled="disabled",Zf.set({oscillator:{type:n}});const s=Ah().addTo("#melodic-pad").size(200,200);km=new(t(l))(e,200,s,bm),document.getElementById("init-mel").classList.add("disabledNeurons"),document.getElementById("afterInit-mel").classList.remove("disabledNeurons"),km.initNeurons(),hg=!0,am.disabled&&(am.disabled="")}};const dg=document.getElementById("initNeuronsPadHarm");dg.onclick=function(){const e=document.getElementById("NeuronsPadHarm").value,n=document.getElementById("selectWaveHarm").value;if(e<4||e>12||0==hg||"Wave Type"==n)document.getElementById("errorMessageh").innerText="Please, fill in all the fields correctly!!\nInitialize the Melodic Pad before this one!";else{const s=Ah().addTo("#harmonic-pad1").size(200,200);Jf.set({oscillator:{type:n}}),Sm=new(t(Ba))(e,200,s,La.bpm.value),document.getElementById("Harmonicinit").classList.add("disabledNeurons"),document.getElementById("afterInitHarm").classList.remove("disabledNeurons"),Sm.initNeurons(),am.disabled&&(am.disabled="")}};var pg=[];function mg(){if(0!=Em.getN())var t=window.requestAnimationFrame(bg.bind(window,undefined,Em,pm,gm,t));if(0!=Cm.getN())var e=window.requestAnimationFrame(bg.bind(window,undefined,Cm,mm,_m,e));if(0!=Am.getN())var n=window.requestAnimationFrame(bg.bind(window,undefined,Am,fm,vm,n));if(0!=km.getN())var s=window.requestAnimationFrame(vg.bind(window,undefined,km,wm,ym,s));if(0!=Sm.getN())var i=window.requestAnimationFrame(yg.bind(window,undefined,Sm,ym,wm,i))}var fg=0,gg=0,_g=0;function vg(e,n,s,i,r){n.getEps()<=.15?(cancelAnimationFrame(r),om.disabled="",gg=n.calcDistNormNeu(),_g=n.calcPosPad(),(e=new(t(Pa))(gg,_g,La.bpm.value,i,s,n.getCtx(),Zf)).initPart(),e.createPart(),fg=e.getLoopEnd()):(n.render(),r=window.requestAnimationFrame(vg.bind(window,e,n,s,i,r)))}function yg(e,n,s,i,r){n.getEps()<=.15?(cancelAnimationFrame(r),om.disabled="",(e=new(t(Ra))(n.calcDistNormNeu(),fg,La.bpm.value,s,i,n.getCtx(),Jf,_g,gg,bm)).initPart(),e.createPart()):(n.render(),r=window.requestAnimationFrame(yg.bind(window,e,n,s,i,r)))}function bg(e,n,s,i,r){if(n.getEps()<=.15){if(cancelAnimationFrame(r),"rect"==n.getShape())document.getElementById("clickPad"+n.getPad()).style.display="",(o=Ah(document.getElementById("clickPad"+n.getPad()).children[0])).attr({cx:6,cy:7.5});else if("tri"==n.getShape()){document.getElementById("clickPad"+n.getPad()).style.display="",(o=Ah(document.getElementById("clickPad"+n.getPad()).children[0])).attr({cx:n.getWidth()/2+6,cy:11})}else{var o;document.getElementById("clickPad"+n.getPad()).style.display="",(o=Ah(document.getElementById("clickPad"+n.getPad()).children[0])).attr({cx:n.getWidth()/2+5,cy:8+n.getHeight()-n.getWidth()/(1+2*Math.cos(.4*Math.PI))*(Math.sin(.4*Math.PI)+Math.cos(.3*Math.PI))})}n.visualClick(o),om.disabled="",(e=new(t(Na))(n.calcDistNormNeu(),La.bpm.value,s,i,n.getCtx(),n.getVol(),n.getSol(),n.getPan(),n.getPlayer())).createPart(),pg.push(e.getarrDur())}else n.render(),r=window.requestAnimationFrame(bg.bind(window,e,n,s,i,r))}var wg=!1;am.onclick=()=>{wg?window.location.reload():(mg(),am.innerText="↻",wg=!0,rg.disabled=!0,ag.disabled=!0,cg.disabled=!0,ug.disabled=!0,dg.disabled=!0)};var xg=!1;om.onclick=async()=>{await jr.resume(),xg?(La.pause(Ia()),om.innerText="Play",xg=!1):(xg=!0,function(){om.innerText="Pause";var t=Ia();La.start(t)}()),om.blur()};const Tg=document.querySelectorAll("#PanButt2,#panButt1,#PanButt3,#PanMButt,#PanHButt"),Eg=document.querySelectorAll(".padAndControls, .padAndControlsMel, .padAndControlsHarm"),Cg=document.getElementById("bpm-bord"),Ag=document.querySelectorAll("label"),kg=document.querySelectorAll("span"),Sg=document.getElementsByClassName("btn"),Mg=document.querySelectorAll("input[type=number]"),Og=document.querySelectorAll("select"),Ig=document.getElementById("stop1"),Lg=document.getElementById("stop2"),Dg=document.getElementById("body"),Ng=document.getElementById("themes");function Pg(t){document.cookie=t}function Bg(){let t=decodeURIComponent(document.cookie);if(""!=t)if("1"==Ng.value){for(xm="blob-pandx",Tm="blob-pansx",Ig.classList.add("blob-color1"),Lg.classList.add("blob-color2"),Ig.classList.remove("inferno-color1"),Lg.classList.remove("inferno-color2"),Ig.classList.remove("heaven-color1"),Lg.classList.remove("heaven-color2"),Dg.classList.add("theme-blob"),Dg.classList.remove("theme-inferno"),Dg.classList.remove("theme-heaven"),i=0;i<Tg.length;i++)Tg[i].classList.contains("inferno-pandx")||Tg[i].classList.contains("heaven-pandx")?(Tg[i].classList.add("blob-pandx"),Tg[i].classList.remove("inferno-pandx"),Tg[i].classList.remove("heaven-pandx")):(Tg[i].classList.contains("inferno-pansx")||Tg[i].classList.contains("heaven-pansx"))&&(Tg[i].classList.add("blob-pansx"),Tg[i].classList.remove("inferno-pansx"),Tg[i].classList.remove("heaven-pansx"));for(i=0;i<Og.length;i++)Og[i].classList.add("blob-select"),Og[i].classList.remove("inferno-select"),Og[i].classList.remove("heaven-select");for(i=0;i<Sg.length;i++)Sg[i].classList.add("neon"),Sg[i].classList.remove("neon-inferno"),Sg[i].classList.remove("neon-heaven");for(i=0;i<Mg.length;i++)Mg[i].classList.add("blob-num"),Mg[i].classList.remove("inferno-num"),Mg[i].classList.remove("heaven-num");for(i=0;i<kg.length;i++)kg[i].classList.add("blob-span"),kg[i].classList.remove("inferno-span"),kg[i].classList.remove("heaven-span");for(i=0;i<Ag.length;i++)Ag[i].classList.add("blob-label"),Ag[i].classList.remove("inferno-label"),Ag[i].classList.remove("heaven-label");for(i=0;i<Eg.length;i++)Eg[i].classList.add("blob-border"),Eg[i].classList.remove("inferno-border"),Eg[i].classList.remove("heaven-border");Cg.classList.add("blob-border"),Cg.classList.remove("inferno-border"),Cg.classList.remove("heaven-border")}else if("2"==Ng.value){for(xm="inferno-pandx",Tm="inferno-pansx",Ig.classList.add("inferno-color1"),Lg.classList.add("inferno-color2"),Ig.classList.remove("blob-color1"),Lg.classList.remove("blob-color2"),Ig.classList.remove("heaven-color1"),Lg.classList.remove("heaven-color2"),Dg.classList.add("theme-inferno"),Dg.classList.remove("theme-blob"),Dg.classList.remove("theme-heaven"),i=0;i<Tg.length;i++)Tg[i].classList.contains("inferno-pandx")||Tg[i].classList.contains("heaven-pandx")?(Tg[i].classList.add("inferno-pandx"),Tg[i].classList.remove("blob-pandx"),Tg[i].classList.remove("heaven-pandx")):(Tg[i].classList.contains("blob-pansx")||Tg[i].classList.contains("heaven-pansx"))&&(Tg[i].classList.add("inferno-pansx"),Tg[i].classList.remove("blob-pansx"),Tg[i].classList.remove("heaven-pansx"));for(i=0;i<Og.length;i++)Og[i].classList.add("inferno-select"),Og[i].classList.remove("blob-select"),Og[i].classList.remove("heaven-select");for(i=0;i<Sg.length;i++)Sg[i].classList.add("neon-inferno"),Sg[i].classList.remove("neon"),Sg[i].classList.remove("neon-heaven");for(i=0;i<Mg.length;i++)Mg[i].classList.add("inferno-num"),Mg[i].classList.remove("blob-num"),Mg[i].classList.remove("heaven-num");for(i=0;i<kg.length;i++)kg[i].classList.add("inferno-span"),kg[i].classList.remove("blob-span"),kg[i].classList.remove("heaven-span");for(i=0;i<Ag.length;i++)Ag[i].classList.add("inferno-label"),Ag[i].classList.remove("blob-label"),Ag[i].classList.remove("heaven-label");for(i=0;i<Eg.length;i++)Eg[i].classList.add("inferno-border"),Eg[i].classList.remove("blob-border"),Eg[i].classList.remove("heaven-border");Cg.classList.add("inferno-border"),Cg.classList.remove("blob-border"),Cg.classList.remove("heaven-border")}else{for(xm="heaven-pandx",Tm="heaven-pansx",Ig.classList.add("heaven-color1"),Lg.classList.add("heaven-color2"),Ig.classList.remove("inferno-color1"),Lg.classList.remove("inferno-color2"),Ig.classList.remove("blob-color1"),Lg.classList.remove("blob-color2"),Dg.classList.add("theme-heaven"),Dg.classList.remove("theme-inferno"),Dg.classList.remove("theme-blob"),i=0;i<Tg.length;i++)Tg[i].classList.contains("inferno-pandx")||Tg[i].classList.contains("blob-pandx")?(Tg[i].classList.add("heaven-pandx"),Tg[i].classList.remove("blob-pandx"),Tg[i].classList.remove("inferno-pandx")):(Tg[i].classList.contains("blob-pansx")||Tg[i].classList.contains("inferno-pansx"))&&(Tg[i].classList.add("heaven-pansx"),Tg[i].classList.remove("blob-pansx"),Tg[i].classList.remove("inferno-pansx"));for(i=0;i<Og.length;i++)Og[i].classList.add("heaven-select"),Og[i].classList.remove("inferno-select"),Og[i].classList.remove("blob-select");for(i=0;i<Sg.length;i++)Sg[i].classList.add("neon-heaven"),Sg[i].classList.remove("neon-inferno"),Sg[i].classList.remove("neon");for(i=0;i<Mg.length;i++)Mg[i].classList.add("heaven-num"),Mg[i].classList.remove("inferno-num"),Mg[i].classList.remove("blob-num");for(i=0;i<kg.length;i++)kg[i].classList.add("heaven-span"),kg[i].classList.remove("inferno-span"),kg[i].classList.remove("blob-span");for(i=0;i<Ag.length;i++)Ag[i].classList.add("heaven-label"),Ag[i].classList.remove("inferno-label"),Ag[i].classList.remove("blob-label");for(i=0;i<Eg.length;i++)Eg[i].classList.add("heaven-border"),Eg[i].classList.remove("inferno-border"),Eg[i].classList.remove("blob-border");Cg.classList.add("heaven-border"),Cg.classList.remove("inferno-border"),Cg.classList.remove("blob-border")}else{for(t="1",Ng.value="1",xm="blob-pandx",Tm="blob-pansx",Ig.classList.add("blob-color1"),Lg.classList.add("blob-color2"),Ig.classList.remove("inferno-color1"),Lg.classList.remove("inferno-color2"),Ig.classList.remove("heaven-color1"),Lg.classList.remove("heaven-color2"),Dg.classList.add("theme-blob"),Dg.classList.remove("theme-inferno"),Dg.classList.remove("theme-heaven"),i=0;i<Tg.length;i++)Tg[i].classList.contains("inferno-pandx")||Tg[i].classList.contains("heaven-pandx")?(Tg[i].classList.add("blob-pandx"),Tg[i].classList.remove("inferno-pandx"),Tg[i].classList.remove("heaven-pandx")):(Tg[i].classList.contains("inferno-pansx")||Tg[i].classList.contains("heaven-pansx"))&&(Tg[i].classList.add("blob-pansx"),Tg[i].classList.remove("inferno-pansx"),Tg[i].classList.remove("heaven-pansx"));for(i=0;i<Og.length;i++)Og[i].classList.add("blob-select"),Og[i].classList.remove("inferno-select"),Og[i].classList.remove("heaven-select");for(i=0;i<Sg.length;i++)Sg[i].classList.add("neon"),Sg[i].classList.remove("neon-inferno"),Sg[i].classList.remove("neon-heaven");for(i=0;i<Mg.length;i++)Mg[i].classList.add("blob-num"),Mg[i].classList.remove("inferno-num"),Mg[i].classList.remove("heaven-num");for(i=0;i<kg.length;i++)kg[i].classList.add("blob-span"),kg[i].classList.remove("inferno-span"),kg[i].classList.remove("heaven-span");for(i=0;i<Ag.length;i++)Ag[i].classList.add("blob-label"),Ag[i].classList.remove("inferno-label"),Ag[i].classList.remove("heaven-label");for(i=0;i<Eg.length;i++)Eg[i].classList.add("blob-border"),Eg[i].classList.remove("inferno-border"),Eg[i].classList.remove("heaven-border");Cg.classList.add("blob-border"),Cg.classList.remove("inferno-border"),Cg.classList.remove("heaven-border"),Pg(Ng.value)}}Ng.onchange=function(){if("1"==Ng.value){for(xm="blob-pandx",Tm="blob-pansx",Ig.classList.add("blob-color1"),Lg.classList.add("blob-color2"),Ig.classList.remove("inferno-color1"),Lg.classList.remove("inferno-color2"),Ig.classList.remove("heaven-color1"),Lg.classList.remove("heaven-color2"),Dg.classList.add("theme-blob"),Dg.classList.remove("theme-inferno"),Dg.classList.remove("theme-heaven"),i=0;i<Tg.length;i++)Tg[i].classList.contains("inferno-pandx")||Tg[i].classList.contains("heaven-pandx")?(Tg[i].classList.add("blob-pandx"),Tg[i].classList.remove("inferno-pandx"),Tg[i].classList.remove("heaven-pandx")):(Tg[i].classList.contains("inferno-pansx")||Tg[i].classList.contains("heaven-pansx"))&&(Tg[i].classList.add("blob-pansx"),Tg[i].classList.remove("inferno-pansx"),Tg[i].classList.remove("heaven-pansx"));for(i=0;i<Og.length;i++)Og[i].classList.add("blob-select"),Og[i].classList.remove("inferno-select"),Og[i].classList.remove("heaven-select");for(i=0;i<Sg.length;i++)Sg[i].classList.add("neon"),Sg[i].classList.remove("neon-inferno"),Sg[i].classList.remove("neon-heaven");for(i=0;i<Mg.length;i++)Mg[i].classList.add("blob-num"),Mg[i].classList.remove("inferno-num"),Mg[i].classList.remove("heaven-num");for(i=0;i<kg.length;i++)kg[i].classList.add("blob-span"),kg[i].classList.remove("inferno-span"),kg[i].classList.remove("heaven-span");for(i=0;i<Ag.length;i++)Ag[i].classList.add("blob-label"),Ag[i].classList.remove("inferno-label"),Ag[i].classList.remove("heaven-label");for(i=0;i<Eg.length;i++)Eg[i].classList.add("blob-border"),Eg[i].classList.remove("inferno-border"),Eg[i].classList.remove("heaven-border");Cg.classList.add("blob-border"),Cg.classList.remove("inferno-border"),Cg.classList.remove("heaven-border"),Pg(Ng.value)}else if("2"==Ng.value){for(xm="inferno-pandx",Tm="inferno-pansx",i=0;i<Tg.length;i++)Tg[i].classList.contains("blob-pandx")||Tg[i].classList.contains("heaven-pandx")?(Tg[i].classList.add("inferno-pandx"),Tg[i].classList.remove("blob-pandx"),Tg[i].classList.remove("heaven-pandx")):(Tg[i].classList.contains("blob-pansx")||Tg[i].classList.contains("heaven-pansx"))&&(Tg[i].classList.add("inferno-pansx"),Tg[i].classList.remove("blob-pansx"),Tg[i].classList.remove("heaven-pansx"));for(Ig.classList.add("inferno-color1"),Lg.classList.add("inferno-color2"),Ig.classList.remove("blob-color1"),Lg.classList.remove("blob-color2"),Ig.classList.remove("heaven-color1"),Lg.classList.remove("heaven-color2"),Dg.classList.add("theme-inferno"),Dg.classList.remove("theme-blob"),Dg.classList.remove("theme-heaven"),i=0;i<Og.length;i++)Og[i].classList.add("inferno-select"),Og[i].classList.remove("blob-select"),Og[i].classList.remove("heaven-select");for(i=0;i<Sg.length;i++)Sg[i].classList.add("neon-inferno"),Sg[i].classList.remove("neon"),Sg[i].classList.remove("neon-heaven");for(i=0;i<Mg.length;i++)Mg[i].classList.add("inferno-num"),Mg[i].classList.remove("blob-num"),Mg[i].classList.remove("heaven-num");for(i=0;i<kg.length;i++)kg[i].classList.add("inferno-span"),kg[i].classList.remove("blob-span"),kg[i].classList.remove("heaven-span");for(i=0;i<Ag.length;i++)Ag[i].classList.add("inferno-label"),Ag[i].classList.remove("blob-label"),Ag[i].classList.remove("heaven-label");for(i=0;i<Eg.length;i++)Eg[i].classList.add("inferno-border"),Eg[i].classList.remove("blob-border"),Eg[i].classList.remove("heaven-border");Cg.classList.add("inferno-border"),Cg.classList.remove("blob-border"),Cg.classList.remove("heaven-border"),Pg(Ng.value)}else{for(xm="heaven-pandx",Tm="heaven-pansx",Ig.classList.add("heaven-color1"),Lg.classList.add("heaven-color2"),Ig.classList.remove("inferno-color1"),Lg.classList.remove("inferno-color2"),Ig.classList.remove("blob-color1"),Lg.classList.remove("blob-color2"),Dg.classList.add("theme-heaven"),Dg.classList.remove("theme-inferno"),Dg.classList.remove("theme-blob"),i=0;i<Tg.length;i++)Tg[i].classList.contains("blob-pandx")||Tg[i].classList.contains("inferno-pandx")?(Tg[i].classList.add("heaven-pandx"),Tg[i].classList.remove("blob-pandx"),Tg[i].classList.remove("inferno-pandx")):(Tg[i].classList.contains("blob-pansx")||Tg[i].classList.contains("inferno-pansx"))&&(Tg[i].classList.add("heaven-pansx"),Tg[i].classList.remove("blob-pansx"),Tg[i].classList.remove("inferno-pansx"));for(i=0;i<Og.length;i++)Og[i].classList.add("heaven-select"),Og[i].classList.remove("inferno-select"),Og[i].classList.remove("blob-select");for(i=0;i<Sg.length;i++)Sg[i].classList.add("neon-heaven"),Sg[i].classList.remove("neon-inferno"),Sg[i].classList.remove("neon");for(i=0;i<Mg.length;i++)Mg[i].classList.add("heaven-num"),Mg[i].classList.remove("inferno-num"),Mg[i].classList.remove("blob-num");for(i=0;i<kg.length;i++)kg[i].classList.add("heaven-span"),kg[i].classList.remove("inferno-span"),kg[i].classList.remove("blob-span");for(i=0;i<Ag.length;i++)Ag[i].classList.add("heaven-label"),Ag[i].classList.remove("inferno-label"),Ag[i].classList.remove("blob-label");for(i=0;i<Eg.length;i++)Eg[i].classList.add("heaven-border"),Eg[i].classList.remove("inferno-border"),Eg[i].classList.remove("blob-border");Cg.classList.add("heaven-border"),Cg.classList.remove("inferno-border"),Cg.classList.remove("blob-border"),Pg(Ng.value)}},Dg.onload=function(){Bg();let t=document.getElementById("load-page"),e=document.getElementsByClassName("main-page");setTimeout((function(){t.classList.add("hide"),e[0].classList.add("birona")}),1e3),setTimeout((function(){em[0].show(),setTimeout((function(){em[0].hide()}),3e3)}),5e3)};
//# sourceMappingURL=prj.4994cc5c.js.map
